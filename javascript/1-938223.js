(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{470:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"initialState",function(){return _r}),a.d(n,"UPDATE_RESPONSE_DATA",function(){return vr}),a.d(n,"UPDATE_FAVOURITE_STATUS",function(){return gr}),a.d(n,"TOGGLE_COUPON_MASK",function(){return yr}),a.d(n,"TOGGLE_PROMOTION_MASK",function(){return Er}),a.d(n,"TOGGLE_CITY_MASK",function(){return Sr}),a.d(n,"TOGGLE_TAGLIST_MASK",function(){return Ir}),a.d(n,"TOGGLE_PRICETIP_MASK",function(){return br}),a.d(n,"TOGGLE_PRODUCT_SUMMARY_MASK",function(){return Tr}),a.d(n,"TOGGLE_PREFERRED_MASK",function(){return Nr}),a.d(n,"TOGGLE_ROUTE_MODE",function(){return Pr}),a.d(n,"TOGGLE_COLLECT_STATUS",function(){return Cr}),a.d(n,"UPDATE_COUPON_STATUS",function(){return kr}),a.d(n,"TOGGLE_COMPARE_STATUS",function(){return wr}),a.d(n,"UPDATE_COMPARE_COUNT",function(){return Dr}),a.d(n,"UPDATE_PRODUCT_INFO",function(){return Or}),a.d(n,"UPDATE_DESCRIPTION_INFO",function(){return xr}),a.d(n,"UPDATE_BOOK_INFO",function(){return Ar}),a.d(n,"UPDATE_PRODUCT_TIMINGINFO",function(){return Mr}),a.d(n,"UPDATE_MULTIPLE_LINE",function(){return Lr}),a.d(n,"UPDATE_MULTIPLE_TRAVEL",function(){return Rr}),a.d(n,"UPDATE_IM_PARAMS",function(){return Br}),a.d(n,"UPDATE_ENV_PARAMS",function(){return Gr}),a.d(n,"SET_APP_VERSION",function(){return Ur}),a.d(n,"UPDATE_PAGEID",function(){return Hr}),a.d(n,"UPDATE_ERROR_MESSAGE",function(){return jr}),a.d(n,"UPDATE_SHOW_PHONEPOP",function(){return Fr}),a.d(n,"UPDATE_HIDE_PHONEPOP",function(){return qr}),a.d(n,"TOGGLE_VENDOR_PHONEPOP",function(){return Vr}),a.d(n,"HIDE_SCHEDULE_TIPS",function(){return Wr}),a.d(n,"HIDE_PROPOSAL_ORDER_TIP",function(){return Kr}),a.d(n,"TOGGLE_ADVISOR_MASK",function(){return Jr}),a.d(n,"TOGGLE_PROPOSAL_ORDER_MASK",function(){return Yr}),a.d(n,"UPDATE_PROPOSAL_ORDER_INFO",function(){return Qr}),a.d(n,"UPDATE_PROPOSAL_ORDER_STATUS",function(){return zr}),a.d(n,"TOGGLE_CREDITINFO_MASK",function(){return $r}),a.d(n,"UPDATE_TRADE_MINPRICE_MODE",function(){return Xr}),a.d(n,"TOGGLE_FAVOURITE_MENU",function(){return Zr}),a.d(n,"TOGGLE_CATALOG_STATUS",function(){return eo}),a.d(n,"TOGGLE_SCENESCOUPON_MASK",function(){return to}),a.d(n,"UPDATE_SCENES_COUPON_STATUS",function(){return ao}),a.d(n,"TOGGLE_SHARE_TIP_MASK",function(){return no}),a.d(n,"UPDATE_LINEPRODUCT_DEPARTCITY",function(){return ro}),a.d(n,"UPDATE_ABTEST_RESULT",function(){return oo}),a.d(n,"UPDATE_CHECK_PRODUCTINFO_HASVIDEO",function(){return io}),a.d(n,"UPDATE_ISSHOW_SWITCHMEDIA_BUTTON",function(){return co}),a.d(n,"TOGGLE_NETWORK_CONTENT_BUTTON",function(){return so}),a.d(n,"TOGGLE_SWITCHMEDIA_BUTTON",function(){return lo}),a.d(n,"TOGGLE_VIDEOPLAY_BUTTON",function(){return uo});var r=a(0),o=a.n(r),i=a(77),c=a(97),s=a(436),l=a(19),u=a.n(l);function d(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.BasicInfo,i=t.query,c=t.isInCtripApp,s=t.isIOSApp,l=t.actionIdSuffix,d=t.isShowVideoPlayerContent,f=a.handleBack,h=a.handleAppShare,_=a.handleScrollToTabContent,v=a.handleGoMiniProgramHome,g=a.handleShowShareTipMask,y=!!(c||n.isVBKApp||n.isAdvisorApp||n.isInBestoneApp);if(!r)return null;var E=!(n.isInBestoneApp||n.isBestoneShare)&&!d;"760785"===i.allianceid&&"1330671"===i.sid&&(E=!1);var S=u()({tour_m_header:!0,tour_m_iosapp:s}),I=n.isBstMiniProgram,b=!d&&n.isMiniProgramWaken;return o.a.createElement("div",{className:S,id:"detail_header",style:{display:"block"}},E&&o.a.createElement("span",{className:"tour_m_icon_back tour_fl",onClick:f}),y&&o.a.createElement("span",{className:"tour_m_icon_share tour_fr",onClick:h}),b&&o.a.createElement("span",{id:"".concat(l,"-top-back"),className:"tour_m_icon_home tour_fl",onClick:v},o.a.createElement("span",null,"\u9996\u9875")),b&&o.a.createElement("span",{id:"".concat(l,"-top-share"),className:"tour_m_icon_share tour_fr",onClick:g}),o.a.createElement(m,{state:t,handlers:a}),o.a.createElement("div",{id:"product_title",className:"tour_tab_box",style:{display:"none"}},o.a.createElement("div",{id:"tab_basicInfo",className:"tour_m_tabitem cur",onClick:function(){return _("#product_basicInfo")}},o.a.createElement("div",{id:"".concat(l,"-top-tab-").concat(r.ProductId,"-\u4ea7\u54c1")},"\u4ea7\u54c1")),o.a.createElement("div",{id:"tab_comment",className:"tour_m_tabitem",onClick:function(){return _("#product_comment")}},o.a.createElement("div",{id:"".concat(l,"-top-tab-").concat(r.ProductId,"-\u70b9\u8bc4")},"\u70b9\u8bc4")),o.a.createElement("div",{id:"tab_route",className:"tour_m_tabitem",onClick:function(){return _("#product_route_container")}},o.a.createElement("div",{id:"".concat(l,"-top-tab-").concat(r.ProductId,"-\u884c\u7a0b")},"\u884c\u7a0b")),!I&&o.a.createElement("div",{id:"tab_recommend",className:"tour_m_tabitem",onClick:function(){return _("#product_recommend")}},o.a.createElement("div",{id:"".concat(l,"-top-tab-").concat(r.ProductId,"-\u63a8\u8350")}," ","\u63a8\u8350")),!I&&o.a.createElement("i",{className:"tour_m_tabline tour_m_tabline4"},o.a.createElement("s",null))),o.a.createElement(p,{state:t,handlers:a}),o.a.createElement("div",{className:"tour_header_bg"}))}function m(e){var t=e.state,a=e.handlers,n=t.isShowSwitchMediaMode,r=t.isShowVideoPlayerContent,i=a.handleClickCheckMenu;if(!n)return null;var c=r,s=u()("weixin_video_but","weixin_guide_iconfont2",{current:c}),l=u()("weixin_pic_but","weixin_guide_iconfont2",{current:!c});return o.a.createElement("div",{className:"weixin_video_pic_but"},o.a.createElement("div",{className:s,onClick:function(){i(!0)}}),o.a.createElement("div",{className:l,onClick:function(){i(!1)}}))}function p(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.isShowVideoPlayerContent,i=t.isGoodsRecommendAvailable,c=t.actionIdSuffix,s=a.handleGoodsRecommend;return!n.isInMiniApp||r||!i||n.isBstMiniProgram?null:o.a.createElement("div",{id:"".concat(c,"-recommend-click"),className:"tour_good_thing",onClick:s},o.a.createElement("i",{className:"tour_good_thing_icon"}),"\u63a8\u8350\u597d\u7269")}var f=a(437);function h(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.TourGroupInfo,i=t.TravelList,c=t.MultilineTrainTags,s=a.handleMultiLineChange,l=a.handleMultiTravelChange,u=n.isMultiLine,d=n.isMultiTravel,m=n.activeProductId,p=n.activeAlias;if(u){var h=r.TourGroupProductInfo;return o.a.createElement("div",{className:"tour_m_tabroute_wrap"},o.a.createElement("div",{className:"tour_m_tabroute"},o.a.createElement(f.a,{options:{scrollX:!0,bounce:!1,eventPassthrough:"vertical"},customClass:"tour_m_tabroute_list",customStyle:{width:"".concat(124*h.length+30,"px")}},h.map(function(e,t){return o.a.createElement(_,{key:t,item:e,activeProductId:m,MultilineTrainTags:c,handleMultiLineChange:s})}))))}return d?!Array.isArray(i)||i.length<2?null:o.a.createElement("div",{className:"tour_m_tabroute_wrap"},o.a.createElement("div",{className:"tour_m_tabroute"},o.a.createElement(f.a,{options:{scrollX:!0,bounce:!1,eventPassthrough:"vertical"},customClass:"tour_m_tabroute_list",customStyle:{width:"".concat(124*i.length+30,"px")}},i.map(function(e,t){return o.a.createElement(v,{key:t,item:e,activeAlias:p,handleMultiTravelChange:l})})))):null}function _(e){var t=e.item,a=e.activeProductId,n=e.MultilineTrainTags,r=void 0===n?[]:n,i=e.handleMultiLineChange,c=t.ProductId===a,s=["A","B","C","D","E","F","G","H","I","J"][t.SortNumber-1],l=r.indexOf(t.ProductId)>-1;return o.a.createElement("p",{className:c?"tour_cur":null,onClick:function(){return i(t.ProductId,!0)}},o.a.createElement("span",null,l&&o.a.createElement("i",{className:"tour_depart_hsr_icon"}),s,"\u7ebf\xb7",t.Description))}function v(e){var t=e.item,a=e.activeAlias,n=e.handleMultiTravelChange,r=t.Alias===a;return o.a.createElement("p",{className:r?"tour_cur":null,onClick:function(){n(t.Alias,!0)}},o.a.createElement("span",null,t.Alias,"\u7ebf",t.Name&&"\xb7",t.Name))}var g=a(133);function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=I(this,b(t).call(this,e));var n=e.styles||{};return a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){E(e,t,a[t])})}return e}({width:"100%",height:"150px"},n),a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,o.a.Component),a=t,(n=[{key:"componentDidMount",value:function(){this.video.setAttribute("playsinline","true"),this.video.setAttribute("webkit-playsinline","true"),this.video.setAttribute("x-webkit-airplay","false"),this.video.setAttribute("x5-playsinline","true"),this.video.setAttribute("x5-video-player-type","h5"),this.video.setAttribute("x5-video-player-fullscreen","false"),this.video.setAttribute("x5-video-ignore-metadata","true"),this.video.setAttribute("preload","auto"),this.video.setAttribute("controls","auto"),this.video.setAttribute("loop","true");var e=document.body.clientWidth,t=e*(9/16);this.setState({width:e,height:t}),this.video.play()}},{key:"componentWillUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.player&&(clearInterval(this.time),this.time=null,this.player.dispose(),this.player=null)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"videoTmpl"},o.a.createElement("div",{className:"template-video",style:this.state},o.a.createElement("video",{ref:function(t){return e.video=t},id:"product-video",style:this.state,poster:this.props.posterImg,preload:"auto",src:this.props.url,className:"video-js vjs-default-skin vjs-big-play-centered diyvideo"})))}}])&&S(a.prototype,n),r&&S(a,r),t}();function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,a){return t&&k(e.prototype,t),a&&k(e,a),e}function D(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=e.state,a=e.handlers,n=t.MediaInfo,r=t.actionIdSuffix;return n?o.a.createElement("div",{id:"product_picture"},o.a.createElement("div",{id:"".concat(r,"-picture-more"),className:"tour_m_banner"},o.a.createElement(R,{state:t,handlers:a}))):null}N.defaultProps={isIos:!1};var R=function(e){function t(e){var a;return C(this,t),(a=D(this,x(t).call(this,e))).state={isMounted:!1},a}return A(t,o.a.Component),w(t,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.state,a=e.handlers,n=t.MediaInfo,r=t.isShowVideoPlayerContent,i=n.VideoInfoList,c=i&&i.length&&i[0],s=c.ImageUrl,l=c.PlayUrl;return o.a.createElement("div",null,r?o.a.createElement(N,{posterImg:s,url:l}):o.a.createElement("div",null,o.a.createElement(B,{state:t,handlers:a}),o.a.createElement(j,{state:t}),o.a.createElement("div",{className:"tour_m_gopic_box"},o.a.createElement(H,{state:t}))))}}]),t}(),B=function(e){function t(e){var a,n,r,o;return C(this,t),a=D(this,x(t).call(this,e)),n=O(a),o=function(e){a.setState({currentIndex:e})},(r="updateIndex")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,a.state={isMounted:!1,currentIndex:0},a}return A(t,o.a.Component),w(t,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0})}},{key:"componentWillUnmount",value:function(){this.setState({isMounted:!1})}},{key:"render",value:function(){var e=this.props.state,t=e.MediaInfo,a=e.pageStatus,n=e.isShowPlayVideoButtonMode,r=e.isShowNetworkStatusContent,i=this.props.handlers,c=i.handleClickVideoPlayer,s=i.handleGoPicList,l=i.handleClickNetWorkStatusButton,u=t.ImgList.map(function(e){return e.UrlList[0].Value}),d=n&&this.state.isMounted&&0===this.state.currentIndex,m="https://pic.c-ctrip.com/vacation_v2/h5/group_travel/pic_none.png";if(!u||!u.length)return o.a.createElement("div",{className:"cm-slide-view"},o.a.createElement("ul",{className:"cm-slide-list"},o.a.createElement("li",{className:"cm-slide-item"},o.a.createElement("img",{src:a.isElong?"":m,"data-sk-eid":"hy_ctr_slideslip","data-sk-edata":'"index": 0'}))));if(this.state.isMounted&&1!==u.length)return o.a.createElement("div",null,o.a.createElement(g.a,{auto:5e3,containerClass:"cm-slide-view",boxClass:"cm-slide-list",disableScroll:!0,callback:this.updateIndex,onClick:s},u.map(function(e,t){return o.a.createElement("img",{src:e,key:t,className:"cm-slide-item","data-sk-eid":"hy_ctr_slideslip","data-sk-edata":'"index":'.concat(t),onError:function(e){e.target.onerror=null,e.target.src="https://pic.c-ctrip.com/VacationH5Pic/group_travel/index/detail500.png"}})})),t.ImgList&&t.ImgList.length>1&&o.a.createElement("span",{className:"tour_m_gopic"},this.state.currentIndex+1,"/",o.a.createElement("i",null,t.ImgList.length)),o.a.createElement(U,{isshow:d,onClick:function(){c(!0)}}),o.a.createElement(G,{isshow:r,onCancel:function(){l(!1)},onConfirm:function(){l(!0)}}));return o.a.createElement("div",{className:"cm-slide-view"},o.a.createElement("ul",{className:"cm-slide-list"},o.a.createElement("li",{className:"cm-slide-item"},o.a.createElement("img",{src:u[0],"data-sk-eid":"hy_ctr_slideslip","data-sk-edata":'"index": 0',onError:function(e){e.target.onerror=null,e.target.src=m}}),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<script type=\"text/javascript\">\n                                        var pic_wrap = document.querySelector('.cm-slide-view')\n                                        if (pic_wrap) {\n                                            pic_wrap.style.height = Math.ceil(document.body.clientWidth / 500 * 280) + 'px'\n                                        }\n                                    <\/script>"}}))))}}]),t}();function G(e){var t=e.isshow,a=e.onCancel,n=e.onConfirm;return t?o.a.createElement("div",null,o.a.createElement("div",{className:"weixin_video_bg_content"},o.a.createElement("p",{className:"weixin_video_bg_tip"},"\u5982\u60a8\u672a\u4f7f\u7528Wifi\u7f51\u7edc"),o.a.createElement("p",{className:"weixin_video_bg_text"},"\u89c2\u770b\u4f1a\u6d88\u8017\u60a8\u7684\u6d41\u91cf\uff0c\u662f\u5426\u7ee7\u7eed\u89c2\u770b"),o.a.createElement("p",{className:"weixin_video_btn_box"},o.a.createElement("span",{onClick:a},"\u53d6\u6d88"),o.a.createElement("span",{className:"cur",onClick:n},"\u7ee7\u7eed\u64ad\u653e"))),o.a.createElement("div",{className:"weixin_video_bg"})):null}function U(e){var t=e.isshow,a=e.onClick;return t?o.a.createElement("i",{className:"weixin_video_icon",onClick:a}):null}function H(e){var t=e.state,a=t.BasicInfo,n=t.pageStatus,r=t.VendorInfo;if(!a)return null;var i=!n.isBestoneShare&&!!r;return o.a.createElement("div",{className:"tour_m_proinfo"},o.a.createElement("p",{className:"tour_m_pronum"},"\u7f16\u53f7\uff1a",a.ProductId),o.a.createElement("p",null,!!a.DepartureCityName&&"".concat(a.DepartureCityName,"\u51fa\u53d1"),i&&" \xb7 ",i&&r.VendorBrand))}function j(e){var t=e.state.EmotionalCues;if(!t)return null;var a=t.filter(function(e){return"productselling"===e.PromptType})[0],n=a&&a.Content;return n?o.a.createElement("p",{className:"tour_hot_text"},n):null}function F(e){var t=e.state,a=e.handlers,n=t.BasicInfo,r=t.PriceInfo,i=t.pageStatus,c=t.query,s=t.CommentInfo,l=void 0===s?{}:s,u=t.CompositePromotionInfo,d=t.TagGroupInfo,m=t.actionIdSuffix,p=a.handleShowPriceTipMask,f=a.handleGoComment,h=a.handleGoTagUrl;if(!r)return null;var _=r.MinPrice;if(i.isBeston)if(i.isCommonMinPriceMode)_=r.MinPrice;else if(i.isBestoneShare){var v=Math.ceil(Number(c.displayprice));_=v||r.AdviseMinPrice}else _=i.isTradeMinPriceMode?r.TradeMinPrice:r.AdviseMinPrice;var g=null;!(i.isBestoneShare||!i.isBeston||!i.isTradeMinPriceMode||!r)&&(g=r.AdviseMinPrice>0?o.a.createElement("div",{className:"tour_discounts"},"\u5efa\u8bae\u5356\u4ef7:",o.a.createElement("dfn",null,"\xa5"),r.AdviseMinPrice):o.a.createElement("div",{className:"tour_discounts"},"\u5efa\u8bae\u5356\u4ef7:\u5b9e\u65f6\u8ba1\u4ef7"));var y=d.MarketingTagList.filter(function(e){return e.ImageUrl&&e.AlbumUrl}).sort(function(e,t){return t.TagId-e.TagId})[0];(i.isBeston||i.isBstMiniProgram)&&(y=null);var E=u&&u.alreadyPromotionAmountForMinPrice<0,S=[];1&n.PaymentType&&S.push("\u73b0\u91d1"),16&n.PaymentType&&S.push("\u793c\u54c1\u5361");var I=l.commentAggregation;return o.a.createElement("div",{className:y?"tour_m_profile tour_bg_huis":"tour_m_profile"},y&&o.a.createElement("img",{className:"tour_bg_huis_bg",src:y.ImageUrl,onClick:function(){h(y.AlbumUrl)}}),o.a.createElement("div",{className:"tour_m_bigprice"},_>0&&o.a.createElement("span",{className:"tour_m_price"},o.a.createElement("dfn",null,"\xa5"),_,o.a.createElement("em",null,"/\u4eba\u8d77"),!!r.MinPriceRemark&&o.a.createElement("i",{id:"".concat(m,"-info-policy"),onClick:p})),_<=0&&o.a.createElement("span",{className:"tour_m_price"},"\u5b9e\u65f6\u8ba1\u4ef7"),I&&I.scoreAvg>0&&o.a.createElement("span",{className:"tour_m_price_save",onClick:f},I.scoreAvg,"\u5206"),n.OrderPersonCount>0&&o.a.createElement("span",{className:"tour_m_price_old"},n.OrderPersonCount,"\u4eba\u51fa\u6e38"),o.a.createElement("p",{className:"tour_discounts bst_hide"},E&&"\u5df2\u4f18\u60e0\uffe5".concat(-u.alreadyPromotionAmountForMinPrice)),g))}function q(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.BasicInfo,i=t.TagGroupInfo,c=t.BasicExtendInfo,s=t.actionIdSuffix,l=a.handleGoTagUrl,u=a.handleGoStarInfo;if(!r)return null;var d=n.isStudy||r.IsThemeProduct;return o.a.createElement("div",{className:"tour_m_bigtitle"},o.a.createElement("div",{className:"tour_m_bigbox"},o.a.createElement("h2",null,d?r.Title:r.MainName,!n.isStudy&&1!==r.Level&&o.a.createElement("i",{id:"".concat(s,"-info-star"),className:"tour_m_diamond tour_m_diamond_".concat(r.Level),onClick:u}),o.a.createElement(V,{TagGroupInfo:i}))),!!(n.isStudy&&c&&c.AdapteAgeText)&&o.a.createElement("p",{className:"tour_m_text"},c.AdapteAgeText),!d&&o.a.createElement("p",{className:"tour_m_text"},r.SubName),o.a.createElement(W,{TagGroupInfo:i,pageStatus:n,handleGoTagUrl:l}))}function V(e){var t=e.TagGroupInfo;if(!t)return null;var a=t.StudyCharacterTagList||[];if(!a.length)return null;var n=a.filter(function(e){return 1248===e.TagId}).length>0,r=a.filter(function(e){return 1249===e.TagId}).length>0;return o.a.createElement("span",null,n&&o.a.createElement("i",{className:"tour_m_icon_g"}),r&&o.a.createElement("i",{className:"tour_m_icon_s"}))}function W(e){var t=e.TagGroupInfo,a=(e.pageStatus,e.handleGoTagUrl);if(!t)return null;var n=t.MarketingTagList||[],r=t.SpecialTagList||[],i=t.MoreTagList,c=t.NewPromotionTagList||[];return i=[],n.length||r.length||i.length||c.length?o.a.createElement("div",{className:"tour_m_tag"},n.concat(i).map(function(e,t){var n="\u7279\u5356\u6c47"===e.TagName?"tour_m_tag_2 tour_hide_arrow":"tour_m_tag_2";return o.a.createElement("i",{key:t,className:n,onClick:function(){a(e.AlbumUrl)}},e.TagName)}),c.concat(r).map(function(e,t){var a=e.TagName;return o.a.createElement("i",{key:t},a)})):null}function K(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function J(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.CompositePromotionInfo,i=t.actionIdSuffix;return o.a.createElement("div",{className:"tour_m_quanplus"},o.a.createElement(Y,{state:t,handlers:a}),!(n.isVSalesMode&&!n.isOp)&&o.a.createElement(z,{CompositePromotionInfo:r,actionIdSuffix:i,handlers:a}),o.a.createElement(ee,{state:t,handlers:a}),o.a.createElement(Z,{state:t,handlers:a}),o.a.createElement($,{state:t,handlers:a}))}function Y(e){var t=e.state,a=e.handlers,n=t.couponItemList,r=t.actionIdSuffix,i=a.handleShowCouponMask;if(!n||!n.length||!n[0].BestDeduction)return null;var c=n.some(function(e){return!e.IsTaken});return o.a.createElement("div",{className:"tour_m_qplus tour_right_icon",id:"".concat(r,"-info-coupon"),onClick:i},o.a.createElement("p",{className:"tour_m_qplus_hidden"},o.a.createElement("span",{className:"tour_m_qplus_tit"},c?"\u9886\u5238":"\u5df2\u9886\u5238"),n.map(function(e,t){return o.a.createElement(Q,{key:t,data:e,index:t})}).slice(0,3)))}function Q(e){var t=e.data,a=2===e.index?"tour_m_qplus_item tour_m_qplus_none":"tour_m_qplus_item";switch(t.DeductionTypeId){case 1:return o.a.createElement("span",{className:a},o.a.createElement("b",null,"\u7acb\u51cf",t.DeductionList[0].DeductionAmount));case 2:var n=(100-t.DeductionList[0].DeductionAmount)/10;return o.a.createElement("span",{className:a},o.a.createElement("b",null,"\u7acb\u6253",n,"\u6298"));case 3:var r=t.DeductionList.sort(function(e,t){return t.DeductionAmount-e.DeductionAmount})[0];return o.a.createElement("span",{className:a},o.a.createElement("b",null,t.DeductionList.length>1&&o.a.createElement("i",null,"\u6700\u9ad8"),"\u6ee1",r.StartAmount,"\u51cf",r.DeductionAmount))}}function z(e){var t=e.CompositePromotionInfo,a=e.actionIdSuffix,n=e.handlers.handleShowPromotionMask;if(!t)return null;var r=t.alreadyPromotionList,i=t.canPromotionList,c=t.limitGiftOptionList,s=[].concat(K(r),K(i),K(c));if(!s.length)return null;var l=r.length?"\u5df2\u4eab":i.length?"\u53ef\u4eab":"\u9650\u65f6\u8d60\u9001",u=s[0].name;return o.a.createElement("div",{id:"".concat(a,"-info-discount"),className:"tour_m_qplus tour_right_icon",onClick:n},o.a.createElement("span",{className:"tour_m_qplus_tit"},"\u4f18\u60e0"),o.a.createElement("p",{className:"tour_m_text"},o.a.createElement("span",{className:"tour_m_dropicon_1"},l),u))}function $(e){var t=e.state,a=e.handlers;return o.a.createElement(X,{state:t,handlers:a})}function X(e){var t=e.state,a=e.handlers,n=t.TagGroupInfo,r=t.actionIdSuffix,i=a.handleShowTagListMask,c=a.handleShowPreferredMask;return n&&n.MoreTagList&&0!==n.MoreTagList.length?n.SpecialTagList.some(function(e){return"\u4f18\u9009"===e.TagName})?o.a.createElement("div",{id:"".concat(r,"-info-select"),className:"tour_optimization_box",onClick:c},o.a.createElement("span",{className:"tour_optimization_icon"}),o.a.createElement("p",{className:"tour_optimization_text"},"\u4e25\u9009\u66f4\u9ad8\u54c1\u8d28\u3001\u66f4\u4f18\u670d\u52a1\u7684\u4ea7\u54c1")):o.a.createElement("div",{className:"tour_m_sixslogo",id:"".concat(r,"-info-guarantee"),onClick:i},o.a.createElement("span",{className:"tour_m_qplus_tit"},"\u670d\u52a1"),o.a.createElement("div",{className:"tour_m_sixscon"},n.MoreTagList.map(function(e,t){var a=e.TagName;return o.a.createElement("em",{key:t},a)}))):null}function Z(e){var t=e.state,a=e.handlers,n=t.CreditInfo,r=t.BookInfo,i=void 0===r?{}:r,c=t.ScheduleInfo,s=void 0===c?{}:c,l=t.BasicInfo,u=a.handleShowCreditInfoMask;if(!n)return null;if(!i.IsBook||!s.HasInventory)return null;var d=n.IsCreditSuccess;return(n.IsTargetAudience||d)&&512&l.PaymentType?o.a.createElement("div",{className:"tour_m_qplus tour_right_icon bst_hide",onClick:u},o.a.createElement("span",{className:"tour_m_qplus_tit"},"\u62ff\u53bb\u82b1"),o.a.createElement("p",{className:"tour_m_text"},o.a.createElement("span",{className:"tour_m_dropicon_3"},"0\u9996\u4ed8\u51fa\u884c"),"\u672c\u4ea7\u54c1\u652f\u6301\u4f7f\u7528\u62ff\u53bb\u82b1\u652f\u4ed8")):null}function ee(e){var t=e.state,a=e.handlers,n=t.userStatus,r=t.PriceInfo,i=t.pageStatus,c=t.actionIdSuffix,s=t.BonusInfo,l=a.handleGoBonusPage;if(i.isDiyfhxsdp||!r||!s)return null;var u=r.MinPrice;if(n.IsLogin&&!n.IsAnonymousLogin){var d=n.ExtendInfo.VipGrade;d/=10;var m=Math.ceil(u*[1,1.5,1.8,2][d]*s.ratio);return o.a.createElement("div",{className:"tour_m_qplus tour_right_icon bst_hide",id:"".concat(c,"-info-points"),onClick:l},o.a.createElement("span",{className:"tour_m_qplus_tit"},"\u79ef\u5206"),o.a.createElement("p",{className:"tour_m_text"},o.a.createElement("i",{className:["h5_common","h5_gold","h5_platina","h5_diamond"][d]}),u?"\u6700\u5c11\u53ef\u5f97".concat(m,"\u79ef\u5206"):"\u8d2d\u4e70\u4ea7\u54c1\u8d60\u9001\u79ef\u5206"))}var p=Math.ceil(u*s.ratio);return o.a.createElement("div",{className:"tour_m_qplus tour_right_icon bst_hide",id:"".concat(c,"-info-points"),onClick:l},o.a.createElement("span",{className:"tour_m_qplus_tit"},"\u79ef\u5206"),o.a.createElement("p",{className:"tour_m_text"},u?"\u8d2d\u4e70\u4ea7\u54c1\uff0c\u6700\u5c11\u53ef\u5f97".concat(p,"\u79ef\u5206"):"\u8d2d\u4e70\u4ea7\u54c1\u8d60\u9001\u79ef\u5206"))}function te(e){var t=e.state,a=e.handlers,n=t.BasicInfo,r=a.handleGoTravelButler;return n&&n.IsTravelAssistantEntry?o.a.createElement("div",{className:"m_detail_steward",onClick:r},o.a.createElement("img",{src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/detail/m_steward.png?20170815.png"})):null}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ne(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.MultiLineInfo,i=t.actionIdSuffix,c=a.handleGoRecommendProduct,s=a.handleGoHotKey;if(n.isBeston)return null;if(!n.isShowRecommend||!r)return null;var l=r.MultiLineInfoList,u=r.HotKeyInfoList;return l=l||[],(u=u||[]).length||l.length?o.a.createElement("div",{className:"m_like"},o.a.createElement("h3",{className:"m_like_hd"},"\u4f60\u53ef\u80fd\u559c\u6b22"),o.a.createElement("ul",{className:"m_like_list"},l.map(function(e,t){return o.a.createElement(re,ae({key:t},e,{actionIdSuffix:i,handleGoRecommendProduct:c}))})),u.length>0&&o.a.createElement("div",{className:"m_like_key"},"\u70ed\u95e8\u5173\u952e\u5b57\uff1a",u.map(function(e,t){return o.a.createElement("i",{key:t,onClick:function(){s(e.Value)}},e.Value)}))):null}function re(e){var t={productId:e.ProductId,saleCityId:e.SaleCityId,departCityId:e.DepartCityId},a=e.handleGoRecommendProduct,n=e.actionIdSuffix;return o.a.createElement("li",{id:"".concat(n,"-guess-more-").concat(e.ProductId),onClick:function(){a(t)}},o.a.createElement("h4",null,e.Name),e.MinPrice<=0&&o.a.createElement("span",{className:"price_mod"},o.a.createElement("em",{className:"more_price"},"\u5b9e\u65f6\u8ba1\u4ef7")),e.MinPrice>0&&o.a.createElement("span",{className:"price_mod"},o.a.createElement("strong",{className:"more_price"},o.a.createElement("dfn",null,"\xa5"),e.MinPrice),"\u8d77"),!!(e.PromotionTag||e.TagGroupList&&e.TagGroupList.length)&&o.a.createElement("div",{className:"m_tag"},!!e.PromotionTag&&o.a.createElement("i",{className:"m_tag_2"},"\u60e0"),e.TagGroupList&&e.TagGroupList.length>0&&e.TagGroupList.map(function(e,t){var a=e.TagName;return o.a.createElement("i",{key:t},a)})))}function oe(e){var t=e.state,a=e.handlers.handleOpenWebview;return o.a.createElement("div",null,o.a.createElement(ie,{state:t,handleOpenWebview:a}))}function ie(e){var t=e.state,a=e.handleOpenWebview;if(t.pageStatus.isStudy){var n="https://m.ctrip.com/webapp/tours/marketing/index?pageid=1074";return o.a.createElement("a",{href:n,onClick:function(e){a(e,n)}},o.a.createElement("div",{className:"m_standard"},o.a.createElement("img",{src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/detail/bg_youxue.jpg"}),o.a.createElement("i",{className:"m_istandard"},"\u67e5\u770b\u8be6\u60c5")))}return null}function ce(e){var t=e.state,a=e.handlers,n=t.NearbyStoreInfo,r=t.actionIdSuffix,i=a.handleGoStoreInfo;if(!n)return null;var c=n.storeAmount;if(!c)return null;var s=n.minDistance,l="number"===typeof s?"\u9644\u8fd1":"\u5f53\u524d\u57ce\u5e02";return o.a.createElement("div",{className:"tour_m_store bst_hide",id:"".concat(r,"-shop-more"),onClick:i},o.a.createElement("div",{className:"tour_m_storename"},o.a.createElement(se,{Distance:s}),l,"\u6709",c,"\u5bb6\u643a\u7a0b\u95e8\u5e97"))}function se(e){var t=e.Distance;if("number"!==typeof t)return o.a.createElement("s",null,"\u643a\u7a0b\u5728\u60a8\u8eab\u8fb9");var a=t.toFixed(1);return o.a.createElement("s",null,"\u6700\u8fd1\u79bb\u60a8",a,"km")}function le(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.BasicInfo,i=t.PeopleAskInfo,c=t.actionIdSuffix,s=a.handleGoPeopleAsk;return n.isBeston?null:r&&/^(1|3|4)$/.test(r.ProductPatternId)&&i?o.a.createElement("div",{className:"tour_m_faq",onClick:s},o.a.createElement("div",{className:"tour_m_mod_hd"},o.a.createElement("i",{className:"tour_grade_icon02"}),"\u5927\u5bb6\u90fd\u5728\u95ee",i.TotalCount?o.a.createElement("span",{id:"".concat(c,"-question-more"),className:"tour_grade_all"},"\u67e5\u770b\u5168\u90e8(",i.TotalCount,")"):o.a.createElement("span",{id:"".concat(c,"-question-more"),className:"tour_grade_all"},"\u67e5\u770b\u5168\u90e8")),o.a.createElement("div",{className:"tour_m_mod_bd"},o.a.createElement(ue,{peopleAskInfo:i}))):null}function ue(e){var t=e.peopleAskInfo;return t.TotalCount?o.a.createElement("div",null,t.HotelAskStatusList.slice(0,1).map(function(e,t){return o.a.createElement("dl",{key:t,className:"tour_m_faq_dl"},o.a.createElement("dt",null,e.AskTitle),o.a.createElement("dd",null,e.ReplyCount,"\u4e2a\u56de\u7b54"))})):o.a.createElement("div",{className:"tour_m_faq_tip"},"\u6682\u65f6\u8fd8\u6ca1\u6709\u4eba\u63d0\u95ee\u54e6\uff0c\u5148\u770b\u770b\u5e38\u89c1\u95ee\u9898\u5427~")}var de=a(7);function me(e){var t=e.state,a=e.handlers;return o.a.createElement("div",{id:"product_comment",className:"tour_m_comment bst_hide"},o.a.createElement(pe,{state:t,handlers:a}),o.a.createElement(le,{state:t,handlers:a}))}function pe(e){var t=e.state,a=e.handlers,n=t.CommentInfo,r=t.actionIdSuffix,i=t.BasicInfo,c=a.handleGoComment;if(!n)return null;var s=n.commentAggregation,l=n.comments;return s&&l.length?o.a.createElement("div",{onClick:c},o.a.createElement(fe,{actionIdSuffix:r,BasicInfo:i,commentAggregation:s,handleGoComment:c}),o.a.createElement(he,{actionIdSuffix:r,BasicInfo:i,comment:l[0]})):o.a.createElement("div",{className:"tour_m_comment_box"},o.a.createElement("div",{className:"tour_grade_box tour_no_grade_box"},o.a.createElement("i",{className:"tour_grade_icon01"}),"\u8bc4\u5206"),o.a.createElement("p",{className:"tour_m_comment_nothing"},"\u5f53\u524d\u4ea7\u54c1\u6682\u65e0\u70b9\u8bc4\u4fe1\u606f"))}function fe(e){var t=e.actionIdSuffix,a=e.BasicInfo,n=e.commentAggregation,r=e.handleGoComment,i=n.scoreAvg,c=n.goodRatePercent,s=n.totalCount,l=n.aiTags,u=void 0===l?[]:l;return o.a.createElement("div",null,o.a.createElement("div",{className:"tour_grade_box",id:"".concat(t,"-comment-more")},o.a.createElement("i",{className:"tour_grade_icon01"}),"\u8bc4\u5206",i,"/5",o.a.createElement("em",null,"\u597d\u8bc4\u7387 ",c,"%"),o.a.createElement("span",{className:"tour_grade_all"},"\u67e5\u770b\u5168\u90e8(",s,")")),u.length>0&&o.a.createElement("div",{className:"tour_remark_span_box"},u.map(function(e,n){return o.a.createElement("span",{id:"".concat(t,"-comment-kwd-").concat(a.ProductId,"-").concat(e.tagName),key:n,className:1===e.mood&&"tour_blue_light",onClick:function(){return r(e.tagCategory,e.tagName)}},e.displayName,"(",e.totalCount,")")})))}function he(e){var t=e.actionIdSuffix,a=e.BasicInfo,n=e.comment,r=n.userInfo,i=void 0===r?{}:r,c=n.tourTypeInfo,s=void 0===c?{}:c,l=n.content,u=n.attachments,d=void 0===u?[]:u,m=n.commentTime,p=new de.a(m).format("YYYY-MM-DD");return o.a.createElement("div",{id:"".concat(t,"-info-comment")},o.a.createElement("div",{className:"tour_m_comrank"},o.a.createElement("h4",null,o.a.createElement("img",{src:i.avatarUrl,className:"tour_m_photo"}),i.displayName,o.a.createElement("span",{className:"tour_m_type"},s.tourTypeName),o.a.createElement("span",{className:"tour_m_time"},p)),o.a.createElement("div",{className:"tour_m_comcon"},l)),d.length>=3&&o.a.createElement("div",{className:"tour_popular_box",id:"".concat(t,"-comment-picture-").concat(a.ProductId)},o.a.createElement("div",{className:"tour_popular_box_cont"},o.a.createElement("div",{className:"tour_popular_box_list"},o.a.createElement("ul",null,d.map(function(e){return o.a.createElement("li",{key:e.attachmentId},o.a.createElement("p",{className:"tour_popular_img"},o.a.createElement("img",{src:e.thumbUrl})))}))))))}function _e(e){var t=e.state,a=e.handlers,n=t.currentRouteInfo,r=t.actionIdSuffix,i=a.handleShowProductSummaryMask;if(!n)return null;var c=n.TravelOverviewInfo,s=n.FlightInfo;return c?o.a.createElement("div",{id:"".concat(r,"-start-schedule"),className:"tour_depart_content_box",onClick:i},o.a.createElement("div",{className:"tour_route_box"},o.a.createElement("ul",null,o.a.createElement(ge,{HotelRemark:c.HotelRemark}),o.a.createElement(ve,{ScenicTimes:c.ScenicTimes,ClassicScenicTimes:c.ClassicScenicTimes,ClassicScenicTagList:c.ClassicScenicTagList}),o.a.createElement(ye,{NoCareDinnerTimes:c.NoCareDinnerTimes,CareDinnerTimes:c.CareDinnerTimes,RestaurantTagList:c.RestaurantTagList}),o.a.createElement(Ee,{FlightTimeLen:c.FlightTimeLen,IsDirectFlight:c.IsDirectFlight,FlightInfo:s}),o.a.createElement(Se,{DriveTimeLen:c.DriveTimeLen}),o.a.createElement(Ie,{ActivityTimes:c.ActivityTimes,ActivityTimeSpan:c.ActivityTimeSpan}),o.a.createElement(be,{ShopTimes:c.ShopTimes,ShopTimeLen:c.ShopTimeLen})))):null}function ve(e){var t=e.ScenicTimes,a=e.ClassicScenicTimes;e.ClassicScenicTagList;return t||a?o.a.createElement("li",null,o.a.createElement("span",{className:"tour_route_gray"},"\u666f\u70b9"),!!t&&"\u603b\u5171".concat(t,"\u4e2a\u666f\u70b9"),!!a&&" \xb7 ".concat(a,"\u4e2a\u7ecf\u5178")):null}function ge(e){var t=e.HotelRemark;return t?o.a.createElement("li",null,o.a.createElement("span",{className:"tour_route_gray"},"\u4f4f\u5bbf"),t):null}function ye(e){var t=e.NoCareDinnerTimes,a=e.CareDinnerTimes;return t||a?o.a.createElement("li",null,o.a.createElement("span",{className:"tour_route_gray"},"\u7528\u9910"),!!a&&o.a.createElement("em",null,a,"\u6b21\u5305\u542b"),!!t&&!!a&&o.a.createElement("em",null," \xb7 "),!!t&&o.a.createElement("em",null,t,"\u6b21\u81ea\u7406")):null}function Ee(e){var t=e.FlightTimeLen,a=e.IsDirectFlight,n=e.FlightInfo;return t?o.a.createElement("li",null,o.a.createElement("span",{className:"tour_route_gray"},"\u822a\u73ed"),a?"\u76f4\u98de":"\u4e2d\u8f6c"," \xb7 ",t,"\u5c0f\u65f6"):n&&n.Count?o.a.createElement("li",null,o.a.createElement("span",{className:"tour_route_gray"},"\u822a\u73ed"),"\u53ef\u81ea\u9009\u822a\u73ed"):null}function Se(e){var t=e.DriveTimeLen;return t?o.a.createElement("li",null,o.a.createElement("span",{className:"tour_route_gray"},"\u7528\u8f66"),t,"\u5c0f\u65f6"):null}function Ie(e){var t=e.ActivityTimes,a=e.ActivityTimeSpan;return t||a?o.a.createElement("li",null,o.a.createElement("span",{className:"tour_route_gray"},"\u81ea\u7531\u6d3b\u52a8"),t>0&&"".concat(t,"\u6b21"),t>0&&a>0&&" \xb7 ",a>0&&"\u7ea6".concat(a,"\u5c0f\u65f6")):null}function be(e){var t=e.ShopTimes,a=e.ShopTimeLen;return t||a?o.a.createElement("li",null,o.a.createElement("span",{className:"tour_route_gray"},"\u8d2d\u7269"),t>0&&"".concat(t,"\u4e2a"),t>0&&t>0&&" \xb7 ",a>0&&"\u7ea6".concat(a,"\u5c0f\u65f6")):null}function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ne(e){var t=e.state,a=e.handlers,n=t.multipleDepartureCityInfo,r=t.ScheduleInfo,i=t.pageStatus,c=t.routeInfo,s=t.TourGroupInfo,l=t.TravelList,u=t.MultilineTrainTags,d=t.PriceGroupInfoList,m=t.actionIdSuffix,p=t.isShowMultiLineLoading,f=t.currentRouteInfo,h=a.handleShowCityMask,_=a.handleMultiLineChange,v=a.handleMultiTravelChange,g=a.handleGoBooking,y=a.handleHideScheduleTips,E=a.handleChangeDepartCity;if(!n||!r)return null;var S=n.shouldShowHK,I=n.shouldTips,b=n.maxLen,T=n.DepartureCityList,N=n.currentCityName,P=n.previousCityName,C=T&&T.length>=2,k=T.filter(function(e){return e.DepartureCityName===N})[0],w=k&&k.DepartureCityId,D=!(!i.isMultiLine&&!i.isMultiTravel);return(!c||Object.keys(c).length<2)&&(D=!1),o.a.createElement("div",{className:"tour_depart_box"},o.a.createElement(Pe,{shouldShowHK:S,shouldTips:I,currentCityId:w,currentCityName:N,previousCityName:P,hasMore:C,handleHideScheduleTips:y,handleChangeDepartCity:E,handleShowCityMask:h}),D&&o.a.createElement(De,{isMultiLine:i.isMultiLine,isMultiTravel:i.isMultiTravel,TourGroupInfo:s,pageStatus:i,TravelList:l,MultilineTrainTags:u,PriceGroupInfoList:d,handleMultiLineChange:_,handleMultiTravelChange:v}),p&&o.a.createElement("div",{className:"tour_m_loading"},o.a.createElement("span",{className:"tour_text_loading"},o.a.createElement("i",{className:"icon_m_loadder2"}),"\u6b63\u5728\u52a0\u8f7d\u4e2d...")),!p&&o.a.createElement(_e,{state:t,handlers:a}),!p&&!!r&&o.a.createElement(Ce,Te({},r,{maxLen:b,pageStatus:i,actionIdSuffix:m,handleGoBooking:g})),o.a.createElement(Ae,{currentRouteInfo:f}))}function Pe(e){var t=e.shouldShowHK,a=e.currentCityId,n=e.currentCityName,r=e.hasMore,i=e.handleChangeDepartCity,c=e.handleShowCityMask;return o.a.createElement("div",{className:"tour_depart_title"},r&&o.a.createElement("i",{className:"tour_right_arrows"}),o.a.createElement("i",{className:"tour_grade_icon03"}),o.a.createElement("span",{className:"tour_text",onClick:function(){return i(a)}},n,"\u51fa\u53d1"),t&&o.a.createElement("em",{className:"tour_switchover",onClick:function(){return i(58)}},"\u9999\u6e2f\u51fa\u53d1\u66f4\u4f18\u60e0 | \u5207\u6362"),r&&o.a.createElement("span",{className:"tour_grade_all","data-sk-eid":"hy_ctr_dep_more",onClick:c},"\u5207\u6362\u57ce\u5e02"))}function Ce(e){var t=e.FestivalDateList,a=e.ScheduleDateList,n=e.maxLen,r=e.pageStatus,i=e.actionIdSuffix,c=e.handleGoBooking;if(t=t||[],0===(a=a||[]).length&&0===t.length)return null;a=a.filter(function(e){return!e.Festival});var s=t.concat(a);return o.a.createElement("div",{className:"tour_city_bd"},o.a.createElement("div",{className:"tour_city_list_box"},o.a.createElement("div",{className:"tour_city_list"},o.a.createElement(f.a,{options:{scrollX:!0,bounce:!1,eventPassthrough:"vertical"},customStyle:{width:"".concat(75*Math.min(10,s.length),"px")}},s.map(function(e,t){return t>=n?null:o.a.createElement(ke,{key:t,item:e,pageStatus:r,actionIdSuffix:i,handleGoBooking:c})})))),s.length>4&&o.a.createElement("a",{id:"".concat(i,"-start-more"),className:"tour_more","data-sk-eid":"hy_ctr_date_all",onClick:function(){c()}},"\u66f4\u591a\u73ed\u671f"))}function ke(e){var t=e.item,a=e.pageStatus,n=e.actionIdSuffix,r=e.handleGoBooking;return!!t.Festival?o.a.createElement("a",{href:"javascript:;","data-sk-eid":"hy_ctr_date_anydate",onClick:function(){r(t.FestivalDate)}},o.a.createElement("span",{className:"date"},t.Festival.length>3?"".concat(t.Festival.slice(0,3),"..."):t.Festival),o.a.createElement(we,{data:t,pageStatus:a})):o.a.createElement("a",{id:"".concat(n,"-start-date-").concat(t.PriceDate.replace(/-/g,"")),"data-sk-eid":"hy_ctr_date_anydate",onClick:function(){r(t.PriceDate)}},o.a.createElement("span",{className:"date"},"".concat(t.PriceDate.slice(5,7),"/").concat(t.PriceDate.slice(8,10))),o.a.createElement(we,{data:t,pageStatus:a}))}function we(e){var t=e.data,a=e.pageStatus;if(a.isBestoneShare)return null;var n=t.MinPrice;return a.isBeston&&(n=a.isTradeMinPriceMode?t.TradeMinPrice:t.AdviseMinPrice),n?o.a.createElement("span",{className:"price"},o.a.createElement("dfn",null,"\xa5"),n):o.a.createElement("span",{className:"price"},"\u5b9e\u65f6\u8ba1\u4ef7")}function De(e){var t=e.isMultiLine,a=e.isMultiTravel,n=e.TourGroupInfo,r=e.pageStatus,i=e.TravelList,c=e.MultilineTrainTags,s=e.PriceGroupInfoList,l=e.handleMultiLineChange,u=e.handleMultiTravelChange;if(t){if(!n||!n.TourGroupProductInfo)return null;var d=n.TourGroupProductInfo.sort(function(e,t){return e.SortNumber-t.SortNumber});return o.a.createElement("div",{className:"tour_m_depart_wrap"},o.a.createElement("div",{className:"tour_m_depart"},o.a.createElement("div",{className:"tour_m_depart_list"},o.a.createElement(f.a,{options:{scrollX:!0,bounce:!1,eventPassthrough:"vertical"},customClass:"tour_m_depart_flex",customStyle:{width:"".concat(100*d.length+35,"px")}},d.slice().reverse().map(function(e,t){return o.a.createElement(Oe,{key:t,item:e,activeProductId:r.activeProductId,MultilineTrainTags:c,PriceGroupInfoList:s,handleMultiLineChange:l})})))))}return a&&Array.isArray(i)&&0!==i.length?o.a.createElement("div",{className:"tour_m_depart_wrap"},o.a.createElement("div",{className:"tour_m_depart"},o.a.createElement("div",{className:"tour_m_depart_list"},o.a.createElement(f.a,{options:{scrollX:!0,bounce:!1,eventPassthrough:"vertical"},customStyle:{width:"".concat(100*i.length+35,"px")},customClass:"tour_m_depart_flex"},i.slice().reverse().map(function(e,t){return o.a.createElement(xe,{key:t,item:e,activeAlias:r.activeAlias,handleMultiTravelChange:u})}))))):null}function Oe(e){var t=e.item,a=e.activeProductId,n=e.MultilineTrainTags,r=void 0===n?[]:n,i=e.PriceGroupInfoList,c=void 0===i?[]:i,s=e.handleMultiLineChange,l=t.ProductId===a,d=["A","B","C","D","E","F","G","H","I","J"][t.SortNumber-1],m=r.indexOf(t.ProductId)>-1,p=c.filter(function(e){return e.ProductId===t.ProductId})[0],f=p?p.MinPrice:null,h=u()({tour_depart_item:!0,tour_depart_cur:l,tour_depart_gray:!p});return o.a.createElement("div",{className:h,"data-sk-eid":"hy_ctr_route","data-sk-edata":JSON.stringify({type:d}),"data-pid":t.ProductId,onClick:function(){s(t.ProductId)}},o.a.createElement("span",null,m&&o.a.createElement("i",{className:"tour_depart_hsr_icon"}),d,"\u7ebf"),p?f>0?o.a.createElement("p",{className:"tour_depart_price bst_hide"},o.a.createElement("dfn",null,"\xa5"),f,"\u8d77"):o.a.createElement("p",{className:"tour_depart_price bst_hide"},"\u5b9e\u65f6\u8ba1\u4ef7"):o.a.createElement("p",{className:"tour_depart_price bst_hide"},"\u65e0\u53ef\u552e\u73ed\u671f"),o.a.createElement("p",{className:"tour_depart_text"},t.Description))}function xe(e){var t=e.item,a=e.activeAlias,n=e.handleMultiTravelChange,r=t.Alias===a,i=u()({tour_depart_item:!0,tour_depart_cur:r});return o.a.createElement("div",{className:i,"data-sk-eid":"hy_ctr_route","data-sk-edata":JSON.stringify({type:t.Alias}),onClick:function(){n(t.Alias)}},o.a.createElement("span",null,t.Alias,"\u7ebf"),o.a.createElement("p",{className:"tour_depart_text"},t.Name))}function Ae(e){var t=e.currentRouteInfo;if(!t||!t.BookInfo)return null;var a=t.BookInfo.MinBookPerson;return a>1?o.a.createElement("p",{className:"tour_city_bd_text"},"\u8be5\u7ebf\u8def\u9700",a,"\u4eba\u53ca\u4ee5\u4e0a\u9884\u8ba2"):null}function Me(e){return(Me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){var t=e.state,a=e.handlers,n=t.BasicInfo,r=t.currentRouteInfo,i=t.actionIdSuffix,c=a.handleRichTextClick,s=a.handleScrollToProductFeature;if(!r)return null;var l=r.DescriptionInfo;return o.a.createElement("div",{className:"tour_product_feature",id:"product_feature"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_feature"}),"\u4ea7\u54c1\u7279\u8272"),o.a.createElement(He,{BasicInfo:n,actionIdSuffix:i,DescriptionInfo:l,handleRichTextClick:c,handleScrollToProductFeature:s}))}var He=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=Re(t).call(this,e))||"object"!==Me(r)&&"function"!==typeof r?Be(n):r).state={isShowAll:!0},a.handleToggle=a.handleToggle.bind(Be(a)),a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,o.a.Component),a=t,(n=[{key:"handleToggle",value:function(){var e=this.state.isShowAll,t=this.props.handleScrollToProductFeature;this.setState({isShowAll:!e}),e&&t()}},{key:"render",value:function(){var e=this.state.isShowAll,t=this.props,a=t.BasicInfo,n=t.actionIdSuffix,r=t.DescriptionInfo,i=t.handleRichTextClick;if(!r)return null;var c=r.Introduction;if(!c)return null;c=c.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<iframe[^>]*>[\s\S]*?<\/iframe>/gi,"");var s=u()({tour_m_open:!e,tour_m_close:e}),l=u()({tour_product_explain:!0,m_mod_open:e,m_mod_close:!e});return o.a.createElement("div",null,o.a.createElement("div",{className:l,dangerouslySetInnerHTML:{__html:c},onClick:i}),o.a.createElement("div",{id:"".concat(n,"-info-spread-").concat(e?"\u70b9\u51fb\u6536\u8d77":"\u70b9\u51fb\u52a0\u8f7d\u5168\u90e8","-").concat(a.ProductId),className:s,onClick:this.handleToggle},e?"\u70b9\u51fb\u6536\u8d77":"\u70b9\u51fb\u52a0\u8f7d\u5168\u90e8"))}}])&&Le(a.prototype,n),r&&Le(a,r),t}();function je(e){var t=e.state,a=e.handlers,n=t.QRCodeUrl,r=t.BasicInfo,i=t.pageStatus,c=a.handleShowNativeImg;if(!n||i.isDiyfhxsdp)return null;var s=Fe(r,n);return s?o.a.createElement("div",{className:"m_mod_ad bst_hide",onClick:c},o.a.createElement("img",{src:s})):null}var Fe=function(e,t){var a=e.ProductCategoryId,n=e.SaleMode,r="";return/^(9|10)$/.test(a)&&"P"===n&&(r=t.InternalAgent),/^(9|10)$/.test(a)&&"S"===n&&(r=t.InternalSelf),/^(11|26)$/.test(a)&&"P"===n&&(r=t.ExternalAgent),/^(11|26)$/.test(a)&&"S"===n&&(r=t.ExternalSelf),r};function qe(e){var t=e.state,a=t.pageStatus,n=t.CruisesBaseInfo;return a.isCruise&&n?o.a.createElement("div",{className:"m_mod m_ship"},!!n.OriginalUrl&&o.a.createElement("div",{className:"m_ship_pic"},o.a.createElement("img",{src:n.OriginalUrl})),o.a.createElement(Ve,{list:n.JourneyList})):null}function Ve(e){var t=e.list;return t&&t.length?o.a.createElement("div",{className:"m_ship_table"},o.a.createElement("table",null,o.a.createElement("colgroup",null,o.a.createElement("col",{className:"m_ship_co1_1"}),o.a.createElement("col",{className:"m_ship_co1_2"}),o.a.createElement("col",{className:"m_ship_co1_3"}),o.a.createElement("col",{className:"m_ship_co1_4"})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u5929\u6570"),o.a.createElement("th",null,"\u505c\u9760\u6e2f\u53e3"),o.a.createElement("th",null,"\u62b5\u8fbe"),o.a.createElement("th",null,"\u542f\u822a")),t.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.OrderDay),o.a.createElement("td",null,e.Port),o.a.createElement("td",null,e.ArriveTime.slice(0,5)),o.a.createElement("td",null,e.SetSailTime.slice(0,5)))})))):null}function We(e){var t=e.state.currentRouteInfo,a=((void 0===t?{}:t)||{}).FlightInfo;if(!a)return null;var n=a.FlightInfoItems;return n?o.a.createElement("div",{className:"tour_flight_box",id:"flight_info"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_flight"}),"\u53c2\u8003\u822a\u73ed"),o.a.createElement("div",{className:"tour_flight_contnet"},o.a.createElement("p",{className:"tour_flight_notice"},o.a.createElement("i",null),"\u4ee5\u4e0b\u822a\u73ed\u4fe1\u606f\u9700\u5728\u9884\u8ba2\u5b8c\u6210\u540e\u518d\u6b21\u786e\u8ba4"),n.map(function(e,t){var a=e.airlineCompanyNameList,n=e.StartAirportName,r=e.Transit,i=e.TransitCityNameList,c=e.Stopover,s=e.StopoverCityNameList,l=a.length>1?"".concat(a[0],"\u7b49").concat(a.length,"\u4e2a\u822a\u53f8"):"".concat(a[0]).concat(e.FlightNo),u=Ke(e.StartDateTime),d=Ke(e.EndDateTime);return o.a.createElement("div",{key:t,className:"tour_flight_item"},o.a.createElement("p",{className:"tour_flight_title"},o.a.createElement("span",{className:"tour_flight_airport"},n),r&&i.map(function(e,t){return o.a.createElement("span",{key:t},o.a.createElement("i",{className:"tour_flight_arrows"}),o.a.createElement("em",{className:"tour_flight_transfer"},e,"(\u4e2d\u8f6c)"))}),c&&s.map(function(e,t){return o.a.createElement("span",{key:t},o.a.createElement("i",{className:"tour_flight_arrows"}),o.a.createElement("em",{className:"tour_flight_transfer"},e,"(\u7ecf\u505c)"))}),o.a.createElement("i",{className:"tour_flight_arrows"}),o.a.createElement("span",{className:"tour_flight_airport"},e.EndAirportName)),o.a.createElement("p",{className:"tour_flight_time"},u," \u81f3 ",d,e.ExtraDays>0&&"+".concat(e.ExtraDays),"\u4e28",l))}))):null}var Ke=function(e){var t=new Date(parseInt(e.replace("/Date(","").replace(")/",""),10)),a=t.getTime(),n=6e4*t.getTimezoneOffset();return new Date(a+n+288e5).toString().split(" ")[4].slice(0,5)};function Je(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.isInCtripApp,i=t.AppVersion,c=t.actionIdSuffix,s=t.BasicInfo,l=t.ABTestResult,u=a.handleGoMapDetail;if(n.isPureDiyfhxsdp)return null;if(!r)return null;if(!(i>=804))return null;if("B"!==l["190522_vag_mapab"]&&!n.isDiyfhxsdp)return null;var d={pkgid:s.ProductId};return o.a.createElement("div",{className:"tour_map_box scroll_expose_dom",id:"".concat(c,"-route-map-").concat(s.ProductId),"data-expose-key":"grp_detail_route_map_expo","data-trace-value":JSON.stringify(d),onClick:u},o.a.createElement("img",{className:"tour_map_pic",src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/index/mappic01.png"}),o.a.createElement("div",{className:"tour_map_title_box"},o.a.createElement("p",{className:"tour_map_title"},"\u884c\u7a0b\u5730\u56fe"),o.a.createElement("p",{className:"tour_map_text"},"\u76f4\u89c2\u4e86\u89e3\u884c\u7a0b\u7ebf\u8def")))}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ze=["\u9910\u996e","\u9152\u5e97","\u822a\u73ed","\u666f\u70b9","\u8d2d\u7269","\u81ea\u8d39\u9879\u76ee","\u5168\u5929\u81ea\u7531\u6d3b\u52a8","\u81ea\u7531\u6d3b\u52a8","\u4ea4\u901a","\u5176\u5b83","\u8bfe\u7a0b","\u6d3b\u52a8","\u4e3b\u9898\u6d3b\u52a8","\u8d44\u6e90"];function $e(e){var t=e.state,a=e.TravelDetailList,n=e.handlers,r=n.handleGoHotel,i=n.handleGoScenic;return o.a.createElement("div",{className:"tour_simple_trip",id:"product_route"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_simple"}),"\u7b80\u5355\u884c\u7a0b"),o.a.createElement(Je,{state:t,handlers:n}),o.a.createElement("div",{className:"tour_simple_trip_box"},a.map(function(e,a){return o.a.createElement(Xe,{key:e.FewDay,data:e,index:a,isShowFirstDetail:t.pageStatus.isShowFirstDetail,handleGoHotel:r,handleGoScenic:i})})))}function Xe(e){var t=e.data,a=e.index,n=e.isShowFirstDetail,r=e.handleGoHotel,i=e.handleGoScenic;return o.a.createElement("div",{className:"tour_simple_trip_item",id:"day_".concat(t.FewDay)},o.a.createElement("p",{className:"tour_simple_trip_title"},o.a.createElement("span",null,"D",t.FewDay),t.Desc),o.a.createElement("div",{className:"tour_simple_trip_content"},0===a&&!!n&&t.listByTime.map(function(e,t){return o.a.createElement(Ze,{data:e,key:t})}),o.a.createElement(et,{list:t.flightList,day:t.FewDay}),o.a.createElement(it,{list:t.scenicList,day:t.FewDay,handleGoScenic:i}),o.a.createElement(nt,{list:t.themeList,day:t.FewDay}),o.a.createElement(rt,{list:t.dinnerList,day:t.FewDay,handleGoScenic:i}),o.a.createElement(tt,{list:t.hotelList,day:t.FewDay,handleGoHotel:r})))}function Ze(e){e.type;var t=e.data,a=null;return(t.DepartTimePrefix.trim()||t.DepartTime.trim())&&(a=t.DepartTimePrefix.trim()+t.DepartTime),9===t.ActiveType?o.a.createElement("div",{className:"tour_simple_trip_tip"},o.a.createElement("p",{className:"tour_simple_content_title"},o.a.createElement("i",{className:"tour_simple_content_dian1"}),a,!!a&&" \xb7 ","\u5176\u5b83"),o.a.createElement(ut,{content:t.Desc})):8===t.ActiveType?o.a.createElement("div",{className:"tour_simple_trip_tip"},o.a.createElement("p",{className:"tour_simple_content_title"},o.a.createElement("i",{className:"tour_simple_content_dian9"}),a,!!a&&" \xb7 ","\u4ea4\u901a"),o.a.createElement(ut,{content:t.Desc})):null}function et(e){var t=e.list;return t&&t.length?o.a.createElement("div",{className:"tour_simple_trip_tip"},o.a.createElement("p",{className:"tour_simple_content_title"},o.a.createElement("i",{className:"tour_simple_content_dian4"}),"\u822a\u73ed"),t.map(function(e,t){return o.a.createElement(ut,{key:t,content:e.Desc})})):null}function tt(e){var t=e.list,a=e.day,n=e.handleGoHotel;return t&&t.length?o.a.createElement("div",{className:"tour_simple_trip_tip"},o.a.createElement("p",{className:"tour_simple_content_title"},o.a.createElement("i",{className:"tour_simple_content_dian2"}),"\u9152\u5e97"),t.map(function(e,t){var r=e.Desc,i=e.HotelInfoList,c=[];return i&&i.length&&c.push(o.a.createElement(at,{day:a,key:i[0].HotelID,list:i,handleGoHotel:n})),r&&c.push(o.a.createElement(ut,{key:r,content:r})),c})):null}function at(e){var t=e.list,a=e.day,n=e.handleGoHotel;return t&&t.length?o.a.createElement("p",null,t.map(function(e,t){var r={id:e.HotelID,day:a},i=null;return i=e.HotelID<=0?o.a.createElement("span",{key:0},e.HotelName):o.a.createElement("a",{key:e.HotelID,className:"tour_blue",onClick:function(){n(r)},"data-sk-eid":"hy_ctr_stay_vdetail"},e.HotelName),0!==t?["\u6216",i]:i})):null}function nt(e){var t=e.list;return t&&t.length?o.a.createElement("div",{className:"tour_simple_trip_tip"},o.a.createElement("p",{className:"tour_simple_content_title"},o.a.createElement("i",{className:"tour_simple_content_dian14"}),"\u4e3b\u9898\u6d3b\u52a8"),t.map(function(e){var t=null;if(e.DepartTimePrefix.trim()||e.DepartTime.trim()){var a=e.DepartTimePrefix+e.DepartTime;t=o.a.createElement("h3",{key:a},a)}return[t,o.a.createElement(ut,{key:e.Destination,content:e.Destination})]})):null}function rt(e){var t=e.list,a=e.day,n=e.handleGoScenic;return t&&t.length?(t.forEach(function(e){e.handleGoScenic=n}),o.a.createElement("div",{className:"tour_simple_trip_tip"},o.a.createElement("p",{className:"tour_simple_content_title"},o.a.createElement("i",{className:"tour_simple_content_dian3"}),"\u9910\u996e"),t.map(function(e){return function(e,t,a){var n=e.DinnerInfo,r=e.Desc;if(!n||!n.DinnerType)return r?o.a.createElement(ut,{key:r,content:r}):void 0;var i=null,c=["BreakFast","Lunch","Supper"][n.DinnerType-1],s=["\u65e9\u9910","\u5348\u9910","\u665a\u9910"][n.DinnerType-1];"O"===n[c]?(r=r.replace(/<(\/?)(?!br).*?>/gi,""),i=o.a.createElement("p",{className:"tour_simple_content_text",key:s},s,"\uff1a",r||"\u5305\u542b")):"S"===n[c]&&(i=o.a.createElement("p",{className:"tour_simple_content_text",key:s},s,"\uff1a\u81ea\u7406"));var l=n.DinnerPoiInfoList;if(l&&l.length){var u=o.a.createElement(ot,{key:"".concat(r,"_food_content"),list:l,day:t,handleGoScenic:a});return[i,u]}return i}(e,a)}))):null}function ot(e){var t=e.list,a=e.day,n=e.handleGoScenic;return t&&t.length?o.a.createElement("div",{className:"m_rela_mod"},o.a.createElement("p",{className:"tour_simple_content_text"},"\u5f53\u5730\u7f8e\u98df\u63a8\u8350\uff1a",t.map(function(e,t){var r=e.GSScenicSpotID,i=e.Name;if(!r)return o.a.createElement("span",{key:i},i);var c={day:a,id:r,address:e.DistrictId,restid:e.RestaurantId,hasDinner:!0};return o.a.createElement("a",{key:r,className:"tour_blue","data-sk-eid":"hy_ctr_recom_spot",onClick:function(){n(c)}},i)}))):null}function it(e){var t=e.list,a=e.day,n=e.handleGoScenic;if(!t||!t.length)return null;var r=ze[t[0].ActiveType];return o.a.createElement("div",{className:"tour_simple_trip_tip"},o.a.createElement("p",{className:"tour_simple_content_title"},o.a.createElement("i",{className:"tour_simple_content_dian7"}),r),t.map(function(e,t){return 3===e.ActiveType?function(e,t,a){var n=e.ScenicSpotList,r=[],i=0;for(;i<n.length;){var c=[],s=n[i];for(c.push(s),i+=1;s.OrFlag&&(s=n[i],i+=1,s);)c.push(s);r.push(c)}return r.map(function(e){return 1===e.length?o.a.createElement(st,{scenic:e[0],day:t,handleGoScenic:a}):e.length>1?o.a.createElement(ct,{scenicList:e,day:t}):void 0})}(e,a,n):4===e.ActiveType?o.a.createElement("p",{className:"tour_simple_content_text",key:t},"\u8d2d\u7269"):6===e.ActiveType?o.a.createElement("p",{className:"tour_simple_content_text",key:t},"\u5168\u5929\u81ea\u7531\u6d3b\u52a8"):7===e.ActiveType?o.a.createElement("p",{className:"tour_simple_content_text",key:t},"\u81ea\u7531\u6d3b\u52a8"):void 0}))}function ct(e){var t=e.scenicList,a=e.day;return o.a.createElement("p",{className:"tour_simple_content_text"},t.map(function(e,t){var n=lt(e,a);return 0!==t?["\u6216",n]:n}))}function st(e){var t=e.scenic,a=e.day,n=e.handleGoScenic;return o.a.createElement("p",{className:"tour_simple_content_text"},lt(t,a,n))}function lt(e,t,a){var n=e.PreName+e.Name+e.SuffixName,r={day:t,id:e.GSScenicSpotID};return e.GSScenicSpotID?o.a.createElement("a",{key:n,className:"tour_blue",onClick:function(){a(r)}},n,!!e.IsClassic&&o.a.createElement("i",{className:"tour_green"},"\u3010\u7ecf\u5178\u3011")):e.GSScenicSpotID?void 0:o.a.createElement("span",{key:n},n,!!e.IsClassic&&o.a.createElement("i",{className:"tour_green"},"\u3010\u7ecf\u5178\u3011"))}function ut(e){var t=e.content,a=Qe(e,["content"]);return o.a.createElement("p",Ye({className:"tour_simple_content_text"},a,{dangerouslySetInnerHTML:{__html:t}}))}function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function mt(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var pt=["\u9910\u996e","\u9152\u5e97","\u822a\u73ed","\u666f\u70b9","\u8d2d\u7269","\u81ea\u8d39\u9879\u76ee","\u5168\u5929\u81ea\u7531\u6d3b\u52a8","\u81ea\u7531\u6d3b\u52a8","\u4ea4\u901a","\u5176\u5b83","\u8bfe\u7a0b","\u6d3b\u52a8","\u4e3b\u9898\u6d3b\u52a8","\u8d44\u6e90"],ft=["\u65e9\u9910","\u5348\u9910","\u665a\u9910"],ht=["BreakFast","Lunch","Supper"],_t=["3","2","4","7","11","6","10","10","9","1","12","13","14"];function vt(e){var t=e.state,a=e.TravelDetailList,n=e.handlers,r=n.handleGoHotel,i=n.handleGoScenic;return o.a.createElement("div",{className:"tour_simple_trip",id:"product_route"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_simple"}),"\u8be6\u7ec6\u884c\u7a0b"),o.a.createElement(Je,{state:t,handlers:n}),o.a.createElement("div",{className:"tour_simple_trip_box"},a.map(function(e,t){return o.a.createElement(gt,{key:e.FewDay,data:e,handleGoHotel:r,handleGoScenic:i})})))}function gt(e){var t=e.data,a=e.handleGoHotel,n=e.handleGoScenic;return o.a.createElement("div",{className:"tour_simple_trip_item",id:"day_".concat(t.FewDay)},o.a.createElement("p",{className:"tour_simple_trip_title"},o.a.createElement("span",null,"D",t.FewDay),t.Desc),o.a.createElement("div",{className:"tour_simple_trip_content"},t.orderList.map(function(e,r){return o.a.createElement(yt,{key:r,data:e,day:t.FewDay,handleGoHotel:a,handleGoScenic:n})})))}function yt(e){var t=e.data,a=e.day,n=e.handleGoHotel,r=e.handleGoScenic;if(5===t.ActiveType)return null;var i="tour_simple_content_dian".concat(_t[t.ActiveType]||"1"),c=pt[t.ActiveType];(t.DepartTimePrefix.trim()||t.DepartTime.trim())&&(c=t.DepartTimePrefix.trim()+t.DepartTime+" \xb7 ".concat(c));var s=null;if(t.ScenicSpotList&&t.ScenicSpotList.length){var l=t.ScenicSpotList;s=o.a.createElement(Et,{day:a,list:l,handleGoScenic:r})}var u=null;if(t.HotelInfoList&&t.HotelInfoList.length){var d=t.HotelInfoList;u=o.a.createElement(Tt,{day:a,list:d,handleGoHotel:n})}var m=o.a.createElement(Nt,{day:a,data:t,handleGoScenic:r}),p=null;(t.Distance||"0/0"!==t.DriveTime)&&(p=o.a.createElement(Pt,{ActiveType:t.ActiveType,Distance:t.Distance,DriveTime:t.DriveTime}));var f=null;if(t.DinnerInfo&&t.DinnerInfo.Desc){var h=t.DinnerInfo;f=o.a.createElement("p",{className:"tour_simple_content_text"},ft[h.DinnerType-1],"\uff1a",h.Desc)}var _=null;if(t.DinnerInfo){var v=t.DinnerInfo,g=v.Costs,y=ht[v.DinnerType-1];if(g&&g[0]&&"S"!==v[y]){var E=g[0],S=E.Cost,I=E.Currency;S>0&&(_=o.a.createElement("span",{className:"tour_food_span"},"\u7528\u9910\u6807\u51c6\uff1a",S," ",I,"/\u4eba"))}}var b=null;t.ProductsOnSale&&(b=o.a.createElement("p",{className:"tour_simple_content_text"},"\u8425\u4e1a\u4ea7\u54c1:",t.ProductsOnSale));var T=null;return(t.TakeTime||_)&&(T=o.a.createElement("p",{className:"tour_simple_particular_time"},o.a.createElement("i",{className:"tour_particular_time"}),t.TakeTime&&o.a.createElement("span",{className:"tour_food_span"},t.TakeTime),_)),!c&&!s&&!u&&!m&&!p&&!f&&!b&&!T?null:o.a.createElement("div",{className:"tour_simple_trip_tip"},o.a.createElement("p",{className:"tour_simple_content_title"},o.a.createElement("i",{className:i}),c),s,u,m,p,f,b,T)}function Et(e){var t=e.day,a=e.list,n=e.handleGoScenic;return o.a.createElement("div",{className:"m_rela_mod2"},a.map(function(e,r){return o.a.createElement(St,{key:r,day:t,scenic:e,shouldShowOrFlag:0!==r&&!!a[r-1].OrFlag,handleGoScenic:n})}))}function St(e){var t=e.scenic,a=e.day,n=e.shouldShowOrFlag,r=void 0!==n&&n,i=e.handleGoScenic,c=t.PreName+t.Name+t.SuffixName;return o.a.createElement("div",null,o.a.createElement(It,{day:a,fullname:c,scenic:t,shouldShowOrFlag:r,handleGoScenic:i}),!!t.CustomSynopsis&&o.a.createElement("p",{className:"tour_simple_content_text",dangerouslySetInnerHTML:{__html:t.CustomSynopsis}}),o.a.createElement(bt,{day:a,fullname:c,list:t.ImgList,isClassic:t.IsClassic,spotID:t.GSScenicSpotID,introduce:t.BussinessIntroduce,handleGoScenic:i}),!!t.TakeTime&&o.a.createElement("p",{className:"tour_simple_particular_time"},o.a.createElement("i",{className:"tour_particular_time"}),"\u6d3b\u52a8\u65f6\u95f4\uff1a",t.TakeTime))}function It(e){var t=e.day,a=e.fullname,n=e.scenic,r=e.shouldShowOrFlag,i=e.handleGoScenic,c={day:t,id:n.GSScenicSpotID};return o.a.createElement("p",{className:"tour_simple_content_text"},!!r&&"\u6216","\u524d\u5f80\uff1a",!!n.GSScenicSpotID&&o.a.createElement("a",{key:a,className:"tour_blue",onClick:function(){i(c)}},a,!!n.IsClassic&&o.a.createElement("i",{className:"tour_green"},"\u3010\u7ecf\u5178\u3011")),!n.GSScenicSpotID&&o.a.createElement("span",{key:a},a,!!n.IsClassic&&o.a.createElement("i",{className:"tour_green"},"\u3010\u7ecf\u5178\u3011")))}function bt(e){var t=e.day,a=e.fullname,n=e.list,r=e.isClassic,i=e.spotID,c=e.introduce,s=e.handleGoScenic;if(!n||0===n.length)return null;var l={day:t,id:i},u=n[0].UrlList[0].Value;return o.a.createElement("div",{className:"tour_particular_place_box","data-classic":!!r,onClick:function(){s(l)}},o.a.createElement("p",{className:"tour_particular_place_pic"},o.a.createElement("img",{src:u})),o.a.createElement("p",{className:"tour_particular_place_title"},o.a.createElement("span",{className:"tour_blue"},a),r&&o.a.createElement("i",{className:"tour_particular_place_span"},"\u7ecf\u5178")),c&&o.a.createElement("p",{className:"tour_particular_place_text"},c))}function Tt(e){var t=e.day,a=e.list,n=e.handleGoHotel;return a&&a.length?o.a.createElement("div",null,"\u5165\u4f4f\u9152\u5e97",a.map(function(e,a){var r={id:e.HotelID,day:t},i=null;return i=e.HotelID<=0?o.a.createElement("span",{key:a},e.HotelName):o.a.createElement("div",{key:e.HotelID,className:"tour_particular_hotel",onClick:function(){n(r)},"data-sk-eid":"hy_ctr_stay_vdetail"},o.a.createElement("p",{className:"tour_particular_pic"},o.a.createElement("img",{src:e.HotelImgUrl})),o.a.createElement("div",{className:"tour_particular_hotel_text"},o.a.createElement("p",{className:"tour_particular_hotel_title"},e.HotelName),o.a.createElement("p",{className:"tour_particular_hotel_tip"},e.HotelType),o.a.createElement("p",{className:"tour_particular_hotel_tip"},e.HotelBelong))),0!==a?["\u6216",i=o.a.createElement("a",{key:e.HotelID,className:"tour_blue",onClick:function(){n(r)},"data-sk-eid":"hy_ctr_stay_vdetail"},e.HotelName)]:i})):null}function Nt(e){var t=e.day,a=e.data,n=e.handleGoScenic;if(!a)return null;var r=[],i=[];if(!/^(1|3|9)$/.test(a.ActiveType))if(0===a.ActiveType&&a.DinnerInfo){var c=a.DinnerInfo,s=ft[c.DinnerType-1];i.push("".concat(s,"\uff1a")),"S"===c[ht[c.DinnerType-1]]&&i.push("\u81ea\u7406\u3002")}else 12===a.ActiveType?i.push("".concat(a.Destination,"\uff1a")):i.push("".concat(pt[a.ActiveType],"\uff1a"));if(a.Desc&&(i=i.concat(a.Desc)),i.length&&r.push(o.a.createElement(Ct,{key:-1,content:i.join("")})),a.DinnerInfo&&a.DinnerInfo.DinnerPoiInfoList&&a.DinnerInfo.DinnerPoiInfoList.length){var l=a.DinnerInfo.DinnerPoiInfoList;l.forEach(function(e,a){var i={day:t,id:e.GSScenicSpotID,address:e.DistrictId,restid:e.RestaurantId,hasDinner:!0};e.GSScenicSpotID?r.push(o.a.createElement("a",{key:a,className:"tour_blue",onClick:function(){n(i)},"data-sk-eid":"hy_ctr_recom_spot"},e.Name)):r.push(e.Name),a!==l.length-1&&r.push(" ")})}return r.length?o.a.createElement("div",null,r):null}function Pt(e){var t=e.Distance,a=e.DriveTime,n=e.ActiveType;return t&&"0/0"!==a?o.a.createElement("p",{className:"tour_simple_particular_time"},o.a.createElement("i",{className:"tour_particular_time"}),2===n?"\u98de\u884c\uff1a":"\u884c\u9a76\uff1a","\u7ea6",t,"\u516c\u91cc/\u7ea6",a.split("/")[0],"\u5c0f\u65f6",a.split("/")[1],"\u5206"):t?o.a.createElement("p",{className:"tour_simple_particular_time"},o.a.createElement("i",{className:"tour_particular_location"}),2===n?"\u98de\u884c\u8ddd\u79bb\uff1a":"\u884c\u9a76\u8ddd\u79bb:","\u7ea6",t,"\u516c\u91cc"):"0/0"!==a?o.a.createElement("p",{className:"tour_simple_particular_time"},o.a.createElement("i",{className:"tour_particular_time"}),2===n?"\u98de\u884c\u65f6\u95f4\uff1a":"\u884c\u9a76\u65f6\u95f4:","\u7ea6",a.split("/")[0],"\u5c0f\u65f6",a.split("/")[1],"\u5206"):null}function Ct(e){var t=e.content,a=mt(e,["content"]);return o.a.createElement("p",dt({className:"tour_simple_content_text"},a,{dangerouslySetInnerHTML:{__html:t}}))}function kt(e){var t=e.state,a=e.handlers,n=t.currentRouteInfo,r=t.isSimpleMode;if(!n)return null;var i=n.TravelDetailList;return i&&i.length?r?o.a.createElement($e,{state:t,TravelDetailList:i,handlers:a}):o.a.createElement(vt,{state:t,TravelDetailList:i,handlers:a}):null}function wt(e){var t=e.state,a=e.handlers,n=t.BasicInfo,r=t.pageStatus,i=t.VendorInfo,c=a.handleShowVendorPhonePop,s=a.handleGoSupplier,l=a.handleGoSupplierPic;if(!n)return null;if(!i||!i.VendorFullName)return null;var d=u()({m_agentname:!0,m_agentname_noarrow:!0}),m=i.BCScanningCopy,p=m&&/^.*(.jpg|.png|.jpeg|.bmp)$/.test(m);return"S"===n.SaleMode?r.isDiyfhxsdp?o.a.createElement("div",{className:"m_store",onClick:s},o.a.createElement("div",{className:"m_storename autotrophy_icon"},"\u643a\u7a0b\u81ea\u8425",o.a.createElement("span",{className:"autotrophy_text"},"\u53ef\u67e5\u770b\u7ecf\u8425\u8bb8\u53ef\u8bc1\u4fe1\u606f"))):null:n.IsDistribution||r.isAgent||"G"===n.SaleMode?r.isDiyfhxsdp||"G"===n.SaleMode?o.a.createElement("div",{className:"m_agent"},o.a.createElement("div",{className:d},i.VendorFullName),i.BCNumber&&o.a.createElement("div",{className:"m_agentcode"},"\u8bb8\u53ef\u8bc1\u7f16\u53f7\uff1a",i.BCNumber,p&&o.a.createElement("span",{className:"m_agentcode_text",onClick:function(){l(i.VenderId)}},o.a.createElement("i",null,"\u7ecf\u8425\u8bb8\u53ef\u8bc1")))):null:(d=u()({m_agent2name:!0,m_agentname_noarrow:!0}),r.isRetail?o.a.createElement("div",{className:"m_agent2"},o.a.createElement("div",{className:"m_agent2_hd"},o.a.createElement("h3",{className:d},i.VendorFullName),i.BCNumber&&o.a.createElement("div",{className:"m_agentcode"},"\u8bb8\u53ef\u8bc1\u7f16\u53f7\uff1a",i.BCNumber,p&&o.a.createElement("span",{className:"m_agentcode_text",onClick:function(){l(i.VenderId)}},o.a.createElement("i",null,"\u7ecf\u8425\u8bb8\u53ef\u8bc1")))),o.a.createElement("div",{className:"m_agent2_bd"},o.a.createElement("p",null,"\u672c\u4ea7\u54c1\u7531\u96f6\u552e\u5546\u76f4\u552e\uff0c\u5e76\u63d0\u4f9b\u54a8\u8be2/\u9884\u8ba2/\u552e\u540e\u670d\u52a1\u3002",o.a.createElement("br",null),!!i.PhoneServiceTime&&"\u670d\u52a1\u65f6\u95f4\uff1a".concat(i.PhoneServiceTime))),!!i.VBK400Phone&&o.a.createElement("i",{className:"m_agent2_phone",onClick:c})):null)}function Dt(e){var t=e.state,a=e.handlers,n=t.TravelNote,r=t.pageStatus,i=a.handleGoTravelNote;if(!n)return null;var c=n.TravelNoteInfoList;return c&&c.length?r.isVSalesMode||r.isBeston?null:o.a.createElement("div",{className:"tour_notes_box"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_notes"}),"\u76f8\u5173\u6e38\u8bb0"),o.a.createElement("div",{className:"tour_notes_content"},o.a.createElement("ul",{className:"tour_m_triplist"},c.map(function(e,t){return o.a.createElement(Ot,{key:t,data:e,handleGoTravelNote:i})})))):null}function Ot(e){var t=e.data,a=e.handleGoTravelNote,n={ename:t.DistrictEName,did:t.DistrictId,id:t.Id};return o.a.createElement("li",{onClick:function(){a(n)}},o.a.createElement("div",{className:"tour_m_pic"},o.a.createElement("img",{src:t.ImgUrl||"https://pic.c-ctrip.com/VacationH5Pic/group_travel/index/default210.png"})),o.a.createElement("div",{className:"tour_notes_pic_text"},o.a.createElement("h4",null,t.Title),o.a.createElement("p",{className:"tour_m_trip_num"},o.a.createElement("span",{className:"tour_notes_see"},t.VisitCount),o.a.createElement("em",{className:"tour_notes_talk"},t.CommentCount))))}function xt(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.MoreRecommendProductList,i=t.isInCtripApp,c=t.BasicInfo,s=a.handleGoMoreDetail;if(n.isBeston)return null;if(!r||!r.length)return o.a.createElement(Mt,null);var l=i?"pkg_dtl_recpkgexpo_app":"pkg_dtl_recpkgexpo_h5",u={pkgid:c.ProductId,slcityid:c.SaleCityId,stcityid:c.DepartureId,type:"grp"};return o.a.createElement("div",{className:"tour_recommend_box scroll_expose_dom",id:"product_recommend","data-expose-key":l,"data-trace-value":JSON.stringify(u)},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_recommend"}),"\u66f4\u591a\u63a8\u8350"),o.a.createElement("div",{className:"tour_recommend_content clearfix"},r.map(function(e,t){return o.a.createElement(At,{key:t,data:e,handleGoMoreDetail:s})})))}function At(e){var t=e.data,a=e.handleGoMoreDetail;if(!t.ImageUrl)return null;var n=t.ImageUrl.replace("_500_280","_500_333").replace("_192_192","_500_333"),r={productId:t.ProductId,saleCityId:t.SaleCityId,departCityId:t.StartCityId};return o.a.createElement("div",{className:"tour_recommend_content_item",onClick:function(){return a(r)}},o.a.createElement("div",{className:"tour_recommend_content_space"},o.a.createElement("p",{className:"tour_recommend_content_pic"},o.a.createElement("span",{className:"tour_recommend_content_title"},o.a.createElement("i",null,t.Pattern)),o.a.createElement("img",{src:n})),o.a.createElement("p",{className:"tour_recommend_content_text"},t.ProductName),t.MinPrice<=0&&o.a.createElement("p",{className:"tour_recommend_price"},"\u5b9e\u65f6\u8ba1\u4ef7"),t.MinPrice>0&&o.a.createElement("p",{className:"tour_recommend_price"},o.a.createElement("dfn",null,"\xa5"),t.MinPrice,o.a.createElement("em",null,"\u8d77"))))}function Mt(){return o.a.createElement("div",{className:"tour_recommend_box",id:"product_recommend"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_recommend"}),"\u66f4\u591a\u63a8\u8350"),o.a.createElement("div",{className:"tour_recommend_content clearfix"},[1,2,3,4,5,6,7,8].map(function(e){return o.a.createElement("div",{key:e,className:"tour_recommend_content_item"},o.a.createElement("div",{className:"tour_recommend_content_space"},o.a.createElement("p",{className:"tour_recommend_content_pic"}),o.a.createElement("p",{className:"tour_recommend_content_bg"}),o.a.createElement("p",{className:"tour_recommend_content_bg"})))})))}function Lt(e){e.state;var t=e.handlers.handleGoDingzhi;return o.a.createElement("div",{className:"tour_m_viporder",onClick:t},o.a.createElement("i",{className:"tour_m_viporder_icon"}),o.a.createElement("a",{href:"javascript:;",className:"tour_m_viporder_btn"},"\u7acb\u5373\u5b9a\u5236"),o.a.createElement("h3",null,"\u5b9a\u5236\u65c5\u884c"),o.a.createElement("p",null,"\u4e0d\u8ddf\u56e2\u4e0d\u505a\u653b\u7565\uff0c4000\u4f4d\u4e13\u5c5e\u5b9a\u5236\u5e08\u514d\u8d39\u4e3a\u60a8\u8bbe\u8ba1\u884c\u7a0b\uff0c\u8f7b\u677e\u51fa\u6e38\uff01"))}function Rt(e){var t=e.state,a=e.handlers,n=t.SixSecurityInfo,r=a.handleGoSixEnsure;return n?o.a.createElement("div",{className:"tour_six_security",onClick:r},o.a.createElement("img",{src:n.imageUrl})):null}function Bt(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.EmotionalCues,i=t.ScheduleInfo,c=a.handleHideBookInfo;if(!n.isBook||!i||!i.HasInventory)return null;if(!r)return null;var s=r.filter(function(e){return"bookingdynamic"===e.PromptType})[0],l=s&&s.Content;return l?o.a.createElement("div",{className:"m_book_info m_loopfade",style:{display:"none"}},o.a.createElement("div",{className:"m_book_info_con"},l),o.a.createElement("i",{onClick:c})):null}var Gt=a(450);function Ut(e){var t=e.state,a=e.handlers,n=t.isShowFavouriteMenu,r=t.pageStatus,i=t.actionIdSuffix,c=t.BasicInfo,s=a.handleGoFavouriteList,l=a.handleHideFavouriteMenu;return n?o.a.createElement("div",{onClick:function(e){e.stopPropagation()}},o.a.createElement("div",{className:"tour_mask_full_mod opacity0",onClick:l}),o.a.createElement("div",{className:"tour_fav_floatlay"},r.isFavorite?o.a.createElement("p",null,o.a.createElement("i",{className:"tour_icon_fav cur"}),o.a.createElement("span",{className:"tour_fav_f_txt"},"\u6536\u85cf\u6210\u529f!")):o.a.createElement("p",null,"\u5df2\u53d6\u6d88\u6536\u85cf"),o.a.createElement("p",{className:"tour_c_blue",id:"".concat(i,"-mask-fav-").concat(c.ProductId),onClick:s},"\u67e5\u770b\u6536\u85cf\u5217\u8868"))):null}function Ht(e){return(Ht="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=u()({m_toolbar:!0,m_toolbar_nuomi:n.isNuomi,m_toolbar_qunar:n.isQunar,m_toolbar_bestone:n.isBeston,m_toolbar_yilong:n.isElong});return n.isVSalesMode&&n.isRetail?o.a.createElement("footer",{className:r},o.a.createElement("div",{className:"m_toolbar_con"},o.a.createElement("span",{className:"m_btn_disable"},o.a.createElement("em",null,"\u96f6\u552e\u4ea7\u54c1\u4e0d\u652f\u6301\u4ee3\u5ba2\u4e0b\u5355")))):o.a.createElement("footer",{className:r},o.a.createElement("div",{className:"m_toolbar_con"},o.a.createElement($t,{state:t,handlers:a}),o.a.createElement(zt,{state:t,handlers:a}),o.a.createElement(Jt,{state:t,handlers:a}),o.a.createElement(Yt,{state:t,handlers:a}),o.a.createElement(Kt,{state:t,handlers:a}),o.a.createElement(Qt,{state:t,handlers:a})))}function Kt(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.BasicExtendInfo,i=t.TourGroupInfo,c=t.PriceInfo,s=t.ScheduleInfo,l=a.handleGoBestoneHoldOrder;if(n.isBeston||n.isInBestoneApp){if(n.isBestoneShare)return null;if(!n.isBook||!s||!s.HasInventory)return null;if(n.isMultiLine){var u=n.activeProductId;if((i.TourGroupProductInfo.filter(function(e){return e.ProductId===u})[0].ProductShortInfo.IsHoldOrder||!1)&&c)return o.a.createElement("span",{className:"m_btn_yellow",onClick:l},o.a.createElement("em",null,"\u7533\u8bf7\u5360\u4f4d"))}else if(r&&c&&r.IsHoldOrder)return o.a.createElement("span",{className:"m_btn_yellow",onClick:l},o.a.createElement("em",null,"\u7533\u8bf7\u5360\u4f4d"))}return null}function Jt(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.VendorInfo,i=t.BestoneInfo,c=t.IMEntryInfo,s=t.actionIdSuffix,l=t.query,u=t.isShowProposalOrderTip,d=t.BasicInfo,m=a.handleShowAdvisorMask,p=a.handleCloseProposalOrderTip;if(n.isBstMiniProgram&&l.storetel)return o.a.createElement("a",{className:"m_phone",href:"tel:".concat(l.storetel)},"\u7535\u8bdd\u54a8\u8be2");if(n.isBeston){var f=null;return n.isBestoneShare?f=i&&i.Phone:r&&(f=r.ChannelPhone),f?o.a.createElement("a",{className:"m_phone",href:"tel:".concat(f),"data-tel":f},"\u7535\u8bdd\u54a8\u8be2"):null}if(n.isElong){var h=null;if(n.isRetail)try{h=r.VBK400Phone.replace(/-/g,"")}catch(g){}else h="4006062823";return h?o.a.createElement("a",{className:"yilong_consult js_phone",href:"tel:".concat(h),"data-tel":h},"\u7535\u8bdd\u54a8\u8be2"):null}if(c&&c.Inquiry&&(c.Mobile||c.AfterSaleTel)){var _="".concat(s,"-bottom-IM"),v=u&&d.TravelDays>=4&&[1,3,4].includes(d.ProductPatternId)&&[9,10,11,26].includes(d.ProductCategoryId);return o.a.createElement("span",{className:"m_phone",id:_,onClick:m},"\u8054\u7cfb\u5ba2\u670d",v&&o.a.createElement("div",{className:"wish_bubble_box zt_hidden",onClick:function(e){e.stopPropagation()}},"\u6ca1\u627e\u5230\u5408\u9002\u7684\u4ea7\u54c1\uff0c\u8ba9\u643a\u7a0b\u5ba2\u670d\u5e2e\u6211\u8ba2",o.a.createElement("i",{className:"lay",onClick:p},"\ue42a")))}return null}function Yt(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=a.handleGoBestoneMakePoster;return n.isShowCoverButton?o.a.createElement("span",{className:"m_cover",onClick:r},"\u6d77\u62a5\u5206\u4eab"):null}function Qt(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.ScheduleInfo,i=t.actionIdSuffix,c=a.handleGoBooking;if(!r)return o.a.createElement("span",{className:"m_btn_disable"},o.a.createElement("em",null,"\u52a0\u8f7d\u4e2d"));if(!n.isBook||!r.HasInventory)return o.a.createElement("span",{className:"m_btn_disable"},o.a.createElement("em",null,"\u5df2\u552e\u5b8c"));if(n.isSetCountDown&&!n.isBestoneShare)return o.a.createElement(Xt,{prodType:n.prodType,actionIdSuffix:i,countDownStatus:t.countDownStatus,handleGoBooking:c});var s="\u7acb\u5373\u9884\u8ba2";return n.isBestoneShare&&(s="\u7acb\u5373\u62a5\u540d"),o.a.createElement("span",{id:"".concat(i,"-bottom-order"),className:"m_btn_orange js_booking","data-sk-eid":"hy_ctr_buynow",onClick:c},o.a.createElement("em",null,s))}function zt(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.actionIdSuffix,i=a.handleToggleCollectionStatus;if(n.isBeston||n.isElong||n.isQunar||n.isVSalesMode)return null;if(n.isInMiniApp&&!n.isMiniProgramWaken)return null;var c=u()({m_collect:!0,cur:n.isFavorite});return o.a.createElement("span",{id:"".concat(r,"-bottom-fav"),className:c,onClick:i},"\u6536\u85cf",o.a.createElement(Ut,{state:t,handlers:a}))}function $t(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.actionIdSuffix,i=t.ShopInfo,c=t.ShopEntryInfo,s=void 0===c?{}:c,l=t.BasicInfo,u=a.handleGoShopDetail;return n.isDiyfhxsdp||n.isStudy?null:i&&i.brandScoreInfo&&s.isShowEntry?"G"===l.SaleMode?null:o.a.createElement("span",{id:"".concat(r,"-module-button"),className:"m_shop",onClick:u},"\u5e97\u94fa"):null}var Xt=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=Ft(t).call(this,e))||"object"!==Ht(r)&&"function"!==typeof r?qt(n):r).state={status:"loading"},a.handleCountDown=a.handleCountDown.bind(qt(a)),a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,o.a.Component),a=t,(n=[{key:"handleCountDown",value:function(){this.setState({status:this.timer.getTimerStatus()})}},{key:"createTimer",value:function(){var e=this.props.countDownStatus;e&&(this.timer=new Gt.a,this.timer.getLocalTime(e),this.timer.timered(this.handleCountDown))}},{key:"destroyTimer",value:function(){this.timer&&this.timer.destroy()}},{key:"componentDidMount",value:function(){this.timer||this.createTimer()}},{key:"componentDidUpdate",value:function(){this.timer||this.createTimer()}},{key:"componentWillUnmount",value:function(){this.destroyTimer()}},{key:"render",value:function(){var e=this.timer,t=this.state,a=this.props;switch(t.status){case"noStarted":return n=e.getLocalTime(a.countDownStatus).lastTime,o.a.createElement("span",{className:"m_btn_disable"},o.a.createElement("em",null,"".concat(n.month,"\u6708").concat(n.date,"\u65e5 ").concat(n.hour,":").concat(n.minute,"\u5f00\u5356")));case"upcomingStart":var n=e.getLastTime(e.d2);return o.a.createElement("span",{className:"m_btn_disable"},o.a.createElement("em",null,"\u8ddd\u5f00\u59cb ".concat(n.hour,"\u65f6").concat(n.minute,"\u5206").concat(n.second,"\u79d2")));case"start":return o.a.createElement("span",{id:"".concat(a.actionIdSuffix,"-bottom-order"),className:"m_btn_orange js_booking","data-sk-eid":"hy_ctr_buynow",onClick:a.handleGoBooking},o.a.createElement("em",null,"\u7acb\u5373\u9884\u8ba2"));case"end":return o.a.createElement("span",{className:"m_btn_disable"},o.a.createElement("em",null,"\u5df2\u552e\u5b8c"));default:return o.a.createElement("span",{className:"m_btn_disable"},o.a.createElement("em",null,"\u52a0\u8f7d\u4e2d"))}}}])&&jt(a.prototype,n),r&&jt(a,r),t}();function Zt(e){return(Zt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ta(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aa(e,t,a){return t&&ta(e.prototype,t),a&&ta(e,a),e}function na(e,t){return!t||"object"!==Zt(t)&&"function"!==typeof t?oa(e):t}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ia(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ca(e,t)}function ca(e,t){return(ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sa=function(e){function t(e){var a,n,r,o;return ea(this,t),a=na(this,ra(t).call(this,e)),n=oa(a),o=function(){var e=a.props.handlers.handleHideCouponMask;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)},(r="hideMask")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,a.state={showMask:!0},a}return ia(t,o.a.Component),aa(t,[{key:"render",value:function(){var e=this,t=this.state.showMask,a=this.props.state,n=a.isShowCouponMask,r=a.couponItemList,i=a.actionIdSuffix,c=this.props.handlers.handleReceiveCoupon;if(!n||!r||!r.length)return null;var s=r.filter(function(e){return 0===e.PromotionSubType}),l=r.filter(function(e){return 1===e.PromotionSubType}),u=s.length>0&&l.length>0;return o.a.createElement("div",null,o.a.createElement("div",{className:"rour_opacitylay",onClick:this.hideMask}),o.a.createElement("div",{className:t?"rour_pop_box fadeInUp":"rour_pop_box fadeOutDown"},o.a.createElement("span",{className:"rour_pop_close",id:"".concat(i,"-mask-close"),onClick:this.hideMask}),o.a.createElement("h1",{className:"rour_pop_title"},"\u4f18\u60e0\u5238"),o.a.createElement("div",{className:"rour_pop_scoll"},u&&o.a.createElement("p",{className:"tour_discount_tip"},o.a.createElement("i",{className:"tour_discount_tip_icon"}),"\u5e97\u94fa\u5238\u4e0e\u643a\u7a0b\u5238\u4e0d\u53ef\u53e0\u52a0\u4f7f\u7528"),o.a.createElement("div",{className:"rour_pop_sale_padding"},l.length>0&&o.a.createElement("div",null,o.a.createElement("p",{className:"tour_discount_title"},"\u5e97\u94fa\u5238"),l.map(function(t,a){return o.a.createElement(da,{key:a,data:t,index:a,state:e.props.state,handleReceiveCoupon:c})})),s.length>0&&o.a.createElement("div",null,o.a.createElement("p",{className:"tour_discount_title"},"\u643a\u7a0b\u5238"),s.map(function(t,a){return o.a.createElement(da,{key:a,data:t,index:a,state:e.props.state,handleReceiveCoupon:c})}))))))}}]),t}(),la=["\u7acb\u51cf\u5238","\u6298\u6263\u5238","\u6ee1\u51cf\u5238"],ua={0:"\u643a\u7a0b",1:"\u5e97\u94fa"},da=function(e){function t(e){var a;return ea(this,t),(a=na(this,ra(t).call(this,e))).state={isShowDetail:!1},a.handleToggle=a.handleToggle.bind(oa(a)),a}return ia(t,o.a.Component),aa(t,[{key:"handleToggle",value:function(){this.setState({isShowDetail:!this.state.isShowDetail})}},{key:"render",value:function(){var e=this.state.isShowDetail,t=this.props,a=t.data,n=t.index,r=t.state,i=t.handleReceiveCoupon,c=a.PromotionId,s=a.PromotionCode,l=a.IsTaken,d=a.DeductionTypeId,m=a.DisplayName,p=a.DeductionList,f=a.Description,h=a.PromotionSubType,_=a.StartTime,v=a.EndTime,g=r.actionIdSuffix,y=u()({rour_pop_sale_box:!0,m_coupon_disable2:l,rour_sale_hide:!e}),E=ua[h],S=de.a.parse(_).format("YYYY-MM-DD HH:mm"),I=de.a.parse(v).format("YYYY-MM-DD HH:mm"),b=h?"".concat(g,"-mask-coupon-\u9886\u53d6"):"".concat(g,"-info-receive-").concat(n,"-").concat(c);return o.a.createElement("div",{className:y},o.a.createElement("div",{className:"rour_pop_sale_item"},o.a.createElement(ma,{data:a}),o.a.createElement("div",{className:"rour_sale_item_right"},o.a.createElement("p",{className:"rour_sale_text"},o.a.createElement("span",{className:"rour_sale_quan"},E,la[d-1]),m),o.a.createElement("p",{className:"rour_sale_limit_time"},S," \u81f3 ",I),o.a.createElement("span",{className:e?"rour_sale_up":"rour_sale_down",onClick:this.handleToggle},"\u4f7f\u7528\u8bf4\u660e",o.a.createElement("i",null)),o.a.createElement("span",{className:l?"rour_sale_gray":"rour_sale_btn",id:l?null:b,onClick:function(){!l&&i(c,s)}},l?"\u5df2\u9886\u53d6":"\u9886\u53d6"))),o.a.createElement("div",{className:"rour_pop_sale_contnet"},p.length>1&&o.a.createElement("ul",{className:"rour_pop_sale_tip"},p.map(function(e,t){return o.a.createElement("li",{key:t},"\u6ee1",o.a.createElement("dfn",null,"\xa5"),e.StartAmount,"\u51cf",o.a.createElement("dfn",null,"\xa5"),e.DeductionAmount)})),f))}}]),t}();function ma(e){var t=e.data;switch(t.DeductionTypeId){case 1:return o.a.createElement("div",{className:"rour_sale_item_left"},o.a.createElement("div",{className:"rour_sale_top"},o.a.createElement("p",{className:"rour_sale_price"},o.a.createElement("dfn",null,"\xa5"),o.a.createElement("em",null,t.DeductionList[0].DeductionAmount))));case 2:var a=(100-t.DeductionList[0].DeductionAmount)/10;return o.a.createElement("div",{className:"rour_sale_item_left"},o.a.createElement("div",{className:"rour_sale_top"},o.a.createElement("p",{className:"rour_sale_price"},o.a.createElement("em",null,a),o.a.createElement("span",null,"\u6298"))));case 3:var n=t.DeductionList.sort(function(e,t){return t.DeductionAmount-e.DeductionAmount})[0];return o.a.createElement("div",{className:"rour_sale_item_left"},o.a.createElement("div",{className:"rour_sale_top"},t.DeductionList.length>1&&o.a.createElement("i",{className:"rour_sale_best"},"\u6700\u9ad8"),o.a.createElement("p",{className:"rour_sale_price"},o.a.createElement("dfn",null,"\xa5"),o.a.createElement("em",null,n.DeductionAmount)),1===t.DeductionList.length&&o.a.createElement("p",{className:"rour_sale_price_text"},"\u6ee1",n.StartAmount,"\u5143\u53ef\u7528")))}}function pa(e){return(pa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ha(e){return(ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ga=function(e){function t(e){var a,n,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=ha(t).call(this,e),a=!r||"object"!==pa(r)&&"function"!==typeof r?_a(n):r,o=_a(a),c=function(){var e=a.props.handlers.handleHidePromotionMask;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)},(i="hideMask")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,a.state={showMask:!0},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this.state.showMask,t=this.props.state,a=t.isShowPromotionMask,n=t.BasicInfo,r=t.CompositePromotionInfo;if(!a)return null;var i=r.alreadyPromotionList,c=r.canPromotionList,s=r.limitGiftOptionList,l=!i.length&&!c.length&&!s.length;return l?null:o.a.createElement("div",null,o.a.createElement("div",{className:"rour_opacitylay",onClick:this.hideMask}),o.a.createElement("div",{className:e?"rour_pop_box fadeInUp":"rour_pop_box fadeOutDown"},o.a.createElement("span",{className:"rour_pop_close",onClick:this.hideMask}),o.a.createElement("h1",{className:"rour_pop_title"},"\u4f18\u60e0"),o.a.createElement("div",{className:"rour_pop_scoll"},o.a.createElement("div",{className:"rour_pop_padding"},o.a.createElement(ya,{list:i,title:"\u5df2\u4eab"}),o.a.createElement(ya,{list:c,title:"\u53ef\u4eab"}),o.a.createElement(ya,{list:s,title:"\u9650\u65f6\u8d60\u9001"}),!l&&!!n.IsDistribution&&o.a.createElement("div",{className:"drop_stip"},"* \u4ee5\u4e0a\u6d3b\u52a8\u4ec5\u652f\u6301\u4f9b\u5e94\u5546\u4ea7\u54c1")))))}}])&&fa(a.prototype,n),r&&fa(a,r),t}();function ya(e){var t=e.list,a=e.title;return t&&t.length?o.a.createElement("div",null,o.a.createElement("h3",{className:"rour_beneficial"},a),o.a.createElement("ul",{className:"rour_text_cont"},t.map(function(e,t){var a={0:"[\u643a\u7a0b\u4f18\u60e0]",1:"[\u5e97\u94fa\u4f18\u60e0]"}[e.promotionSubType];return o.a.createElement("li",{key:t},o.a.createElement("h4",null,a&&o.a.createElement("span",{className:"rour_text_cont_space"},a),e.name),e.channelText&&o.a.createElement("i",{className:"m_icon_phone"},e.channelText),e.description&&o.a.createElement("p",{className:"m_mask_tips",dangerouslySetInnerHTML:{__html:e.description}}))}))):null}function Ea(e){return(Ea="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ia(e){return(Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ta(e,t){return(Ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Na=function(e){function t(e){var a,n,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=Ia(t).call(this,e),a=!r||"object"!==Ea(r)&&"function"!==typeof r?ba(n):r,o=ba(a),c=function(){var e=a.props.handlers.handleHideCityMask;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)},(i="hideMask")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,a.state={showMask:!0},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ta(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this.state.showMask,t=this.props.state,a=t.multipleDepartureCityInfo,n=t.BasicInfo,r=t.isShowCityMask,i=t.pageStatus,c=t.actionIdSuffix,s=this.props.handlers.handleChangeDepartCity;if(!a||!r)return null;var l=a.DepartureCityList;return l&&l.length?o.a.createElement("div",null,o.a.createElement("div",{className:"rour_opacitylay",onClick:this.hideMask}),o.a.createElement("div",{className:e?"rour_pop_box fadeInUp":"rour_pop_box fadeOutDown"},o.a.createElement("span",{className:"rour_pop_close",onClick:this.hideMask}),o.a.createElement("h1",{className:"rour_pop_title"},"\u8bf7\u9009\u62e9\u51fa\u53d1\u5730"),o.a.createElement("div",{className:"rour_pop_scoll"},o.a.createElement("div",{className:"rour_start_padding"},o.a.createElement("ul",{className:"rour_place_start"},l.map(function(e,t){var a=e.DepartureCityId,r=e.DepartureCityName,l=e.MinPrice,d=e.ProductIdList,m=a===Number(n.DepartureId),p=d.includes(i.activeProductId),f=u()({cur:m,rour_place_gray:!p});return o.a.createElement("li",{id:"".concat(c,"-start-modify-").concat(a),key:t,className:f,onClick:function(){p&&s(a)}},o.a.createElement("p",{className:"rour_place"},r),p&&!l&&o.a.createElement("p",{className:"rour_price"},"\u5b9e\u65f6\u8ba1\u4ef7"),p&&!!l&&o.a.createElement("p",{className:"rour_price"},o.a.createElement("dfn",null,"\xa5"),l))})))))):null}}])&&Sa(a.prototype,n),r&&Sa(a,r),t}();function Pa(e){var t=e.state,a=e.handlers,n=t.VendorInfo,r=t.pageStatus,i=t.isShowVendorPhonePop,c=a.handleHideVendorPhonePop;if(!i)return null;if(!r.isRetail||!n||!n.VBK400Phone)return null;var s=n.VBK400Phone.replace(/-/g,"");return o.a.createElement("div",null,o.a.createElement("div",{className:"m_pop_box"},o.a.createElement("div",{className:"m_pop_con"},o.a.createElement("h2",null,n.VBK400Phone)),o.a.createElement("div",{className:"m_pop_btns"},o.a.createElement("div",{className:"m_pop_btn m_pop_btn1",onClick:c},"\u5173\u95ed"),o.a.createElement("div",{className:"m_pop_btn m_pop_btn2"},o.a.createElement("a",{href:"tel:".concat(s)},"\u62e8\u6253")))),o.a.createElement("div",{className:"view cui-mask",style:{width:"100%",height:"100%",position:"fixed",left:"0px",top:"0px",zIndex:"3001"},onClick:c}))}function Ca(e){return(Ca="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ka(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wa(e){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oa(e,t){return(Oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xa=function(e){function t(e){var a,n,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=wa(t).call(this,e),a=!r||"object"!==Ca(r)&&"function"!==typeof r?Da(n):r,o=Da(a),c=function(){var e=a.props.handlers.handleHideTagListMask;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)},(i="hideMask")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,a.state={showMask:!0},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oa(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this.state.showMask,t=this.props.state,a=t.TagGroupInfo,n=t.isShowTagListMask;if(!a||!n)return null;var r=a.MoreTagList;return r&&r.length?o.a.createElement("div",null,o.a.createElement("div",{className:"rour_opacitylay",onClick:this.hideMask}),o.a.createElement("div",{className:e?"rour_pop_box fadeInUp":"rour_pop_box fadeOutDown"},o.a.createElement("span",{className:"rour_pop_close",onClick:this.hideMask}),o.a.createElement("h1",{className:"rour_pop_title"},"\u670d\u52a1\u8bf4\u660e"),o.a.createElement("div",{className:"rour_pop_scoll"},o.a.createElement("div",{className:"rour_pop_padding"},o.a.createElement("ul",{className:"rour_service"},r.map(function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("h4",null,e.TagName),o.a.createElement("p",null,e.Description))})))))):null}}])&&ka(a.prototype,n),r&&ka(a,r),t}();function Aa(e){return(Aa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ma(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ba(e,t){return(Ba=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ga=function(e){function t(e){var a,n,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=La(t).call(this,e),a=!r||"object"!==Aa(r)&&"function"!==typeof r?Ra(n):r,o=Ra(a),c=function(){var e=a.props.handlers.handleHidePriceTipMask;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)},(i="hideMask")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,a.state={showMask:!0},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ba(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this.state.showMask,t=this.props.state,a=t.PriceInfo;return t.isShowPriceTipMask&&a&&a.MinPriceRemark?o.a.createElement("div",null,o.a.createElement("div",{className:"rour_opacitylay",onClick:this.hideMask}),o.a.createElement("div",{className:e?"rour_pop_box fadeInUp":"rour_pop_box fadeOutDown"},o.a.createElement("span",{className:"rour_pop_close",onClick:this.hideMask}),o.a.createElement("h1",{className:"rour_pop_title"},"\u8d77\u4ef7\u8bf4\u660e"),o.a.createElement("div",{className:"rour_pop_scoll"},o.a.createElement("div",{className:"rour_pop_padding",dangerouslySetInnerHTML:{__html:a.MinPriceRemark}})))):null}}])&&Ma(a.prototype,n),r&&Ma(a,r),t}();function Ua(e){return(Ua="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ha(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ja(e){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(e,t){return(qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Va=function(e){function t(e){var a,n,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=ja(t).call(this,e),a=!r||"object"!==Ua(r)&&"function"!==typeof r?Fa(n):r,o=Fa(a),c=function(){var e=a.props.handlers.handleHidePreferredMask;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)},(i="hideMask")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,a.state={showMask:!0},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qa(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this.state.showMask;return this.props.state.isShowPreferredMask?o.a.createElement("div",null,o.a.createElement("div",{className:"rour_opacitylay",onClick:this.hideMask}),o.a.createElement("div",{className:e?"rour_quality_box fadeInUp":"rour_quality_box fadeOutDown"},o.a.createElement("p",{className:"rour_quality_bg"},o.a.createElement("img",{src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/index/bg.png"})),o.a.createElement("span",{className:"rour_coupon_close",onClick:this.hideMask}),o.a.createElement("div",{className:"rour_quality_title"},o.a.createElement("p",{className:"rour_quality_icon"},o.a.createElement("img",{src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/index/logo2.png"})),o.a.createElement("span",{className:"rour_quality_text"},"\u4e25\u9009\u66f4\u9ad8\u54c1\u8d28\u3001\u66f4\u4f18\u670d\u52a1\u7684\u4ea7\u54c1")),o.a.createElement("div",{className:"rour_quality_scoll"},o.a.createElement("div",{className:"rour_quality_padding"},o.a.createElement("div",{className:"rour_quality_item"},o.a.createElement("i",{className:"rour_quality_icon01"}),o.a.createElement("div",{className:"rour_quality_content"},o.a.createElement("p",{className:"rour_quality_bold"},"\u5b98\u65b9\u4e25\u9009\uff0c\u4f18\u8d28\u4ea7\u54c1"),o.a.createElement("p",{className:"rour_quality_bd"},"\u60a8\u9884\u8ba2\u7684\u4f18\u9009\u4ea7\u54c1\u7ecf\u8fc7\u76ee\u7684\u5730\u4e13\u5bb6\u5c42\u5c42\u4e25\u9009\uff0c\u53ea\u4e3a\u5e26\u7ed9\u60a8\u66f4\u597d\u7684\u51fa\u6e38\u4f53\u9a8c\u3002"))),o.a.createElement("div",{className:"rour_quality_item"},o.a.createElement("i",{className:"rour_quality_icon02"}),o.a.createElement("div",{className:"rour_quality_content"},o.a.createElement("p",{className:"rour_quality_bold"},"\u54c1\u8d28\u7eaf\u73a9\uff0c\u65e0\u8d2d\u7269"),o.a.createElement("p",{className:"rour_quality_bd"},"\u4f18\u9009\u4ea7\u54c1\u4fdd\u8bc1\u5168\u7a0b\u4e0d\u5b89\u6392\u8d2d\u7269\u5e97\uff08DFS\u3001\u8001\u4f5b\u7237\u5168\u7403\u77e5\u540d\u767e\u8d27\u53ca\u666f\u533a\u666f\u70b9\u7b49\u975e\u643a\u7a0b\u5546\u5bb6\u7ec4\u7ec7\u7684\u8d2d\u7269\u4e0d\u5305\u62ec\u5728\u5185\uff09\uff0c\u65e0\u4efb\u4f55\u8d2d\u7269\u5f3a\u5236\u6d88\u8d39\u3002"))),o.a.createElement("div",{className:"rour_quality_item"},o.a.createElement("i",{className:"rour_quality_icon03"}),o.a.createElement("div",{className:"rour_quality_content"},o.a.createElement("p",{className:"rour_quality_bold"},"\u6210\u56e2\u4fdd\u969c"),o.a.createElement("p",{className:"rour_quality_bd"},"\u4f18\u9009\u4ea7\u54c1\u9884\u8ba2\u6210\u529f\u540e\u5747\u9ed8\u8ba4\u6210\u56e2\uff0c\u9664\u4e0d\u53ef\u6297\u529b\u56e0\u7d20\u5916\u5747\u53ef\u53d1\u56e2\u3002"))),o.a.createElement("div",{className:"rour_quality_item"},o.a.createElement("i",{className:"rour_quality_icon04"}),o.a.createElement("div",{className:"rour_quality_content"},o.a.createElement("p",{className:"rour_quality_bold"},"\u6bcf\u56e2\u6700\u591a30\u4eba"),o.a.createElement("p",{className:"rour_quality_bd"},"\u4f18\u9009\u4ea7\u54c1\u544a\u522b\u4f20\u7edf\u5927\u56e2\u7684\u62e5\u6324\u4e0e\u7b49\u5f85\uff0c\u4eab\u53d7\u66f4\u7cbe\u81f4\u7684\u8ddf\u56e2\u670d\u52a1\u3002\u79c1\u5bb6\u56e2\u4e00\u5355\u4e00\u56e2\uff0c\u975e\u79c1\u5bb6\u56e2\u7684\u6bcf\u56e2\u4eba\u6570\u4e0d\u8d85\u8fc7\u9884\u8ba2\u987b\u77e5\u4e2d\u62ab\u9732\u7684\u4eba\u6570\uff0c\u8be5\u4eba\u6570\u542b\u5360\u5ea7\u513f\u7ae5\u3002"))),o.a.createElement("div",{className:"rour_quality_item"},o.a.createElement("i",{className:"rour_quality_icon05"}),o.a.createElement("div",{className:"rour_quality_content"},o.a.createElement("p",{className:"rour_quality_bold"},"\u4f4f\u5bbf\u5168\u900f\u660e"),o.a.createElement("p",{className:"rour_quality_bd"},"\u7cbe\u9009\u9152\u5e97\uff0c\u884c\u7a0b\u6bcf\u665a\u9152\u5e97\u7684\u62ab\u9732\u6570\u4e0d\u8d85\u8fc73\u5bb6\uff0c\u884c\u7a0b\u4e2d\u9152\u5e97\u5b89\u6392\u66f4\u660e\u786e\u3002"))))))):null}}])&&Ha(a.prototype,n),r&&Ha(a,r),t}();function Wa(e){var t=e.state,a=e.handlers,n=t.RankingInfo,r=t.actionIdSuffix,i=t.BasicInfo,c=a.handleGoTopList;if(!n)return null;var s=n.patternType,l=n.dest,u=n.startCityId,d=n.destId,m=n.poiType,p=["\u8ddf\u56e2\u6e38","\u76ee\u7684\u5730\u53c2\u56e2"][s-1],f={productId:i.ProductId,departCityId:u,destCityId:d,patternType:s,destCityName:l,poiType:m};return o.a.createElement("div",{id:"".concat(r,"-info-entry"),className:"tour_top_box bst_hide",onClick:function(){c(f)}},o.a.createElement("span",{className:"tour_top_icon"}),o.a.createElement("p",{className:"tour_top_text"},"\u5165\u9009",o.a.createElement("span",null,"\u300c",l,"\xb7",p,"\u300d"),"\u7684\u4eba\u6c14\u4ea7\u54c1"))}function Ka(e){return(Ka="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ja(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ya(e){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function za(e,t){return(za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $a=function(e){function t(e){var a,n,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=Ya(t).call(this,e),a=!r||"object"!==Ka(r)&&"function"!==typeof r?Qa(n):r,o=Qa(a),c=function(){var e=a.props.handlers.handleHideAdvisorMask;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)},(i="hideMask")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,a.state={showMask:!0},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&za(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this.state.showMask,t=this.props.state,a=t.isShowAdvisorMask,n=t.IMEntryInfo,r=void 0===n?{}:n,i=t.IMParams,c=t.actionIdSuffix,s=t.BasicInfo,l=this.props.handlers.handleJumpIM,u=r.ProductId,d=r.MobileServiceTime,m=r.AfterSaleServiceTime,p=r.Mobile,f=r.MobileCode,h=r.AfterSaleTel,_=r.AfterSaleExtTel,v=p;f&&(v="".concat(p,",").concat(f)),v=String(v).split("-").join("");var g=h;f&&(g="".concat(h,",").concat(_)),g=String(g).split("-").join("");var y=s&&"R"!==s.SaleMode&&s.TravelDays>=4;return o.a.createElement("div",{className:a?"wish-pop-full":"wish-pop-full hidden"},o.a.createElement("div",{className:"wish-close-mask",onClick:this.hideMask}),o.a.createElement("div",{className:e?"wish-pop-layout Wish_fadeInUps":"wish-pop-layout Wish_fadeOutDowns"},o.a.createElement("div",{className:"wish-pop-white"},o.a.createElement("div",{className:"wish-pop-hd"},o.a.createElement("p",{className:"wish-text"},"\u54a8\u8be2"),o.a.createElement("span",{className:"wish_pop_close",id:"".concat(c,"-popups-close"),onClick:this.hideMask})),o.a.createElement("div",{className:"wish-pop-bd"},i&&o.a.createElement("p",{className:"wish-pop-title"},o.a.createElement("i",null),"\u8054\u7cfb\u5728\u7ebf\u5ba2\u670d"),i&&o.a.createElement("div",{className:"wish-phone-advise"},o.a.createElement("div",{className:"wish-phone-item"},o.a.createElement("div",{className:"wish-item-left"},o.a.createElement("p",{className:"wish-item-text"},o.a.createElement("i",{className:"wish-time-text"}),"\u670d\u52a1\u65f6\u95f4 8:00-23:00"),o.a.createElement("p",{className:"wish-item-text"},o.a.createElement("i",{className:"wish-test-icon"}),"\u643a\u7a0b\u5ba2\u670d\u4e13\u5458\u63d0\u4f9b\u5728\u7ebf\u670d\u52a1\uff0c\u89e3\u7b54\u5ea6\u5047\u76f8\u5173\u95ee\u9898")),o.a.createElement("span",{className:"wish-item-right",id:"".concat(c,"-popups-IM"),onClick:function(){l(i)}},o.a.createElement("i",{className:"wish-qq-icon"})))),o.a.createElement("p",{className:"wish-pop-title"},o.a.createElement("i",null),"\u62e8\u6253\u5ba2\u670d\u7535\u8bdd"),o.a.createElement("div",{className:"wish-phone-advise"},p&&o.a.createElement("div",{className:"wish-phone-item"},o.a.createElement("div",{className:"wish-item-left"},o.a.createElement("p",{className:"tour-wish-item-title"},"\u552e\u524d\u54a8\u8be2",o.a.createElement("span",{className:"tour-wish-title-span"},"\u670d\u52a1\u65f6\u95f4 ",d)),o.a.createElement("p",{className:"wish-item-text"},o.a.createElement("i",{className:"wish-test-icon"}),"\u7535\u8bdd\u63a5\u901a\u540e\uff0c\u8bf7\u544a\u77e5\u5ba2\u670d\u4ea7\u54c1\u7f16\u53f7:",o.a.createElement("span",{className:"wish-test-black"},u))),o.a.createElement("a",{className:"wish-item-right",href:"tel:".concat(v),id:"".concat(c,"-popups-tel-\u552e\u524d")},o.a.createElement("i",{className:"wish-phone-icon"}))),h&&o.a.createElement("div",{className:"wish-phone-item"},o.a.createElement("div",{className:"wish-item-left"},o.a.createElement("p",{className:"tour-wish-item-title"},"\u552e\u540e\u54a8\u8be2",o.a.createElement("span",{className:"tour-wish-title-span"},"\u670d\u52a1\u65f6\u95f4 ",m)),o.a.createElement("p",{className:"wish-item-text"},o.a.createElement("i",{className:"wish-test-icon"}),"\u5982\u60a8\u8ba2\u5355\u5df2\u63d0\u4ea4\uff0c\u53ef\u8054\u7cfb\u552e\u540e\u5ba2\u670d\u67e5\u8be2\u53ca\u4fee\u6539")),o.a.createElement("a",{className:"wish-item-right",href:"tel:".concat(g),id:"".concat(c,"-popups-tel-\u552e\u540e")},o.a.createElement("i",{className:"wish-phone-icon"})))),y&&o.a.createElement("p",{className:"wish-pop-title"},o.a.createElement("i",null),"\u9884\u7ea6\u76ee\u7684\u5730\u4e13\u5bb6"),y&&o.a.createElement("div",{className:"wish-phone-advise"},o.a.createElement(Xa,{state:this.props.state,handlers:this.props.handlers}))))))}}])&&Ja(a.prototype,n),r&&Ja(a,r),t}();function Xa(e){var t=e.state,a=e.handlers,n=t.BasicInfo,r=t.isProposalOrderTexted,i=t.proposalOrderInfo,c=t.countryInfo,s=t.actionIdSuffix,l=a.handleShowProposalOrderMask;if(!n||n.TravelDays<4)return null;if(!/^(1|3|4)$/.test(n.ProductPatternId)||!/^(9|10|11|26)$/.test(n.ProductCategoryId))return null;if(r){var u=i.phoneInput.length>=11?i.phoneInput.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):i.phoneInput;return o.a.createElement("div",{className:"wish-phone-item wish-succeed-box"},o.a.createElement("div",{className:"wish-item-left"},o.a.createElement("p",{className:"wish-item-title"},o.a.createElement("i",{className:"wish-succeed-icon"}),"\u9884\u7ea6\u6210\u529f"),o.a.createElement("p",{className:"wish-sucess-text"},i.nameInput," | +",c.code,"-",u," | \xa0",i.textInput)),o.a.createElement("span",{className:"wish-item-right",onClick:l},o.a.createElement("i",{className:"wish-time-icon"})))}return o.a.createElement("div",{className:"wish-phone-item"},o.a.createElement("div",{className:"wish-item-left"},o.a.createElement("p",{className:"wish-item-text"},o.a.createElement("i",{className:"wish-time-text"}),"\u670d\u52a1\u65f6\u95f4 \u5de5\u4f5c\u65e5\u5168\u5929"),o.a.createElement("p",{className:"wish-item-text"},o.a.createElement("i",{className:"wish-test-icon"}),"\u9009\u54c1\u6709\u56f0\u96be\uff1f\u9884\u7ea6\u4e13\u5bb6\u5e2e\u6211\u8ba2")),o.a.createElement("span",{className:"wish-item-right",id:"".concat(s,"-popups-order"),onClick:l},o.a.createElement("i",{className:"wish-time-icon"})))}function Za(e){return(Za="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(l){return void a(l)}c.done?t(s):Promise.resolve(s).then(n,r)}function tn(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function i(e){en(o,n,r,i,c,"next",e)}function c(e){en(o,n,r,i,c,"throw",e)}i(void 0)})}}function an(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var sn=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=nn(t).call(this,e),a=!r||"object"!==Za(r)&&"function"!==typeof r?rn(n):r,cn(rn(a),"handleChange",function(e,t){var n,r=e.target.value.slice(0,100);a.setState((cn(n={},"".concat(t,"Input"),r),cn(n,"".concat(t,"Warning"),!1),n))}),cn(rn(a),"handleConfirm",tn(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.nameInput,r=t.phoneInput,o=t.textInput,i=t.nameWarning,c=t.phoneWarning,s=a.props.handlers.handleSubmitProposalOrder,l=a.props.state.countryInfo.code,n||(i=!0),r&&/^[0-9]*$/.test(r)||(c=!0),86===Number(l)&&11!==r.length&&(c=!0),a.setState({nameWarning:i,phoneWarning:c}),!(!i&&!c)){e.next=13;break}return e.next=11,s(n,r,o);case 11:e.sent&&a.hideMask();case 13:case"end":return e.stop()}},e)}))),cn(rn(a),"hideMask",function(){var e=a.props.handlers.handleHideProposalOrderMask;a.setState({showMask:!1}),setTimeout(function(){a.setState({showMask:!0}),e()},150)}),a.state={showMask:!0,nameInput:"",phoneInput:"",textInput:"",nameWarning:!1,phoneWarning:!1},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(t,o.a.Component),a=t,(n=[{key:"componentDidMount",value:function(){var e=this.props.state,t=e.commonUserInfo,a=e.orderPreInfo,n=e.proposalOrderInfo||a;if(n)this.setState({nameInput:n.nameInput||"",phoneInput:n.phoneInput||"",textInput:n.textInput||""});else if(t){if("86"!==t.CountryCodeForeign)return;this.setState({nameInput:t.ContactName||"",phoneInput:t.Moblie||""})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.showMask,n=t.nameInput,r=t.phoneInput,i=t.textInput,c=t.nameWarning,s=t.phoneWarning,l=this.props.state,u=l.isShowProposalOrderMask,d=l.countryInfo,m=l.actionIdSuffix,p=this.props.handlers.handleGoSelectPhoneCode;return o.a.createElement("div",{className:u?"wish-pop-full":"wish-pop-full hidden"},o.a.createElement("div",{className:"wish-close-mask",onClick:this.hideMask}),o.a.createElement("div",{className:a?"wish-pop-layout Wish_fadeInUps":"wish-pop-layout Wish_fadeOutDowns"},o.a.createElement("div",{className:"wish-pop-white"},o.a.createElement("div",{className:"wish-pop-hd"},o.a.createElement("span",{className:"wish_btn_cancel",onClick:this.hideMask},"\u53d6\u6d88"),o.a.createElement("p",{className:"wish-text"},"\u9884\u7ea6\u4e13\u5bb6"),o.a.createElement("span",{className:"wish_pop_submit",id:"".concat(m,"-popups-submit"),onClick:function(){e.handleConfirm()}},"\u63d0\u4ea4")),o.a.createElement("div",{className:"wish-pop-bd"},o.a.createElement("div",{className:"wish-pop-form"},o.a.createElement("ul",{className:"wish-form-box"},o.a.createElement("li",null,o.a.createElement("span",{className:"wish-form-title"},"\u59d3\u540d"),o.a.createElement("input",{className:"wish-form-input",type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u59d3\u540d",value:n,onChange:function(t){e.handleChange(t,"name")}}),c&&o.a.createElement("p",{className:"wish-form-error"},"\u8bf7\u586b\u5199\u8054\u7cfb\u4eba\u59d3\u540d")),o.a.createElement("li",null,o.a.createElement("span",{className:"wish-form-title"},"\u624b\u673a\u53f7\u7801"),o.a.createElement("div",{className:"wish-form-content"},o.a.createElement("span",{className:"wish-form-prefix",onClick:function(){return p(n,r,i)}},"+",d.code,o.a.createElement("i",{className:"wish-form-pull"})),o.a.createElement("input",{className:"wish-form-input",type:"text",placeholder:"\u8bf7\u586b\u5199\u60a8\u7684\u624b\u673a\u53f7\u7801",value:r,onChange:function(t){e.handleChange(t,"phone")}}),s&&o.a.createElement("p",{className:"wish-form-error"},"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"))),o.a.createElement("li",null,o.a.createElement("span",{className:"wish-form-title"},"\u5176\u4ed6\u9700\u6c42"),o.a.createElement("textarea",{className:"wish-form-textarea",placeholder:"\u9009\u586b\uff0c\u5982\u60a8\u5bf9\u51fa\u884c\u7684\u7279\u6b8a\u9700\u6c42\u7b49",value:i,onChange:function(t){e.handleChange(t,"text")}}))))))))}}])&&an(a.prototype,n),r&&an(a,r),t}();function ln(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.ShopInfo,i=t.actionIdSuffix,c=t.BasicInfo,s=t.ShopEntryInfo,l=void 0===s?{}:s,u=t.isShowBrandCouponTip,d=a.handleGoShopDetail;if(n.isDiyfhxsdp||n.isStudy)return null;if(!r||!r.brandScoreInfo||!l.isShowEntry)return null;if("G"===c.SaleMode)return null;var m=r.brandScoreInfo,p=m.brandName,f=m.providerName,h=m.totalScore,_=m.serviceDestinationName,v=m.customersCount,g=m.storeEvaluation,y=void 0===g?{}:g;h=h.toString().length>3?h.toString().slice(0,3):h.toFixed(1);var E="\u65b0\u5e97\u94fa"===v,S={pkgid:c.ProductId};return o.a.createElement("div",{className:"tour_supplier_box bst_hide scroll_expose_dom","data-expose-key":"grp_detail_shop_entry_expo","data-trace-value":JSON.stringify(S),id:"".concat(i,"-shop-entry"),onClick:function(){d()}},o.a.createElement("p",{className:"tour_supplier_title"},o.a.createElement("i",null),p,f&&"\u643a\u7a0b\u81ea\u8425"!==f&&"\uff08".concat(f,"\uff09"),u?o.a.createElement("span",{className:"tour_supplier_img"}):o.a.createElement("span",{className:"tour_supplier_all"},"\u8fdb\u5165\u5e97\u94fa")),o.a.createElement("div",{className:"tour_supplier_item_box clearfix"},h>0&&o.a.createElement("div",{className:"tour_supplier_item"},o.a.createElement("div",{className:"tour_supplier_grade_box"},o.a.createElement("span",{className:"tour_supplier_grade"},h),o.a.createElement("div",{className:"tour_supplier_grade_bg"},o.a.createElement("div",{className:"tour_supplier_grade_con",style:{width:h/5*100+"%"}},o.a.createElement("i",{className:["","tour_supplier_grade_best","tour_supplier_grade_good","tour_supplier_grade_bad"][y.storeEvaluationLevel]})))),o.a.createElement("p",{className:"tour_supplier_content"},"\u5546\u5bb6\u5728",o.a.createElement("span",null,_),"\u7684\u7efc\u5408\u5f97\u5206")),v&&o.a.createElement("div",{className:"tour_supplier_item"},o.a.createElement("p",{className:"tour_supplier_tip"},v),o.a.createElement("p",{className:"tour_supplier_content"},E?"\u643a\u7a0b\u65b0\u4f19\u4f34":"\u7d2f\u8ba1\u670d\u52a1\u4eba\u6570"))))}var un=a(61);function dn(e){var t=e.state,a=e.handlers,n=t.isShowCreditInfoMask,r=a.handleHideCreditInfoMask,i=o.a.createElement("div",{className:"rour_pop_scoll"},o.a.createElement("div",{className:"to_spend_padding"},o.a.createElement("ul",{className:"to_spend_box"},o.a.createElement("li",null,"\u62ff\u53bb\u82b1\u662f\u643a\u7a0b\u643a\u7a0b\u65c5\u884c\u7f51\u63a8\u51fa\u7684\u65b0\u578b\u91d1\u878d\u670d\u52a1\uff0c\u5f00\u901a\u62ff\u53bb\u82b1\u540e\u53ef\u4ee5\u4f7f\u7528\u4fe1\u7528\u989d\u5ea6\u5728\u643a\u7a0b\u65c5\u884c\u7f51\u5b9e\u73b0\u201c\u5148\u51fa\u884c\u540e\u4ed8\u6b3e\u201d\u3002"),o.a.createElement("li",null,"\u4f7f\u7528\u62ff\u53bb\u82b1\u652f\u4ed8\uff0c\u53ef\u4eab\u6700\u957f",o.a.createElement("i",{className:"red"},"40\u5929\u514d\u606f\uff0c3\u671f\u30016\u671f\u30019\u671f\u300112\u671f\u7075\u6d3b\u5206\u671f"),"\uff0c\u8d85\u4f4e\u8d39\u7387\u3002"),o.a.createElement("li",null,"\u4ed8\u6b3e\u9875\u53ef\u76f4\u63a5\u5f00\u901a\uff0c\u8fd8\u6709\u66f4\u591a\u60ca\u559c\u514d\u606f\u6d3b\u52a8\u7b49\u4f60\u53c2\u4e0e\u3002"))));return o.a.createElement(un.a,{maskClass:"vcm-pop-full",layerClass:"vcm-close-mask",boxClass:"vcm-pop-layout",boxContentClass:"rour_pop_box02",titleClass:!1,contentClass:!1,onShowClass:"fadeInUp",onHideClass:"fadeOutDown",title:function(e){var t=e.handleMaskClose;return[o.a.createElement("span",{className:"rour_pop_close",key:"CLOSE_BTN",onClick:t}),o.a.createElement("h1",{className:"rour_pop_title",key:"TITLE"},"\u62ff\u53bb\u82b1")]},content:i,open:n,closeButton:"",onClose:r,hideTimeout:200})}function mn(e){return(mn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vn=function(e){function t(e){var a,n,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=fn(t).call(this,e),a=!r||"object"!==mn(r)&&"function"!==typeof r?hn(n):r,o=hn(a),c=function(){var e=a.props.handlers.handleHideProductSummaryMask;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)},(i="hideMask")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,a.state={showMask:!0},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this.state.showMask,t=this.props.state,a=t.isShowProductSummaryMask,n=t.currentRouteInfo;if(!a)return null;var r=n.TravelOverviewInfo,i=n.FlightInfo;return o.a.createElement("div",null,o.a.createElement("div",{className:"rour_opacitylay",onClick:this.hideMask}),o.a.createElement("div",{className:e?"rour_pop_box fadeInUp":"rour_pop_box fadeOutDown"},o.a.createElement("span",{className:"rour_pop_close",onClick:this.hideMask}),o.a.createElement("h1",{className:"rour_pop_title"},"\u884c\u7a0b\u6982\u8981"),o.a.createElement("div",{className:"rour_pop_scoll"},o.a.createElement("div",{className:"rour_route_padding"},o.a.createElement("ul",{className:"rour_route_cont"},o.a.createElement(yn,{HotelRemark:r.HotelRemark}),o.a.createElement(gn,{ScenicTimes:r.ScenicTimes,ClassicScenicTimes:r.ClassicScenicTimes,ClassicScenicTagList:r.ClassicScenicTagList}),o.a.createElement(En,{NoCareDinnerTimes:r.NoCareDinnerTimes,CareDinnerTimes:r.CareDinnerTimes,TravelDinnerInfo:r.TravelDinnerInfo}),o.a.createElement(Sn,{FlightTimeLen:r.FlightTimeLen,IsDirectFlight:r.IsDirectFlight,FlightInfo:i}),o.a.createElement(In,{DriveTimeLen:r.DriveTimeLen}),o.a.createElement(bn,{ActivityTimes:r.ActivityTimes,ActivityTimeSpan:r.ActivityTimeSpan}),o.a.createElement(Tn,{ShopTimes:r.ShopTimes,ShopTimeLen:r.ShopTimeLen}))))))}}])&&pn(a.prototype,n),r&&pn(a,r),t}();function gn(e){var t=e.ScenicTimes,a=e.ClassicScenicTimes,n=e.ClassicScenicTagList;return t||a?o.a.createElement("li",null,o.a.createElement("h4",null,o.a.createElement("i",{className:"icon_scene"}),"\u666f\u70b9"),o.a.createElement("p",null,!!t&&"\u5171".concat(t,"\u4e2a"),!!a&&"\uff0c\u5176\u4e2d\u7ecf\u5178\u666f\u70b9".concat(a,"\u4e2a"),!!n.length&&"\uff08",n.map(function(e,t){return o.a.createElement("em",{key:t},e,t!==n.length-1&&"\uff0c")}),!!n.length&&"\uff09")):null}function yn(e){var t=e.HotelRemark;return t?o.a.createElement("li",null,o.a.createElement("h4",null,o.a.createElement("i",{className:"icon_stay"}),"\u4f4f\u5bbf"),o.a.createElement("p",null,t)):null}function En(e){var t=e.NoCareDinnerTimes,a=e.CareDinnerTimes,n=e.TravelDinnerInfo;if(!t&&!a)return null;var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=["\u65e9\u9910","\u5348\u9910","\u665a\u9910"],n=e.filter(function(e){return e.DinnerCareType===t})[0];if(!n)return"";var r=(n=n.DinnerTimeInfo.sort(function(e,t){return e.DinnerType-t.DinnerType})).map(function(e){return e.Times?"".concat(e.Times).concat(a[e.DinnerType-1]):""}).join(" ");return r=r.trimLeft()},i=r(n,1),c=r(n,2);return o.a.createElement("li",null,o.a.createElement("h4",null,o.a.createElement("i",{className:"icon_food"}),"\u7528\u9910"),!!a&&o.a.createElement("p",null,a,"\u6b21\u5305\u542b",c?"\uff1a".concat(c):""),!!t&&o.a.createElement("p",null,t,"\u6b21\u81ea\u7406",i?"\uff1a".concat(i):""))}function Sn(e){var t=e.FlightTimeLen,a=e.IsDirectFlight,n=e.FlightInfo;return t?o.a.createElement("li",null,o.a.createElement("h4",null,o.a.createElement("i",{className:"icon_flight"}),"\u822a\u73ed"),o.a.createElement("p",null,a?"\u76f4\u98de":"\u4e2d\u8f6c","\uff0c\u98de\u884c\u65f6\u95f4",t,"\u5c0f\u65f6")):n&&n.Count?o.a.createElement("li",null,o.a.createElement("h4",null,o.a.createElement("i",{className:"icon_flight"}),"\u822a\u73ed"),o.a.createElement("p",null,"\u53ef\u81ea\u9009\u822a\u73ed")):null}function In(e){var t=e.DriveTimeLen;return t?o.a.createElement("li",null,o.a.createElement("h4",null,o.a.createElement("i",{className:"icon_traffic"}),"\u7528\u8f66"),o.a.createElement("p",null,t,"\u5c0f\u65f6")):null}function bn(e){var t=e.ActivityTimes,a=e.ActivityTimeSpan;return t||a?o.a.createElement("li",null,o.a.createElement("h4",null,o.a.createElement("i",{className:"icon_swing"}),"\u81ea\u7531\u6d3b\u52a8"),o.a.createElement("p",null,t>0&&"".concat(t,"\u6b21"),t>0&&a>0&&" \uff0c",a>0&&"\u7ea6".concat(a,"\u5c0f\u65f6"))):null}function Tn(e){var t=e.ShopTimes,a=e.ShopTimeLen;return t||a?o.a.createElement("li",null,o.a.createElement("h4",null,o.a.createElement("i",{className:"icon_shopping"}),"\u8d2d\u7269"),o.a.createElement("p",null,t>0&&"".concat(t,"\u4e2a\u8d2d\u7269\u70b9"),t>0&&a>0&&" \uff0c",a>0&&"\u7ea6".concat(a,"\u5c0f\u65f6"))):null}function Nn(e){var t=e.state,a=e.handlers,n=t.OrderKnow,r=void 0===n?{}:n,i=a.handleGoBookingNote,c=r.DefaultInfo;return c?o.a.createElement("div",{className:"tour_break_box",id:"default_clause"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_break"}),"\u8fdd\u7ea6\u6761\u6b3e"),o.a.createElement(Pn,{DefaultInfo:c}),o.a.createElement("div",{className:"tour_m_right",onClick:function(){return i(1)}},"\u67e5\u770b\u5168\u90e8")):null}function Pn(e){var t=e.DefaultInfo,a=t.TravelerRuleType,n=t.TravelerTitle,r=t.TravellerDefaultList;return 0!==a?o.a.createElement("div",{className:"tour_break_content"},o.a.createElement("p",{className:"tour_title_shu"},"\u65c5\u6e38\u8005\u8fdd\u7ea6"),o.a.createElement("p",{className:"tour_break_title"},n),o.a.createElement("table",{className:"tour_break_table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u51fa\u884c\u524d"),o.a.createElement("th",null,"\u8fdd\u7ea6\u91d1(\u5360\u8ba2\u5355\u603b\u8d39\u7528)")),r.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.DateRange),o.a.createElement("td",null,e.LossVale))})))):null}function Cn(e){var t=e.state,a=e.handlers,n=t.OrderKnow,r=void 0===n?{}:n,i=a.handleGoBookingNote,c=r.OrderKnowList,s=r.ContractDesc;if(!c||!c.length)return null;var l=c.filter(function(e){return"\u9884\u8ba2\u9650\u5236"===e.Title})[0],u=l?l.DescList.slice(0,3):[];return u||s?o.a.createElement("div",{className:"tour_notice_box",id:"booking_note"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_notice"}),"\u9884\u8ba2\u987b\u77e5"),o.a.createElement("div",{className:"tour_notice_content"},o.a.createElement("ul",null,s&&o.a.createElement("li",null,s),u.map(function(e,t){return o.a.createElement("li",{key:t,dangerouslySetInnerHTML:{__html:e.Detail}})}))),o.a.createElement("div",{className:"tour_m_right",onClick:i},"\u67e5\u770b\u5168\u90e8")):null}function kn(e){var t=e.state,a=e.handlers,n=t.BasicInfo,r=t.Visa,i=a.handleGoVisa;if(!n)return null;var c=/11|12|26|34/.test(n.ProductCategoryId);if(!r||!c)return null;var s=r.VisaCountryList,l=r.MaterialUploadInfoList,u="\u7b7e\u8bc1";return 53===n.DestProvinceId&&(u="\u5165\u53f0\u8bc1"),[58,59].indexOf(n.DestCityId)>-1&&(u="\u7b7e\u6ce8"),o.a.createElement("div",{className:"tour_visa_box",id:"visa_info"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_visa"}),u),o.a.createElement("div",{className:"tour_description_content"},s.length>0&&o.a.createElement("div",null,o.a.createElement("ul",{className:"tour_description_ul"},s.map(function(e,t){return o.a.createElement("li",{key:t},e.Name)}))),o.a.createElement("p",{className:"tour_title_shu"},"\u6750\u6599\u9012\u4ea4"),o.a.createElement("div",{className:"tour_visa_content"},o.a.createElement("p",null,"\u8bf7\u4efb\u9009\u4ee5\u4e0b\u65b9\u5f0f\u63d0\u4ea4\u6750\u6599\uff0c\u7f51\u9875\u62ab\u9732\u7684\u622a\u6b62\u65e5\u671f\u4e3a\u6211\u53f8\u6536\u5230\u60a8\u6750\u6599\u7684\u65e5\u671f\uff1a"),l.map(function(e,t){return o.a.createElement("p",{key:t},t+1,"\u3001",e)}))),o.a.createElement("div",{className:"tour_m_right",onClick:i},"\u67e5\u770b\u5168\u90e8"))}function wn(e){var t=e.state,a=e.handlers,n=t.currentRouteInfo,r=a.handleRichTextClick;if(!n)return null;var i=n.CostInfoList;return i?o.a.createElement("div",{className:"tour_description_box",id:"cost_info"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_description"}),"\u8d39\u7528\u8bf4\u660e"),o.a.createElement("div",{className:"tour_description_content"},i.map(function(e,t){return o.a.createElement(Dn,{key:t,data:e,handleRichTextClick:r})}))):null}function Dn(e){var t=e.data,a=e.handleRichTextClick;return t&&t.InfrastructureInfoList&&t.InfrastructureInfoList.length?o.a.createElement("div",null,o.a.createElement("p",{className:"tour_title_shu"},t.Category,"\uff1a"),o.a.createElement("div",{className:"tour_description_table_box"},o.a.createElement("table",{className:"tour_description_table"},o.a.createElement("tbody",null,t.InfrastructureInfoList.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("th",null,e.Category),o.a.createElement("td",null,e.Items.map(function(e,t){return o.a.createElement("p",{key:t,dangerouslySetInnerHTML:{__html:e},onClick:a})})))}))))):null}function On(e){var t=e.state,a=(e.handlers,t.PMRecomendInfo),n=void 0===a?{}:a;if(!n)return null;var r=n.RecommendList,i=void 0===r?[]:r;if(!i||!i.length)return null;var c=i.slice(0,3);return o.a.createElement("div",{className:"tour_points_box",id:"product_selling_points"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_points"}),"\u4ea7\u54c1\u5356\u70b9"),o.a.createElement("div",{className:"tour_points_content"},c.map(function(e,t){var a=e.DescDetail.replace(/<(\/?)(?!br).*?>/gi,"");return o.a.createElement("div",{key:t},e.RecommendTag&&o.a.createElement("p",{className:"tour_points_title"},o.a.createElement("span",null,e.RecommendTag)),o.a.createElement("p",{className:"tour_points_text",dangerouslySetInnerHTML:{__html:a}}))})))}function xn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function An(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Mn={1:"\u6709\u7ebf\u4e0a\u7f51",2:"\u63d0\u4f9bWIFI",3:"\u505c\u8f66\u573a",4:"\u9910\u5385",5:"\u6e38\u6cf3\u6c60",6:"\u5065\u8eab\u623f",11:"\u884c\u674e\u5bc4\u5b58",18:"\u5439\u98ce\u673a",19:"\u53eb\u9192\u670d\u52a1",20:"\u65e0\u70df\u623f"};function Ln(e){var t=e.state,a=e.handlers,n=t.currentRouteInfo,r=t.actionIdSuffix,i=t.BasicInfo,c=t.screenWidth,s=a.handleGoHotel,l=a.handleWebviewHorizontalScrollStart,u=a.handleWebviewHorizontalScrollEnd;if(!n)return null;var d=n.TravelDetailList;if(!d||!d.length)return null;var m=d.filter(function(e){return e.hotelList[0]}).map(function(e){return e.hotelList[0].HotelInfoList.map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){An(e,t,a[t])})}return e}({},t,{FewDay:e.FewDay})})}).reduce(function(e,t){return[].concat(xn(e),xn(t))},[]).filter(function(e){return e.HotelID>0}),p=[],h=[];return m.forEach(function(e){-1===p.indexOf(e.HotelID)&&(h.push(e),p.push(e.HotelID))}),h.length?o.a.createElement("div",{className:"tour_hotel_box",id:"hotel_info"},o.a.createElement("p",{className:"tour_title_box"},o.a.createElement("i",{className:"tour_titleicon_hotel"}),"\u53c2\u8003\u9152\u5e97"),o.a.createElement("div",{className:"tour_hotel_contnet"},o.a.createElement("p",{className:"tour_hotel_tip"},o.a.createElement("i",null),"\u4ee5\u4e0b\u9152\u5e97\u4fe1\u606f\u9700\u5728\u9884\u8ba2\u5b8c\u6210\u540e\u518d\u6b21\u786e\u8ba4"),o.a.createElement("div",{className:"tour_hotel_box_cont"},o.a.createElement("div",{className:"tour_hotel_box_list"},o.a.createElement("ul",{style:{width:c}},o.a.createElement(f.a,{options:{scrollX:!0,eventPassthrough:"vertical"},customStyle:{width:"".concat(345*h.length,"px")},handleScrollStart:l,handleTouchEnd:u},h.map(function(e){var t=e.HotelID,a=e.HotelImgUrl,n=e.HotelName,c=e.CommentScore,l=e.Star,u=e.HotelType,d=e.HotelBelong,m=e.FacilityInfoList,p=e.FewDay;return o.a.createElement("li",{id:"".concat(r,"-route-hotel-").concat(i.ProductId),key:t,onClick:function(){s({id:t,day:p})}},o.a.createElement("div",{className:"tour_hotel_content"},o.a.createElement("p",{className:"tour_hotel_img"},o.a.createElement("img",{src:a})),o.a.createElement("div",{className:"tour_hotel_right"},o.a.createElement("p",{className:"tour_hotel_right_title"},n,o.a.createElement("i",{className:"tour_hotel_right_zhuan0".concat(l)})),o.a.createElement("p",{className:"tour_hotel_right_nb"},c>0&&o.a.createElement("span",{className:"tour_blue"},c,"\u5206"),u,d&&"\u4e28".concat(d)),m&&o.a.createElement("div",{className:"tour_hotel_icon_box"},m.slice(0,2).map(function(e){return Mn[e]?o.a.createElement("i",{key:e,className:"tour_hotel_icon".concat(e)},Mn[e]):null}),o.a.createElement("i",{className:"tour_hotel_icon25"})))))}))))))):null}function Rn(e){var t=e.state,a=e.handlers,n=t.actionIdSuffix,r=t.BasicInfo,i=t.currentRouteInfo,c=t.isSimpleMode,s=a.handleRouteModeChange;return i&&i.TravelDetailList&&i.TravelDetailList.length?o.a.createElement("div",{id:"".concat(n,"-route-switch-").concat(r.ProductId,"-").concat(c?"\u8be6\u7ec6":"\u7b80\u5355")},o.a.createElement("div",{id:"route_switcher",className:"tour_index_book tour_addAnimate",style:{bottom:"211px",display:"none"},onClick:s},o.a.createElement("span",{className:"tour_index_book_img"},c?"\u8be6":"\u7b80"),o.a.createElement("span",{className:"tour_index_book_img02"},c?"\u8be6":"\u7b80")," \u70b9\u51fb\u5207\u6362",c?"\u8be6\u7ec6":"\u7b80\u5355","\u884c\u7a0b")):null}function Bn(e){var t=e.state,a=e.handlers,n=t.actionIdSuffix,r=t.BasicInfo,i=a.handleBackTop,c=a.handleShowCatalog;return r?o.a.createElement("div",{id:"fix_icon_container",style:{display:"none"}},o.a.createElement(Rn,{state:t,handlers:a}),o.a.createElement("div",{id:"fixed_button_container",className:"tour_corner_box",style:{bottom:"115px"}},o.a.createElement("div",{id:"".concat(n,"-bubble-procedure-").concat(r.ProductId),className:"tour_corner_border tour_catalogue",onClick:c}),o.a.createElement("div",{id:"".concat(n,"-mask-back"),className:"tour_corner_border tour_fan back_top",onClick:i}))):null}function Gn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Un(e){return(Un="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Wn=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=jn(t).call(this,e),a=!r||"object"!==Un(r)&&"function"!==typeof r?Fn(n):r,Vn(Fn(a),"hideMask",function(){var e=a.props.handlers.handleHideCatalog;a.setState({showMask:!1}),setTimeout(function(){e(),a.setState({showMask:!0})},150)}),Vn(Fn(a),"handleScrollToTargetContent",function(e){(0,a.props.handlers.handleScrollToTabContent)(e),a.hideMask()}),a.state={showMask:!0},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this,t=this.state.showMask,a=this.props.state,n=a.isShowCatalog,r=a.BasicInfo,i=a.PMRecomendInfo,c=void 0===i?{}:i,s=a.currentRouteInfo,l=void 0===s?{}:s,u=a.VendorRecommendInfo,d=a.Visa,m=a.OrderKnow,p=void 0===m?{}:m,f=a.actionIdSuffix;if(!n)return null;var h=c&&c.RecommendList&&c.RecommendList.length>0,_=l&&l.FlightInfo&&l.FlightInfo.FlightInfoItems,v=l&&l.DescriptionInfo,g=u&&u.ProductInfoList&&u.ProductInfoList.length>0&&1===u.ShowLocation,y=l&&l.TravelDetailList&&l.TravelDetailList.length>0,E=l&&l.CostInfoList&&l.CostInfoList.length>0,S=d&&/11|12|26|34/.test(r.ProductCategoryId),I=p&&p.DefaultInfo,b="\u7b7e\u8bc1";return 53===r.DestProvinceId&&(b="\u5165\u53f0\u8bc1"),[58,59].indexOf(r.DestCityId)>-1&&(b="\u7b7e\u6ce8"),o.a.createElement("div",{className:n?"wish-pop-full":"wish-pop-full hidden"},o.a.createElement("div",{className:"wish-close-mask",onClick:this.hideMask}),o.a.createElement("div",{className:t?"wish-pop-layout Wish_fadeInUps":"wish-pop-layout Wish_fadeOutDowns"},o.a.createElement("div",{className:"wish-pop-white"},o.a.createElement("div",{className:"wish-pop-hd"},o.a.createElement("p",{className:"wish-text"},"\u76ee\u5f55"),o.a.createElement("span",{className:"wish_pop_close",onClick:this.hideMask})),o.a.createElement("div",{className:"wish-pop-bd tour_pop_no_bottom"},o.a.createElement("div",{className:"tour_catalogue_box"},h&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-\u4ea7\u54c1\u5356\u70b9"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#product_selling_points")}},"\u4ea7\u54c1\u5356\u70b9"),_&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-\u53c2\u8003\u822a\u73ed"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#flight_info")}},"\u53c2\u8003\u822a\u73ed"),Kn(l)&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-\u53c2\u8003\u9152\u5e97"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#hotel_info")}},"\u53c2\u8003\u9152\u5e97"),v&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-\u4ea7\u54c1\u7279\u8272"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#product_feature")}},"\u4ea7\u54c1\u7279\u8272"),g&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-").concat("S"===r.SaleMode?"\u643a\u7a0b\u63a8\u8350":"\u5546\u5bb6\u63a8\u8350"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#vendor_recommend")}},"S"===r.SaleMode?"\u643a\u7a0b\u63a8\u8350":"\u5546\u5bb6\u63a8\u8350"),y&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-").concat(r.TravelDays,"\u65e5\u884c\u7a0b"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#product_route")}},r.TravelDays,"\u65e5\u884c\u7a0b"),E&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-\u8d39\u7528\u8bf4\u660e"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#cost_info")}},"\u8d39\u7528\u8bf4\u660e"),S&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-").concat(b),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#visa_info")}},b),Jn(p)&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-\u9884\u8ba2\u987b\u77e5"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#booking_note")}},"\u9884\u8ba2\u987b\u77e5"),I&&o.a.createElement("p",{id:"".concat(f,"-mask-procedure-").concat(r.ProductId,"-\u8fdd\u7ea6\u6761\u6b3e"),className:"tour_catalogue_text",onClick:function(){return e.handleScrollToTargetContent("#default_clause")}},"\u8fdd\u7ea6\u6761\u6b3e"))))))}}])&&Hn(a.prototype,n),r&&Hn(a,r),t}(),Kn=function(e){if(!e)return!1;var t=e.TravelDetailList;if(!t||!t.length)return!1;var a=t.filter(function(e){return e.hotelList[0]}).map(function(e){return e.hotelList[0].HotelInfoList}).reduce(function(e,t){return[].concat(Gn(e),Gn(t))},[]).filter(function(e){return e.HotelID}),n=[],r=[];return a.forEach(function(e){-1===n.indexOf(e.HotelID)&&(r.push(e),n.push(e.HotelID))}),r.length>0},Jn=function(e){var t=e.OrderKnowList;if(!t||!t.length)return!1;var a=t.filter(function(e){return"\u9884\u8ba2\u9650\u5236"===e.Title})[0];return!(!(a?a.DescList.slice(0,3):[])&&!ContractDesc)};function Yn(e){var t=e.state,a=e.handlers,n=t.BasicInfo,r=t.VendorRecommendInfo,i=t.actionIdSuffix,c=t.screenWidth,s=a.handleGoVendorRecommend,l=a.handleWebviewHorizontalScrollStart,u=a.handleWebviewHorizontalScrollEnd;if(!r)return null;var d=r.ProductInfoList,m=r.ShowLocation;return d&&d.length?o.a.createElement("div",{className:"tour_showcase_item",id:"vendor_recommend"},"S"===n.SaleMode?o.a.createElement("p",{className:"tour_showcase_title"},o.a.createElement("i",{className:"tour_showcase_ctr"}),"\u643a\u7a0b\u63a8\u8350"):o.a.createElement("p",{className:"tour_showcase_title"},o.a.createElement("i",{className:"tour_showcase_praise"}),"\u5546\u5bb6\u63a8\u8350"),o.a.createElement("div",{className:"tour_slide_box"},o.a.createElement("div",{className:"tour_slide_content clearfix",style:{width:c}},o.a.createElement(f.a,{options:{scrollX:!0,eventPassthrough:"vertical"},customStyle:{width:"".concat(172*d.length+15,"px")},handleScrollStart:l,handleTouchEnd:u},o.a.createElement("div",{className:"tour_slide_width"},d.map(function(e,t){var a=e.ProductId,r=e.productPatternName,c=e.Name,l=e.ImgUrl,u=e.Persons,d=e.TagGroup,p=e.MinPrice,f=e.Active,h={module_pos:m,pkgid:n.ProductId,recpkgid:a};return o.a.createElement("div",{key:a,id:"".concat(i,"-recommend-product-").concat(m,"-").concat(n.ProductId,"-").concat(a),className:f?"tour_slide_item scroll_expose_dom":"tour_slide_item tour_slide_sold_out scroll_expose_dom",onClick:f?function(){s(a)}:null,"data-expose-key":"grp_detail_recommendpkg_expo","data-trace-value":JSON.stringify(h)},o.a.createElement("div",{className:"tour_slide_pic"},o.a.createElement("p",{className:"tour_ad_sale"},o.a.createElement("span",{className:"tour_sale_one"},o.a.createElement("em",null,r))),o.a.createElement("img",{src:l}),!f&&o.a.createElement("p",{className:"tour_ad_sold"},o.a.createElement("i",null))),o.a.createElement("p",{className:"tour_slide_bg"},c),o.a.createElement("p",{className:"tour_product_tag"},d.RecDesc&&o.a.createElement("span",{className:"tour_product_tag_yellow"},d.RecDesc),d.SpecialTagList.map(function(e,t){return e.TagName?o.a.createElement("span",{key:t},e.TagName):null})),p>0?o.a.createElement("span",{className:"tour_discount_price"},o.a.createElement("dfn",null,"\xa5"),o.a.createElement("i",null,p),o.a.createElement("em",null,"\u8d77")):o.a.createElement("span",{className:"tour_discount_price"},o.a.createElement("i",null,"\u5b9e\u65f6\u8ba1\u4ef7")),u>0?o.a.createElement("span",{className:"tour_discount_nb"},u,"\u4eba\u51fa\u6e38"):o.a.createElement("span",{className:"tour_discount_nb"},"\u65b0\u4ea7\u54c1"))})))))):null}function Qn(e){return(Qn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e){var t=e.state,a=e.handlers,n=t.isShowScenesCouponMask,r=t.ScenesCoupon,i=t.actionIdSuffix,c=t.BasicInfo,s=a.handleHideScenesCouponMask,l=a.handleTakenScenesCoupon;if(!n||!r)return null;if(r.isTakeFail)return o.a.createElement("div",{className:"tour_coupon_flex"},o.a.createElement("div",{className:"tour_coupon_warp_z",onClick:s}),o.a.createElement("div",{className:"tour_coupon_box"},o.a.createElement("div",{className:"tour_coupon_nothing"},o.a.createElement("img",{src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/detail/tour_coupon_nothing_min.png"}),o.a.createElement("p",{className:"tour_coupon_nothing_text"},"\u54ce\u5440, ",o.a.createElement("br",null)," \u7ea2\u5305\u6e9c\u8d70\u5566~")),o.a.createElement("span",{className:"tour_coupon_close",onClick:s})));if(r.IsTaken){var u=r.StartTime,d=r.EndTime,m=r.DeductionList,p=r.Description,f=de.a.parse(u).format("YYYY.MM.DD"),h=de.a.parse(d).format("YYYY.MM.DD");return o.a.createElement("div",{className:"tour_coupon_flex"},o.a.createElement("div",{className:"tour_coupon_warp_z",onClick:s}),o.a.createElement("div",{className:"tour_coupon_box"},o.a.createElement("div",{className:"tour_coupon_content"},o.a.createElement("p",{className:"tour_coupon_title"},"\u606d\u559c\u60a8\u83b7\u5f97\u4f18\u60e0\u5238\uff01"),o.a.createElement("div",{className:"tour_coupon_height"},o.a.createElement("div",{className:"tour_coupon_scroll"},o.a.createElement("p",{className:"tour_coupon_time"},f,"-",h,"\u4e0b\u5355\u53ef\u7528"),o.a.createElement("div",{className:"tour_coupon_nb_box"},o.a.createElement("div",{className:"tour_coupon_nb"},m.map(function(e,t){return o.a.createElement("span",{key:t,className:"tour_coupon_price"},o.a.createElement("i",{className:"tour_coupon_price_man"},"\u6ee1",e.StartAmount),o.a.createElement("i",{className:"tour_coupon_price_jian"},"\u51cf",e.DeductionAmount))}))),o.a.createElement(tr,{Description:p}))),o.a.createElement("div",{className:"tour_coupon_bottom"},o.a.createElement("span",{className:"tour_coupon_use",onClick:s}),o.a.createElement("p",{className:"tour_coupon_see"},"\u53ef\u5230\u6211\u7684-\u4f18\u60e0\u5238\u4e2d\u67e5\u770b"))),o.a.createElement("span",{className:"tour_coupon_close",onClick:s})))}var _=r.BestDeduction,v=r.PromotionId,g=r.PromotionCode;return o.a.createElement("div",{className:"tour_coupon_flex"},o.a.createElement("div",{className:"tour_coupon_warp_z",onClick:s}),o.a.createElement("div",{className:"tour_coupon_box"},o.a.createElement("div",{className:"tour_coupon_content"},o.a.createElement("img",{className:"tour_coupon_tip",src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/detail/tour_coupon_tip_min.png"}),o.a.createElement("p",{className:"tour_coupon_title_icon"},o.a.createElement("img",{src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/detail/tour_coupon_text_min.png"})),o.a.createElement("div",{className:"tour_coupon_height"},o.a.createElement("div",{className:"tour_coupon_price_box"},o.a.createElement("p",{className:"tour_coupon_best"},o.a.createElement("img",{src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/detail/tour_coupon_best_min.png"})),o.a.createElement("span",{className:"tour_coupon_price_text"},o.a.createElement("i",null,"\xa5"),_))),o.a.createElement("div",{className:"tour_coupon_bottom"},o.a.createElement("span",{id:"".concat(i,"-popups-receive-").concat(c.ProductId,"-").concat(v),className:"tour_coupon_kai_icon",onClick:function(){return l(v,g)}}))),o.a.createElement("span",{className:"tour_coupon_close",onClick:s})))}var tr=function(e){function t(e){var a,n,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=$n(t).call(this,e),a=!r||"object"!==Qn(r)&&"function"!==typeof r?Xn(n):r,o=Xn(a),c=function(){a.setState({show:!a.state.show})},(i="handleToggle")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,a.state={show:!1},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,o.a.Component),a=t,(n=[{key:"render",value:function(){var e=this.state.show,t=this.props.Description;return o.a.createElement("div",null,o.a.createElement("p",{className:e?"tour_coupon_shuo tour_coupon_zhan":"tour_coupon_shuo",onClick:this.handleToggle},"\u4f7f\u7528\u8bf4\u660e"),e&&o.a.createElement("div",{className:"tour_coupon_text_box"},t))}}])&&zn(a.prototype,n),r&&zn(a,r),t}();function ar(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.actionIdSuffix,i=a.handleGoMiniProgramWaken;return n.isMiniProgramWaken?o.a.createElement("div",{id:"".concat(r,"-grp-button"),className:"go_app_wx",style:{bottom:"259px"},onClick:i}):null}function nr(e){var t=e.state,a=e.handlers,n=t.isShowShareTipMask,r=a.handleHideShareTipMask;return n?o.a.createElement("div",{className:"weixin_share_guide",onClick:r}):null}function rr(e){var t=e.state,a=e.handlers,n=t.pageStatus,r=t.MiniAppActivityIconInfo,i=t.actionIdSuffix,c=a.handleGoMiniProgramActivityPage;if(!n.isMiniProgramWaken||!r)return null;var s=r.show,l=r.imgUrl,u=r.linkUrl,d=r.needLogin;return s&&l?o.a.createElement("div",{id:"".concat(i,"-marketing-entry"),className:"weixin_r_img",style:{bottom:"304px"}},o.a.createElement("img",{src:l,onClick:function(){c(u,d)}})):null}function or(e){return o.a.createElement(s.a,null,o.a.createElement(c.Style,{name:"videocss"}),o.a.createElement(c.Style,{name:"detail_merge"}),o.a.createElement(c.Style,{name:"detail_tour2018"}),e.children)}function ir(e){var t=e.state,a=e.handlers,n=t.pageStatus;t.isIOSApp;return n.isNativeHybrid?o.a.createElement(or,null,o.a.createElement("div",{className:"body trip_page2"},o.a.createElement("div",{id:"product_route_container"},o.a.createElement(On,{state:t,handlers:a}),o.a.createElement(We,{state:t,handlers:a}),o.a.createElement(Ln,{state:t,handlers:a}),o.a.createElement(qe,{state:t,handlers:a}),o.a.createElement(Ue,{state:t,handlers:a}),!cr({state:t})&&o.a.createElement(Yn,{state:t,handlers:a}),o.a.createElement(kt,{state:t,handlers:a}),o.a.createElement(je,{state:t,handlers:a}),o.a.createElement(wn,{state:t,handlers:a}),o.a.createElement(kn,{state:t,handlers:a}),o.a.createElement(Cn,{state:t,handlers:a}),o.a.createElement(Nn,{state:t,handlers:a})),o.a.createElement(xt,{state:t,handlers:a}),o.a.createElement(wt,{state:t,handlers:a}),o.a.createElement(Dt,{state:t,handlers:a}),o.a.createElement(Lt,{state:t,handlers:a}),o.a.createElement(Rt,{state:t,handlers:a}),o.a.createElement(Bn,{state:t,handlers:a}),o.a.createElement(Wn,{state:t,handlers:a}))):o.a.createElement(or,null,o.a.createElement("div",{className:"body tour_detail_box"},o.a.createElement("div",{id:"product_basicInfo"},o.a.createElement(d,{state:t,handlers:a}),o.a.createElement(h,{state:t,handlers:a}),o.a.createElement(L,{state:t,handlers:a}),o.a.createElement(F,{state:t,handlers:a}),o.a.createElement(q,{state:t,handlers:a}),o.a.createElement(J,{state:t,handlers:a}),o.a.createElement(te,{state:t,handlers:a}),o.a.createElement(ne,{state:t,handlers:a}),o.a.createElement(oe,{state:t,handlers:a}),o.a.createElement(Wa,{state:t,handlers:a}),o.a.createElement(Ne,{state:t,handlers:a})),o.a.createElement(me,{state:t,handlers:a}),o.a.createElement(ln,{state:t,handlers:a}),cr({state:t})&&o.a.createElement(Yn,{state:t,handlers:a}),o.a.createElement(ce,{state:t,handlers:a}),o.a.createElement("div",{id:"product_route_container"},o.a.createElement(On,{state:t,handlers:a}),o.a.createElement(We,{state:t,handlers:a}),o.a.createElement(Ln,{state:t,handlers:a}),o.a.createElement(qe,{state:t,handlers:a}),o.a.createElement(Ue,{state:t,handlers:a}),!cr({state:t})&&o.a.createElement(Yn,{state:t,handlers:a}),o.a.createElement(kt,{state:t,handlers:a}),o.a.createElement(je,{state:t,handlers:a}),o.a.createElement(wn,{state:t,handlers:a}),o.a.createElement(kn,{state:t,handlers:a}),o.a.createElement(Cn,{state:t,handlers:a}),o.a.createElement(Nn,{state:t,handlers:a})),o.a.createElement(xt,{state:t,handlers:a}),o.a.createElement(wt,{state:t,handlers:a}),o.a.createElement(Dt,{state:t,handlers:a}),o.a.createElement(Lt,{state:t,handlers:a}),o.a.createElement(Rt,{state:t,handlers:a}),o.a.createElement(Bt,{state:t,handlers:a}),o.a.createElement(Wt,{state:t,handlers:a}),o.a.createElement(rr,{state:t,handlers:a}),o.a.createElement(ar,{state:t,handlers:a}),o.a.createElement(Bn,{state:t,handlers:a}),o.a.createElement(Wn,{state:t,handlers:a}),o.a.createElement(sa,{state:t,handlers:a}),o.a.createElement(ga,{state:t,handlers:a}),o.a.createElement(Na,{state:t,handlers:a}),o.a.createElement(Pa,{state:t,handlers:a}),o.a.createElement(xa,{state:t,handlers:a}),o.a.createElement(vn,{state:t,handlers:a}),o.a.createElement(Ga,{state:t,handlers:a}),o.a.createElement(Va,{state:t,handlers:a}),o.a.createElement($a,{state:t,handlers:a}),o.a.createElement(dn,{state:t,handlers:a}),o.a.createElement(er,{state:t,handlers:a}),o.a.createElement(nr,{state:t,handlers:a}),t.isShowProposalOrderMask&&o.a.createElement(sn,{state:t,handlers:a})))}var cr=function(e){var t=e.state.VendorRecommendInfo,a=void 0===t?{}:t;return!a||!a.ShowLocation},sr=a(17),lr=function(e){return{ChannelId:"",isTradeMinPriceMode:!1,isBestoneShare:"1"===e.isbestoneshare,isFavorite:!1,isShowRecommend:!1,isRole13:!1,isFromBST:/^bst$/i.test(e.sfrom),isMicroshop:!!e.vshopFrom,isRetailshop:"retailshop"===e.fromsign,isPrivileged:"privileged"==e.sharetype&&(!!e.activityid||!!e.vshopfrom),isBstMiniProgram:"bst_wxMini"===e.shelltype}},ur=function(e){var t=sr.a.DetailSchedule.getInstance().get()||{};return{specialCityIdList:[{name:"\u6df1\u5733",id:30},{name:"\u5e7f\u5dde",id:32},{name:"\u4e1c\u839e",id:223},{name:"\u4f5b\u5c71",id:251},{name:"\u60e0\u5dde",id:299},{name:"\u6c5f\u95e8",id:316},{name:"\u6c55\u5934",id:447},{name:"\u4e2d\u5c71",id:553},{name:"\u73e0\u6d77",id:31}],shouldShowHK:!1,shouldTips:!(!1===t.shouldTips),maxLen:10,currentCityName:e,previousCityName:t.previousCityName||"",DepartureCityList:[]}},dr=function(e){var t=e.Desc,a=e.FewDay,n=e.TrafficType,r=e.DailyList,o=[],i=[],c=[],s=[],l=[],u=[],d=[];return r&&r.forEach(function(e){if(d.push(e),9===e.ActiveType&&e.Desc&&u.push(e),8===e.ActiveType&&e.Desc&&u.push(e),2===e.ActiveType&&e.Desc&&o.push(e),(3===e.ActiveType&&e.ScenicSpotList.some(function(e){return e.Name||e.PreName||e.SuffixName})||/4|6|7|11/.test(e.ActiveType))&&c.push(e),12===e.ActiveType&&e.Desc&&s.push(e),0===e.ActiveType&&(e.DinnerInfo&&e.DinnerInfo.DinnerType||e.Desc)&&i.push(e),1===e.ActiveType){var t=e.HotelInfoList,a=e.Desc;(t.length&&t[0].HotelName||a)&&l.push(e)}}),{Desc:t,FewDay:a,TrafficType:n,otherList:[],trafficList:[],flightList:o,dinnerList:i,scenicList:c,themeList:s,hotelList:l,listByTime:u,orderList:d}},mr=a(8);function pr(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(l){return void a(l)}c.done?t(s):Promise.resolve(s).then(n,r)}function fr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){hr(e,t,a[t])})}return e}function hr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _r={ABTestResult:{},isCustomHeader:!0,isShowCouponMask:!1,isShowPromotionMask:!1,isShowCityMask:!1,isShowTagListMask:!1,isShowPriceTipMask:!1,isSimpleMode:!1,isCompared:!1,isShowPhonePop:!1,isShowVendorPhonePop:!1,isShowProductSummaryMask:!1,isShowPreferredMask:!1,isShowAdvisorMask:!1,isShowProposalOrderMask:!1,isProposalOrderTexted:!1,isShowCreditInfoMask:!1,isShowFavouriteMenu:!1,isShowCatalog:!1,isShowScenesCouponMask:!1,isShowShareTipMask:!1,isShowPlayVideoButtonMode:!1,isShowSwitchMediaMode:!1,isShowVideoPlayerContent:!1,isShowNetworkStatusContent:!1,hasVideo:!1,hasConfirmNetWork:!1,BasicInfo:null,MediaInfo:null,TagGroupInfo:null,multipleDepartureCityInfo:null,PMRecomendInfo:null,currentRouteInfo:null,CompositePromotionInfo:null,BookInfo:null,ScheduleInfo:null,countDownStatus:null,BasicExtendInfo:null,SDPSegmentInfo:null},vr=function(e,t){return fr({},e,t)},gr=function(e,t){return fr({},e,{pageStatus:fr({},e.pageStatus,{isFavorite:t})})},yr=function(e,t){return fr({},e,{isShowCouponMask:t})},Er=function(e,t){return fr({},e,{isShowPromotionMask:t})},Sr=function(e,t){return fr({},e,{isShowCityMask:t})},Ir=function(e,t){return fr({},e,{isShowTagListMask:t})},br=function(e,t){return fr({},e,{isShowPriceTipMask:t})},Tr=function(e,t){return fr({},e,{isShowProductSummaryMask:t})},Nr=function(e,t){return fr({},e,{isShowPreferredMask:t})},Pr=function(e){return fr({},e,{isSimpleMode:!e.isSimpleMode})},Cr=function(e,t){return fr({},e,{pageStatus:fr({},e.pageStatus,{isFavorite:t})})},kr=function(e,t){var a=e.couponItemList;return a=a.map(function(e){return e.PromotionId!==t?e:fr({},e,{IsTaken:!0})}),fr({},e,{couponItemList:a})},wr=function(e,t){return fr({},e,{isCompared:t})},Dr=function(e,t){return fr({},e,{compareListLength:t})},Or=function(e,t){var a=e.pageStatus,n=t.BasicInfo,r=t.MediaInfo,o={BasicInfo:n,MediaInfo:r,TagGroupInfo:t.TagGroupInfo},i=n.ProductId,c=2===n.ProductPatternId&&"s"===n.SaleMode.toLowerCase(),s=/33|34|41|42/.test(n.ProductCategoryId);a=fr({},a,{activeProductId:i,isDiyfhxsdp:2===n.ProductPatternId,isPureDiyfhxsdp:c,isThemeProduct:n.IsThemeProduct,isCruise:13===n.ProductCategoryId,isStudy:s,isRetail:"R"===n.SaleMode,isAgent:"P"===n.SaleMode,prodType:s?"stt":c?"diy":"grp"});var l=n.ProductCategoryId;a.isShowFirstDetail=!(9!=l&&10!=l&&11!=l&&26!=l&&!a.isStudy);var u=ur(n.DepartureCityName);return fr({},io(e,r),o,{pageStatus:a,multipleDepartureCityInfo:u})},xr=function(e,t){return fr({},e,{PMRecomendInfo:t.PMRecomendInfo,currentRouteInfo:{DescriptionInfo:t.DescriptionInfo}})},Ar=function(e,t){var a=e.pageStatus,n=t.BookInfo,r=t.ScheduleInfo,o=t.BasicExtendInfo,i=t.SegmentInfo,c=t.PriceInfo;a=fr({},a,{isBook:n.IsBook,isChildBook:!!n.IsChildBook,isSetCountDown:!!n.EffectTime&&-1===n.EffectTime.indexOf("-0000")});var s=null;if(r){if(a.isSetCountDown){s={SaleStartTime:de.a.transformTimeStamp(n.EffectTime),SaleEndTime:de.a.transformTimeStamp(n.ExpireTime),ServerTime:de.a.transformTimeStamp(r.ServiceDateTime)};var l=new Gt.a;l.getLocalTime(s),"end"===l.getTimerStatus()&&(a.isShowRecommend=!0)}n.IsBook&&r.HasInventory||(a.isShowRecommend=!0)}return delete r.ServiceDateTime,fr({},e,{pageStatus:a,BookInfo:n,ScheduleInfo:r,countDownStatus:s,BasicExtendInfo:o,PriceInfo:c,SDPSegmentInfo:i})},Mr=function(e,t){var a=e.pageStatus,n=e.query,r=e.BookInfo,o=t.TravelList&&t.TravelList.length>0?t.TravelList[0].Alias:"",i=!!t.TourGroupInfo.TourGroupProductInfo&&t.TourGroupInfo.TourGroupProductInfo.length>1;(a=fr({},a,{activeAlias:o,isLimitedSale:t.BasicExtendInfo.IsAudit,isMultiLine:i,isCanCompre:!!t.BasicExtendInfo&&t.BasicExtendInfo.IsCanCompre})).isProposalOrder=!a.isCruise&&!!t.IntentOrderInfo.IsProposalOrder,a.isMorePersonProposalOrder=!a.isCruise&&!!t.IntentOrderInfo.IsMorePersonProposalOrder,a.isPureDiyfhxsdp||a.isBeston||!a.isLimitedSale||e.TagGroupInfo.MarketingTagList.unshift({TagName:"\u7279\u5356\u6c47"}),a.isMultiTravel=!a.isMultiLine;var c={},s=null;if(a.isMultiLine)t.TourGroupInfo.TourGroupProductInfo.forEach(function(n){var o=["A","B","C","D","E","F","G","H","I","J"][n.SortNumber-1],i=n.Description,s=null,l=null,u=null;n.ProductId===a.activeProductId&&(s=t.DescriptionInfo,l=t.CostInfoList,u=t.FlightInfo);var d=n.ProductId===a.activeProductId?e.ScheduleInfo:null;c[n.ProductId]={isLoaded:n.ProductId===a.activeProductId,Alias:o,Name:i,DescriptionInfo:s,CostInfoList:l,FlightInfo:u,TravelOverviewInfo:null,TravelDetailList:null,ScheduleInfo:d,BookInfo:r}}),s=c[a.activeProductId];else if(a.isMultiTravel){(t.TravelList||[]).forEach(function(e){var a=e.Alias,n=e.Name,i=t.DescriptionInfo,s=t.CostInfoList,l=t.FlightInfo;c[e.Alias]={isLoaded:a===o,Alias:a,Name:n,DescriptionInfo:i,CostInfoList:s,FlightInfo:l,TravelOverviewInfo:null,TravelDetailList:null,BookInfo:r}}),o||(c[o="A"]={isLoaded:!0,Alias:o,Name:"",DescriptionInfo:t.DescriptionInfo,CostInfoList:t.CostInfoList,FlightInfo:t.FlightInfo,TravelOverviewInfo:null,TravelDetailList:null}),s=c[o]}var l={BasicExtendInfo:t.BasicExtendInfo,TourGroupInfo:t.TourGroupInfo,LeaderInfo:t.LeaderInfo,PriceInfo:t.PriceInfo,IntentOrderInfo:t.IntentOrderInfo,CruisesBaseInfo:t.CruisesBaseInfo,CommissionInfo:t.CommissionInfo,OrderKnow:t.OrderKnow,Visa:t.Visa,RiskScheduleInfo:t.RiskScheduleInfo,PrivateTourInfo:t.PrivateTourInfo,VendorInfo:t.VendorInfo,TravelList:t.TravelList,SelfPayInfoList:t.SelfPayInfoList},u=e.multipleDepartureCityInfo,d=t.PriceInfo.DepartureCityPriceList;if(d&&d.length){var m=[],p=58===Number(n.departcityid),f=!1;if(d.forEach(function(e){"\u9999\u6e2f"===e.DepartureCityName&&(f=!0),m.push(e)}),u.DepartureCityList=m,f||p){var h=u.specialCityIdList,_=u.currentCityName,v=u.previousCityName;h.some(function(e){return Number(e.id)===Number(n.salecityid)})&&("\u9999\u6e2f"!==_?u.shouldShowHK=!0:v&&"\u9999\u6e2f"!==v&&(u.shouldShowHK=!0))}}if(t.TravelIntroductionInfo){var g=(t.TravelIntroductionInfo.TravelIntroductionList||[])[0];if(g){var y=g.IntroductionInfoList||[];s.TravelOverviewInfo=g.TravelOverviewInfo,s.TravelDetailList=y.map(function(e){return dr(e)})}}return fr({},e,l,{multipleDepartureCityInfo:u,pageStatus:a,routeInfo:c,currentRouteInfo:s})},Lr=function(e,t){var a=t.data,n=t.targetProductId,r=e.pageStatus,o=e.routeInfo,i=fr({},o[n],{DescriptionInfo:a.DescriptionInfo,CostInfoList:a.CostInfoList,FlightInfo:a.FlightInfo,ScheduleInfo:a.ScheduleInfo,BookInfo:a.BookInfo,isLoaded:!0}),c=a.TravelIntroductionInfo;if(c){var s=c.TravelIntroductionList;if(s&&s.length){var l=s[0],u=l.IntroductionInfoList;u&&u.length&&(i.TravelDetailList=u.map(function(e,t){return dr(e,t)})),l.TravelOverviewInfo&&(i.TravelOverviewInfo=l.TravelOverviewInfo)}}return fr({},e,{pageStatus:fr({},r,{activeProductId:n}),routeInfo:fr({},o,hr({},n,i)),currentRouteInfo:i,ScheduleInfo:a.ScheduleInfo})},Rr=function(e,t){var a=t.data,n=t.targetAlias,r=e.pageStatus,o=e.routeInfo,i=fr({},o[n],{isLoaded:!0}),c=a.TravelIntroductionInfo;if(c){var s=c.TravelIntroductionList;if(s&&s.length){var l=s[0],u=l.IntroductionInfoList;u&&u.length&&(i.TravelDetailList=u.map(function(e,t){return dr(e,t)})),l.TravelOverviewInfo&&(i.TravelOverviewInfo=l.TravelOverviewInfo)}}return fr({},e,{pageStatus:fr({},r,{activeAlias:n}),routeInfo:fr({},o,hr({},n,i)),currentRouteInfo:i})},Br=function(e,t){return fr({},e,{IMParams:t})},Gr=function(e){var t=e.location,a=e.pageStatus,n=e.query,r=t.basename&&t.basename.indexOf("/webapp/vacations/bestonetour")>-1,o=t.basename&&t.basename.indexOf("/webapp/vacations/ct")>-1,i=navigator.userAgent.indexOf("CQOTC TDS Mobile")>-1,c=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1,s=r&&!a.isBestoneShare||!1,l=sr.a.BestoneStore.getInstance().getVolumeStatus(),u=r&&"down"===l,d=!(mr.a.getCookie("bst_channelid")||n.bstchannelcode),m=mr.a.isInMiniProgram(),p=mr.a.isInMixApp(),f=!!mr.a.isVSale(),h=sr.a.ProposalOrderTip.getInstance().get(),_=!h||h.show,v=mr.a.isInZTApp(),g="wxwaken"===n.sharetype&&m;return fr({},e,{pageStatus:fr({},a,{isBeston:r,isCT:o,isInBestoneApp:i,isInWechat:c,isShowCoverButton:s,isTradeMinPriceMode:u,isCommonMinPriceMode:d,isInMiniApp:m,isVSalesMode:f,isCommonH5:!r&&!o&&!i&&!m&&!p&&!f&&!a.isBstMiniProgram&&!v,isMiniProgramWaken:g}),isShowProposalOrderTip:_})},Ur=function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr.a.getAppVersion();case 2:return a=e.sent,e.abrupt("return",fr({},t,{AppVersion:a}));case 4:case"end":return e.stop()}},e)}),function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function i(e){pr(o,n,r,i,c,"next",e)}function c(e){pr(o,n,r,i,c,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}(),Hr=function(e,t){return fr({},e,{pageId:t})},jr=function(e,t){return fr({},e,{ErrorMessage:t})},Fr=function(e,t){return fr({},e,{isShowPhonePop:!0,phoneInfo:t})},qr=function(e){return fr({},e,{isShowPhonePop:!1,phoneInfo:null})},Vr=function(e,t){return fr({},e,{isShowVendorPhonePop:t})},Wr=function(e){return fr({},e,{multipleDepartureCityInfo:fr({},e.multipleDepartureCityInfo,{shouldTips:!1})})},Kr=function(e){return fr({},e,{isShowProposalOrderTip:!1})},Jr=function(e,t){return fr({},e,{isShowAdvisorMask:t})},Yr=function(e,t){return fr({},e,{isShowProposalOrderMask:t})},Qr=function(e,t){return fr({},e,{proposalOrderInfo:t})},zr=function(e,t){return fr({},e,{isProposalOrderTexted:t})},$r=function(e,t){return fr({},e,{isShowCreditInfoMask:t})},Xr=function(e,t){return fr({},e,{pageStatus:fr({},e.pageStatus,{isTradeMinPriceMode:t})})},Zr=function(e,t){return fr({},e,{isShowFavouriteMenu:t})},eo=function(e,t){return fr({},e,{isShowCatalog:t})},to=function(e,t){return fr({},e,{isShowScenesCouponMask:t})},ao=function(e,t){var a=e.ScenesCoupon;return a=fr({},a,t?{IsTaken:!0}:{isTakeFail:!0}),fr({},e,{ScenesCoupon:a})},no=function(e,t){return fr({},e,{isShowShareTipMask:t})},ro=function(e,t){var a=e.BasicInfo,n=t.DepartureCityName,r=t.DepartureId;return fr({},e,{multipleDepartureCityInfo:ur(n),BasicInfo:fr({},a,{DepartureCityName:n,DepartureId:r})})},oo=function(e,t){var a=e.ABTestResult,n=t.code,r=t.result;return a[n]=r,fr({},e,{ABTestResult:a})},io=function(e,t){var a=t.VideoInfoList;return(void 0===a?[]:a).length?fr({},e,{isShowPlayVideoButtonMode:!0,hasVideo:!0}):e},co=function(e,t){return fr({},e,{isShowSwitchMediaMode:t})},so=function(e,t){return fr({},co(e,t),{isShowVideoPlayerContent:t,isShowPlayVideoButtonMode:!t,isShowNetworkStatusContent:!1,hasConfirmNetWork:!0})},lo=function(e,t){return fr({},co(e,t),{isShowVideoPlayerContent:t,isShowPlayVideoButtonMode:!t})},uo=function(e,t){return e.hasConfirmNetWork?so(e,t):fr({},e,{isShowNetworkStatusContent:t,isShowPlayVideoButtonMode:!1})},mo=a(449),po=a(37),fo=a(28),ho=a.n(fo),_o=a(1),vo=a.n(_o);function go(e){return(go="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(s){r=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Eo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){ko(e,t,a[t])})}return e}function So(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(l){return void a(l)}c.done?t(s):Promise.resolve(s).then(n,r)}function Io(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function i(e){So(o,n,r,i,c,"next",e)}function c(e){So(o,n,r,i,c,"throw",e)}i(void 0)})}}function bo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function To(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function No(e,t,a){return(No="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Po(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(a):r.value}})(e,t,a||e)}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Co(e,t){return(Co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ko(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"default",function(){return Ho});var wo=sr.a.DetailSchedule.getInstance(),Do=sr.a.CompareInfo.getInstance(),Oo=sr.a.TourView.getInstance(),xo=sr.a.SDPPoiList.getInstance(),Ao=sr.a.SourceSignStore.getInstance(),Mo=sr.a.AdvisorStore.getInstance(),Lo=sr.a.CountryCodeStorage.getInstance(),Ro=sr.a.DetailOrderPreInfoStorage.getInstance(),Bo=sr.a.ProposalOrderTip.getInstance(),Go=sr.a.BestoneStore.getInstance(),Uo=sr.a.DetailScenesCoupon.getInstance(),Ho=function(e){function t(){var e,a,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),l=0;l<c;l++)s[l]=arguments[l];return r=this,i=(e=Po(t)).call.apply(e,[this].concat(s)),a=!i||"object"!==go(i)&&"function"!==typeof i?To(r):i,ko(To(a),"SSR","false"!==a.location.query.ssr&&-1===a.context.basename.indexOf("/bestonetour")),ko(To(a),"View",ir),ko(To(a),"Model",n),ko(To(a),"KeepAlive",!0),ko(To(a),"EnableBackGuesture",!0),ko(To(a),"ABTestCodeList",["190522_vag_mapab"]),ko(To(a),"fetchProductInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.query,r=a.store.actions,o=r.UPDATE_PRODUCT_INFO,i=r.UPDATE_ERROR_MESSAGE,c={ProductId:n.productid,DepartureCityId:n.departcityid||0,metricName:"ProductDetailV5|firstTime"},e.prev=3,e.next=6,a.post("ProductDetail",c);case 6:s=e.sent,l=s.Data,o(l),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),u=e.t0.message?e.t0.message:"\u83b7\u53d6\u4ea7\u54c1\u8be6\u60c5\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5",i(u);case 15:case"end":return e.stop()}},e,null,[[3,11]])}))),ko(To(a),"fetchLineProductDepartCityInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.query,r=a.store.actions.UPDATE_LINEPRODUCT_DEPARTCITY,n.lineproductid){e.next=4;break}return e.abrupt("return");case 4:return o={ProductId:n.lineproductid,DepartureCityId:n.departcityid||0},e.prev=5,e.next=8,a.post("ProductDetail",o);case 8:i=e.sent,c=i.Data,s=c.BasicInfo,r(s),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:case"end":return e.stop()}},e,null,[[5,14]])}))),ko(To(a),"fetchDescriptionInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.query,r=a.store.actions.UPDATE_DESCRIPTION_INFO,o={IsPMRecomendInfo:!0,IsDescriptionInfo:!0},i={ProductId:n.productid,DepartureCityId:n.departcityid,QueryNode:o,MarketingInfo:{AllianceId:mr.a.getAidSid().aid,SId:mr.a.getAidSid().sid},metricName:"ProductDetailTimingV5|DescriptionInfo"},e.prev=4,e.next=7,a.post("ProductDetailTiming",i);case 7:c=e.sent,s=c.Data,r(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4);case 15:case"end":return e.stop()}},e,null,[[4,12]])}))),ko(To(a),"fetchProductBookInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.query,r=t.ErrorMessage,o=a.store.actions,i=o.UPDATE_BOOK_INFO,c=o.UPDATE_ERROR_MESSAGE,s={IsBasicExtendInfo:!0,IsBookInfo:!0,IsScheduleInfo:!0,IsSegmentInfo:!0,IsPriceInfo:!0},l={ProductId:n.productid,DepartureCityId:n.departcityid,QueryNode:s,MarketingInfo:{AllianceId:mr.a.getAidSid().aid,SId:mr.a.getAidSid().sid},metricName:"ProductDetailTimingV5|BookInfo"},e.prev=4,e.next=7,a.post("ProductDetailTiming",l);case 7:u=e.sent,d=u.Data,i(d),e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(4),!r){e.next=18;break}return e.abrupt("return");case 18:r=e.t0.message?e.t0.message:"\u83b7\u53d6\u4ea7\u54c1\u8be6\u60c5\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5",c(r);case 20:case"end":return e.stop()}},e,null,[[4,12]])}))),ko(To(a),"fetchProductTimingInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.query,r=t.pageStatus,o=t.BasicInfo,i=a.store.actions.UPDATE_PRODUCT_TIMINGINFO,c={IsBasicExtendInfo:!0,IsIntentOrderInfo:!0,IsPriceInfo:!0,IsPrivateTourInfo:!0,IsTravelList:!0,IsTourGroupInfo:!0,IsVendorInfo:!0,IsLeaderInfo:!0,IsDescriptionInfo:!0,IsTravelIntroductionInfo:!0,IsCostInfoList:!0,IsOrderKnow:!0,IsVisa:!0,IsCommissionInfo:!0,IsRiskScheduleInfo:!0,IsAdvisorInfo:!0,IsPoiDistrictList:!0,IsSelfPayInfo:!0,IsFlightInfo:!0},r.isCruise&&(c.IsCruisesBaseInfo=!0),s={ProductId:o.ProductId,DepartureCityId:o.DepartureId,LocationCityId:n.locatecityid,QueryNode:c,MarketingInfo:{AllianceId:mr.a.getAidSid().aid,SId:mr.a.getAidSid().sid},IsOP:!!r.isOp,metricName:"ProductDetailTimingV5|firstTime"},e.prev=5,e.next=8,a.post("ProductDetailTiming",s);case 8:l=e.sent,u=l.Data,i(u),a.traceElementExpos(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5);case 17:case"end":return e.stop()}},e,null,[[5,14]])}))),ko(To(a),"fetchProductExtendInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.query,r=t.BasicInfo,o=a.store.actions.UPDATE_RESPONSE_DATA,i={IsTravelNote:!0,IsMultiLineInfo:!0,IsProductQASearchInfoList:!0},c={ProductId:r.ProductId,DepartureCityId:r.DepartureId,QueryNode:i,MarketingInfo:{AllianceId:mr.a.getAidSid().aid,SId:mr.a.getAidSid().sid},ActivityInfo:{ActivityId:n.activityid},metricName:"ProductDetailExtend"},e.prev=4,e.next=7,a.post("ProductDetailExtend",c);case 7:s=e.sent,l=s.Data,o(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4);case 15:case"end":return e.stop()}},e,null,[[4,12]])}))),ko(To(a),"fetchCommentInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.BasicInfo,r=a.store.actions.UPDATE_RESPONSE_DATA,o={productId:n.ProductId},e.prev=3,e.next=6,a.post("GetCommentSummary",o);case 6:i=e.sent,c=i.commentAggregation,s=i.comments,r({CommentInfo:{commentAggregation:c,comments:void 0===s?[]:s}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3);case 17:case"end":return e.stop()}},e,null,[[3,14]])}))),ko(To(a),"fetchCompositeCouponInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d,m,p,f,h,_,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.BasicInfo,r=t.TourGroupInfo,o=a.store.actions.UPDATE_RESPONSE_DATA,i=r.TourGroupProductInfo?r.TourGroupProductInfo.map(function(e){return e.ProductId}):[n.ProductId],c={productIdList:i,departCityId:n.DepartureId,saleCityId:n.SaleCityId,requestTypeList:["promotionCode","discountOption","userPromotion"]},e.prev=4,e.next=7,a.post("CompositeCouponDisplay",c);case 7:s=e.sent,l=s.data,u=l.classifyPromotionInfo,d=u.alreadyPromotionList,m=void 0===d?[]:d,p=u.canPromotionList,f=void 0===p?[]:p,h=u.limitGiftOptionList,_=void 0===h?[]:h,v=u.alreadyPromotionAmountForMinPrice,o({CompositePromotionInfo:{alreadyPromotionList:m,canPromotionList:f,limitGiftOptionList:_,alreadyPromotionAmountForMinPrice:v}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4);case 17:case"end":return e.stop()}},e,null,[[4,14]])}))),ko(To(a),"fetchMultiLineInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d,m,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.TourGroupInfo,r=t.pageStatus,o=t.query,i=t.BasicInfo,c=a.store.actions.UPDATE_RESPONSE_DATA,r.isMultiLine){e.next=4;break}return e.abrupt("return");case 4:return s={productIds:n.TourGroupProductInfo.map(function(e){return e.ProductId}),departureCityId:i.DepartureId,saleCityId:i.SaleCityId,requestTypeList:["priceInfo"]},"crh"===o.identifier&&s.requestTypeList.push("tagInfo"),e.prev=6,e.next=9,a.post("ProductGroupInfo",s);case 9:l=e.sent,u=l.Data,d=u.TagGroupInfoList,m=u.PriceGroupInfoList,p=[],d&&d.map(function(e){e.SpecialTagList.map(function(t){"\u52a8\u8f66\u9ad8\u94c1\u6e38"===t.TagName&&p.push(e.ProductId)})}),c({MultilineTrainTags:p,PriceGroupInfoList:m}),r.isNativeHybrid||(p.length&&-1===p.indexOf(r.activeProductId)&&!o.cityischanged&&a.handleMultiLineChange(p[0]),m.map(function(e){return e.ProductId}).includes(i.ProductId)||(f=m.filter(function(e){return e.ProductId})[0])&&a.handleMultiLineChange(f.ProductId)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6);case 21:case"end":return e.stop()}},e,null,[[6,18]])}))),ko(To(a),"fetchEmotionalCues",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.pageStatus,r=t.BasicInfo,o=a.store.actions.UPDATE_RESPONSE_DATA,!n.isBeston){e.next=4;break}return e.abrupt("return");case 4:return i={ProductId:r.ProductId,SaleCityId:r.SaleCityId,DepartCityId:r.DepartureId},e.prev=5,e.next=8,a.post("EmotionalCues",i);case 8:c=e.sent,s=c.Data,l=s.EmotionalCues,o({EmotionalCues:l}),a.traceEmotionalCues(),a.showBookInfo(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5);case 19:case"end":return e.stop()}},e,null,[[5,16]])}))),ko(To(a),"fetchStoreInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.pageStatus,r=t.BasicInfo,o=a.store.actions.UPDATE_RESPONSE_DATA,!n.isRetail){e.next=4;break}return e.abrupt("return");case 4:return i={cityId:r.DepartureId},e.prev=5,e.next=8,a.post("GetNearbyStore",i);case 8:c=e.sent,s=c.Data,l={storeAmount:s.storeAmount,minDistance:s.minDistance,nearbyStoreUrl:s.nearbyStoreUrl},o({NearbyStoreInfo:l}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5);case 17:case"end":return e.stop()}},e,null,[[5,14]])}))),ko(To(a),"fetchVendorRecommend",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.BasicInfo,r=a.store.actions.UPDATE_RESPONSE_DATA,o={ProductId:n.ProductId,DepartureCityId:n.DepartureId},e.prev=3,e.next=6,a.post("GetWindowRecommendProductInfo",o);case 6:i=e.sent,c=i.Data,r({VendorRecommendInfo:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3);case 14:case"end":return e.stop()}},e,null,[[3,11]])}))),ko(To(a),"fetchRankingInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.query,r=t.BasicInfo,o=t.isInCtripApp,i=t.pageStatus,c=a.store.actions.UPDATE_RESPONSE_DATA,!i.isDiyfhxsdp){e.next=4;break}return e.abrupt("return");case 4:return s={bizType:"DetailPage",channel:o?"app":"h5",products:[{productId:r.ProductId,startCityId:r.DepartureId}],gpsCityId:n.locatecityid||0},n.tabid&&(s.tab=+n.tabid),e.prev=6,e.next=9,a.post("GetProductRankingPortal",s);case 9:l=e.sent,u=l.rankings,d=(void 0===u?{}:u)[r.ProductId],c({RankingInfo:d}),a.traceRankingInfo(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6);case 20:case"end":return e.stop()}},e,null,[[6,17]])}))),ko(To(a),"fetchPeopleAskInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.pageStatus,r=t.BasicInfo,o=t.userStatus,i=a.store.actions.UPDATE_RESPONSE_DATA,!n.isBeston){e.next=4;break}return e.abrupt("return");case 4:if(/^(1|3|4)$/.test(r.ProductPatternId)){e.next=6;break}return e.abrupt("return");case 6:return c={HotelId:r.ProductId,RemoveAdoptedReply:!1,SourceType:"3",CtripUserId:o.IsLogin?o.Uid:""},e.prev=7,e.next=10,a.post("GetAskStatus",c);case 10:s=e.sent,l=s.HotelAskStatusList,u=s.TotalCount,d={},u&&(d={HotelAskStatusList:l,TotalCount:u}),i({PeopleAskInfo:d}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7);case 21:case"end":return e.stop()}},e,null,[[7,18]])}))),ko(To(a),"fetchCollectStateInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.BasicInfo,r=t.pageStatus,o=t.userStatus,i=a.store.actions.UPDATE_FAVOURITE_STATUS,o.IsLogin&&!o.IsAnonymousLogin){e.next=4;break}return e.abrupt("return");case 4:return c={UID:o.Uid,QueryList:[{BizType:r.isDiyfhxsdp?"PLANE_HOTEL":r.isStudy?"YOUXUE":"GROUP_TRAVEL",ProductID:n.ProductId}]},e.prev=5,e.next=8,a.post("IsMyFavorites",c);case 8:s=e.sent,l=s.ResultCode,u=s.ResultList,(d=0===l&&u.length>0)&&(a.favoriteId=u[0].FavoriteID),i(d),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5);case 18:case"end":return e.stop()}},e,null,[[5,15]])}))),ko(To(a),"fetchQConfigInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.actions.UPDATE_RESPONSE_DATA,n={KeyList:["detail_qrcode","six_security","detail_bonus","detail_shop_entry","miniapp_detail_icon"]},e.prev=2,e.next=5,a.post("QConfig",n);case 5:r=e.sent,o=r.Data.AppSettingList,c=(i=function(e,t){return JSON.parse(e.filter(function(e){return e.Key===t})[0].Value)})(o,"detail_qrcode"),s=i(o,"six_security"),l=i(o,"detail_bonus"),u=i(o,"detail_shop_entry"),d=i(o,"miniapp_detail_icon"),t({QRCodeUrl:c,SixSecurityInfo:s,BonusInfo:l,ShopEntryInfo:u,MiniAppActivityIconInfo:d}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2);case 19:case"end":return e.stop()}},e,null,[[2,16]])}))),ko(To(a),"fetchCouponInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.pageStatus,r=t.BasicInfo,o=t.BasicExtendInfo,i=a.store.actions.UPDATE_RESPONSE_DATA,!o.IsSpecialPromotion){e.next=4;break}return e.abrupt("return");case 4:if(/^(1|2|3|4)$/.test(r.ProductPatternId)&&/^(9|10|11|26)$/.test(r.ProductCategoryId)&&/^(S|O|P|G|R)$/.test(r.SaleMode)&&!n.isBeston){e.next=6;break}return e.abrupt("return");case 6:if(r.DepartureId){e.next=8;break}return e.abrupt("return");case 8:return c={ProductIdList:[r.ProductId],departureCityId:r.DepartureId,SceneCode:"DetailPage"},e.prev=9,e.next=12,a.post("SearchProductPromotion",c);case 12:s=e.sent,l=s.ProductList,u=l[0].PromotionList.filter(function(e){return e.IsAvailable}),i({couponItemList:u}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9);case 21:case"end":return e.stop()}},e,null,[[9,18]])}))),ko(To(a),"fetchScenesCouponInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d,m,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.BasicInfo,r=t.BookInfo,o=t.ScheduleInfo,i=t.userStatus,c=t.pageStatus,s=a.store.actions.UPDATE_RESPONSE_DATA,c.isCommonH5){e.next=4;break}return e.abrupt("return");case 4:if([1,3,4].includes(n.ProductPatternId)){e.next=6;break}return e.abrupt("return");case 6:if(i.IsLogin&&!i.IsAnonymousLogin){e.next=8;break}return e.abrupt("return");case 8:if(r.IsBook&&o.HasInventory){e.next=10;break}return e.abrupt("return");case 10:return l={ScenesRequests:[{SceneCode:"HeavenDropDetailPage",SearchStrategy:{SortMethod:3,FilterMethod:1,ProductIdList:[n.ProductId]}}]},e.prev=11,e.next=14,a.post("SearchScenesPromotion",l);case 14:u=e.sent,d=u.ScenesPromotionList,m=d[0].CouponList.filter(function(e){return e.IsAvailable}).filter(function(e){return!e.IsTaken}).filter(function(e){return 3===e.DeductionTypeId}),p=m[0],s({ScenesCoupon:p}),p&&a.setScenesPromotionDelay(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11);case 25:case"end":return e.stop()}},e,null,[[11,22]])}))),ko(To(a),"fetchLoginUserAdvisorId",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.BasicInfo,r=a.store.actions.UPDATE_RESPONSE_DATA,o={ProductId:n.ProductId,SaleCityId:n.SaleCityId,DepartureCityId:n.DepartureId},e.prev=3,e.next=6,a.post("GetLoginUserAdvisorInfo",o);case 6:i=e.sent,c=i.advisorId,r({advisorId:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3);case 14:case"end":return e.stop()}},e,null,[[3,11]])}))),ko(To(a),"fetchAdvisorInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d,m,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.BasicInfo,r=a.store.actions.UPDATE_RESPONSE_DATA,o={ProductId:n.ProductId,SaleCityId:n.SaleCityId,DepartureCityId:n.DepartureId,advisorId:0},e.prev=3,e.next=6,a.post("GetAdvisorInfo",o);case 6:if(i=e.sent,c=i.advisor){e.next=10;break}return e.abrupt("return");case 10:s=a.store.getState(),l=s.pageStatus,u=c.advisorRoleList,m=(d=void 0===u?[]:u).filter(function(e){return 13===Number(e.advisorRoleId)}).length>0,l.isRole13=m,p=!1,f=!1,(l.isAdvisorApp||l.isVBKApp)&&(3===c.advisorType?(p=d.filter(function(e){return 2===e.status}).length>0)&&(l.ChannelId="operator"):2===c.advisorType&&(f=d.filter(function(e){return 2===e.status&&13===e.advisorRoleId}).length>0)&&(l.ChannelId="advisor")),l.isShowCoverButton=l.isShowCoverButton||p||f,r({pageStatus:l,advisor:c}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3);case 24:case"end":return e.stop()}},e,null,[[3,21]])}))),ko(To(a),"fetchIMEntryInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.BasicInfo,r=t.pageStatus,o=t.actionIdSuffix,i=a.store.actions.UPDATE_RESPONSE_DATA,!r.isCruise){e.next=4;break}return e.abrupt("return");case 4:return c={ProductId:n.ProductId,IMCode:a.getIMCode()},e.prev=5,e.next=8,a.post("GetIMEntryInfo",c);case 8:s=e.sent,l=s.Data,i({IMEntryInfo:Eo({},l,{ProductId:n.ProductId,actionId:"".concat(o,"-hint-tel")})}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:case"end":return e.stop()}},e,null,[[5,13]])}))),ko(To(a),"fetchCreateFavorite",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.pageStatus,r=t.BasicInfo,o=t.PriceInfo,i=t.userStatus,c=a.store.actions,s=c.TOGGLE_COLLECT_STATUS,l=c.TOGGLE_FAVOURITE_MENU,o){e.next=4;break}return e.abrupt("return");case 4:return u={ProductCategoryId:r.ProductCategoryId,ProductId:r.ProductId,StartCity:r.DepartureId,SaleCity:r.SaleCityId,ProductName:r.Title,Price:o&&-1===o.MinPrice?"0.00":o.MinPrice,UserName:i.UserName,Phone:i.Mobile,Email:i.Email,IsGroupOpenNotify:!0,BusinessType:n.isDiyfhxsdp?3:n.isStudy?0:2},e.prev=5,e.next=8,a.post("CreateFavorite",u);case 8:d=e.sent,m=d.Data,a.favoriteId=m.FavoriteIdList[0],s(!0),l(!0),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),a.showToast("\u6536\u85cf\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 19:case"end":return e.stop()}},e,null,[[5,15]])}))),ko(To(a),"fetchCancelFavorite",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.BasicInfo,r=a.store.actions,o=r.TOGGLE_COLLECT_STATUS,i=r.TOGGLE_FAVOURITE_MENU,c={FavoriteIdList:[a.favoriteId],ProductIdList:[n.ProductId]},e.prev=3,e.next=6,a.post("CancelFavorite",c);case 6:o(!1),i(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),a.showToast("\u53d6\u6d88\u6536\u85cf\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 14:case"end":return e.stop()}},e,null,[[3,10]])}))),ko(To(a),"fetchTakeCoupon",function(){var e=Io(regeneratorRuntime.mark(function e(t,n){var r,o,i,c,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.store.getState(),o=r.pageStatus,i=a.store.actions.UPDATE_COUPON_STATUS,c={BuType:o.isDiyfhxsdp?2:1,PromotionIds:[t],PromotionCodeList:[n]},e.prev=3,e.next=6,a.post("TakeCouponCode",c);case 6:if(s=e.sent,0===(l=s.Data).Code){e.next=12;break}return u=l.TakeCouponList[0].Message,a.showToast(u),e.abrupt("return");case 12:i(t),a.showToast("\u9886\u53d6\u6210\u529f"),a.fetchCompositeCouponInfo(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),a.showToast("Ops\u2026\u597d\u50cf\u51fa\u95ee\u9898\u4e86\uff0c\u518d\u9886\u4e00\u6b21\u5427");case 21:case"end":return e.stop()}},e,null,[[3,17]])}));return function(t,a){return e.apply(this,arguments)}}()),ko(To(a),"fetchTakeScenesCoupon",function(){var e=Io(regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.store.actions.UPDATE_SCENES_COUPON_STATUS,o={BuType:1,PromotionIds:[t],PromotionCodeList:[n]},e.prev=2,e.next=5,a.post("TakeCouponCode",o);case 5:if(i=e.sent,0===i.Data.Code){e.next=10;break}return r(!1),e.abrupt("return",!1);case 10:return r(!0),a.fetchCompositeCouponInfo(),e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(2),r(!1),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,null,[[2,15]])}));return function(t,a){return e.apply(this,arguments)}}()),ko(To(a),"fetchCreditInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.userStatus,r=t.BasicInfo,o=t.PriceInfo,i=a.store.actions.UPDATE_RESPONSE_DATA,n.IsLogin&&!n.IsAnonymousLogin){e.next=4;break}return e.abrupt("return");case 4:return c={ProductId:r.ProductId,MinPrice:o.MinPrice},e.prev=5,e.next=8,a.post("QueryPromotionDisplayInfo",c);case 8:s=e.sent,l=s.Data,u=l.PromotionInfo,i({CreditInfo:u}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5);case 17:case"end":return e.stop()}},e,null,[[5,14]])}))),ko(To(a),"fetchUserCommonInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),(n=t.userStatus).IsLogin&&!n.IsAnonymousLogin){e.next=3;break}return e.abrupt("return");case 3:return r=a.store.actions.UPDATE_RESPONSE_DATA,o={RequestTypeList:[4]},e.prev=5,e.next=8,a.post("GetUserCommonInfo",o);case 8:if(i=e.sent,(c=i.Data).ContactInfo){e.next=12;break}return e.abrupt("return");case 12:s=c.ContactInfo.CommonContactList[0],r({commonUserInfo:s}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5);case 19:case"end":return e.stop()}},e,null,[[5,16]])}))),ko(To(a),"fetchCreateProposalOrder",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.BasicInfo,r=t.pageStatus,o=t.proposalOrderInfo,i=t.countryInfo,c={TrackOrder:{SbuType:r.isDiyfhxsdp?"FreeTour":"TeamTour",OrderFrom:"H5",OrderType:"WishOrder",ProductId:n.ProductId,StartCityId:n.DepartureId,DestName:n.DestCityName,SaleMode:n.SaleMode,ContactName:o.nameInput,ContactPhone:o.phoneInput,IntCode:i.code,Remark:o.textInput,Ext:[{Name:"SubType",Val:"12"}]}},e.prev=2,e.next=5,a.post("CreateTrackOrder",c);case 5:return s=e.sent,l=s.TrackOrderId,e.abrupt("return",l);case 10:e.prev=10,e.t0=e.catch(2);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))),ko(To(a),"fetchCalendarPathConfig",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.actions.UPDATE_RESPONSE_DATA,n={KeyList:["vacations_jump_url"]},e.prev=2,e.next=5,a.post("QConfig",n);case 5:r=e.sent,o=JSON.parse(r.Data.AppSettingList.filter(function(e){return"vacations_jump_url"===e.Key})[0].Value),i=!!o.tourcalendar,t({isJumpTourCalendar:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2);case 14:case"end":return e.stop()}},e,null,[[2,11]])}))),ko(To(a),"fetchDiyDetailPathConfig",Io(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={KeyList:["diydetail_url"]},e.prev=1,e.next=4,a.post("QConfig",t);case 4:return n=e.sent,r=JSON.parse(n.Data.AppSettingList.filter(function(e){return"diydetail_url"===e.Key})[0].Value),e.abrupt("return",!!r&&r.idiytour);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,null,[[1,9]])}))),ko(To(a),"fetchBrandScoreInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.VendorInfo,r=t.BasicInfo,o=a.store.actions.UPDATE_RESPONSE_DATA,n&&n.VenderId){e.next=4;break}return e.abrupt("return");case 4:return i={providerId:n.VenderId,brandId:n.BrandId,destinationCityId:r.DestCityId},e.prev=5,e.next=8,a.post("GetBrandScore",i);case 8:c=e.sent,s=c.brandScoreInfo,l=c.inLand,o({ShopInfo:{brandScoreInfo:s,inLand:l}}),a.fetchBrandCouponInfo(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5);case 19:case"end":return e.stop()}},e,null,[[5,16]])}))),ko(To(a),"fetchBrandCouponInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.VendorInfo,r=t.BasicInfo,o=a.store.actions.UPDATE_RESPONSE_DATA,n){e.next=4;break}return e.abrupt("return");case 4:if("S"!==r.SaleMode){e.next=7;break}return a.fetchSelfShopCouponInfo(),e.abrupt("return");case 7:return i={VendorId:n.VenderId,BrandId:n.BrandId,SceneCode:"BrandDetailPage"},e.prev=8,e.next=11,a.post("SearchBrandPromotion",i);case 11:c=e.sent,s=c.CouponList,l=s.filter(function(e){return e.IsAvailable}).length>0,o({isShowBrandCouponTip:l}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8);case 20:case"end":return e.stop()}},e,null,[[8,17]])}))),ko(To(a),"fetchSelfShopCouponInfo",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=t.ShopInfo,r=a.store.actions.UPDATE_RESPONSE_DATA,e.prev=2,o=n.inLand?"SelfOperatedDomestic":"SelfOperatedOverseas",i={ScenesRequests:[{SceneCode:o}]},e.next=7,a.post("SearchScenesPromotion",i);case 7:c=e.sent,s=c.ScenesPromotionList,l=s[0].CouponList.filter(function(e){return e.IsAvailable}).length>0,r({isShowBrandCouponTip:l}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2);case 16:case"end":return e.stop()}},e,null,[[2,13]])}))),ko(To(a),"handleBack",function(){a.backPage()}),ko(To(a),"handleShowCouponMask",function(){(0,a.store.actions.TOGGLE_COUPON_MASK)(!0)}),ko(To(a),"handleHideCouponMask",function(){(0,a.store.actions.TOGGLE_COUPON_MASK)(!1)}),ko(To(a),"handleShowPromotionMask",function(){(0,a.store.actions.TOGGLE_PROMOTION_MASK)(!0)}),ko(To(a),"handleHidePromotionMask",function(){(0,a.store.actions.TOGGLE_PROMOTION_MASK)(!1)}),ko(To(a),"handleShowCityMask",function(){(0,a.store.actions.TOGGLE_CITY_MASK)(!0)}),ko(To(a),"handleHideCityMask",function(){(0,a.store.actions.TOGGLE_CITY_MASK)(!1)}),ko(To(a),"handleShowTagListMask",function(){var e=a.store.getState().pageStatus,t=a.store.actions.TOGGLE_TAGLIST_MASK;e.isQunar||t(!0)}),ko(To(a),"handleHideTagListMask",function(){(0,a.store.actions.TOGGLE_TAGLIST_MASK)(!1)}),ko(To(a),"handleShowPriceTipMask",function(){(0,a.store.actions.TOGGLE_PRICETIP_MASK)(!0)}),ko(To(a),"handleHidePriceTipMask",function(){(0,a.store.actions.TOGGLE_PRICETIP_MASK)(!1)}),ko(To(a),"handleShowProductSummaryMask",function(){(0,a.store.actions.TOGGLE_PRODUCT_SUMMARY_MASK)(!0)}),ko(To(a),"handleHideProductSummaryMask",function(){(0,a.store.actions.TOGGLE_PRODUCT_SUMMARY_MASK)(!1)}),ko(To(a),"handleShowPreferredMask",function(){(0,a.store.actions.TOGGLE_PREFERRED_MASK)(!0)}),ko(To(a),"handleHidePreferredMask",function(){(0,a.store.actions.TOGGLE_PREFERRED_MASK)(!1)}),ko(To(a),"handleShowAdvisorMask",function(){(0,a.store.actions.TOGGLE_ADVISOR_MASK)(!0),a.traceProposalOrderExpose()}),ko(To(a),"handleHideAdvisorMask",function(){(0,a.store.actions.TOGGLE_ADVISOR_MASK)(!1)}),ko(To(a),"handleShowCreditInfoMask",function(){(0,a.store.actions.TOGGLE_CREDITINFO_MASK)(!0)}),ko(To(a),"handleHideCreditInfoMask",function(){(0,a.store.actions.TOGGLE_CREDITINFO_MASK)(!1)}),ko(To(a),"handleShowProposalOrderMask",function(){if(a.store.getState().userStatus.IsLogin){var e=a.store.actions,t=e.TOGGLE_PROPOSAL_ORDER_MASK,n=e.UPDATE_RESPONSE_DATA,r="\u4e2d\u56fd\u5927\u9646",o="86";if(Lo.get()){var i=Lo.get().countryInfo;r=i.cn,o=i.code}n({countryInfo:{name:r,code:o}}),t(!0),a.handleHideAdvisorMask()}else a.handleShowLogin()}),ko(To(a),"handleHideProposalOrderMask",function(){(0,a.store.actions.TOGGLE_PROPOSAL_ORDER_MASK)(!1),a.handleShowAdvisorMask()}),ko(To(a),"handleRouteModeChange",function(){a.traceSummaryIcon("\u7b80\u5355\u884c\u7a0b/\u56fe\u6587\u8be6\u60c5"),(0,a.store.actions.TOGGLE_ROUTE_MODE)(),a.moveTo("#product_route")}),ko(To(a),"handleBackTop",function(){a.store.getState().pageStatus.isNativeHybrid&&CtripBusiness.app_do_business_job(9,"80032",{},Date.now(),function(){}),window.scrollTo(0,0)}),ko(To(a),"handleHideBookInfo",function(){document.querySelector(".m_book_info").classList.add("m_xfade")}),ko(To(a),"handleToggleCollectionStatus",function(){var e=a.store.getState(),t=e.userStatus,n=e.pageStatus;if(!t.IsLogin||t.IsAnonymousLogin)return mr.a.isInMiniProgram()?void a.miniProgramJumpUrl(location.href,!0,!1):void a.handleShowLogin();n.isFavorite?a.fetchCancelFavorite():a.fetchCreateFavorite()}),ko(To(a),"handleHideFavouriteMenu",function(){a.store.getState().isShowFavouriteMenu&&(0,a.store.actions.TOGGLE_FAVOURITE_MENU)(!1)}),ko(To(a),"handleShowCatalog",function(){(0,a.store.actions.TOGGLE_CATALOG_STATUS)(!0)}),ko(To(a),"handleHideCatalog",function(){(0,a.store.actions.TOGGLE_CATALOG_STATUS)(!1)}),ko(To(a),"handleShowScenesCouponMask",function(){Uo.get()||(Uo.set({show:!1}),(0,a.store.actions.TOGGLE_SCENESCOUPON_MASK)(!0),a.traceScenesCouponExpose())}),ko(To(a),"handleHideScenesCouponMask",function(){(0,a.store.actions.TOGGLE_SCENESCOUPON_MASK)(!1)}),ko(To(a),"handleReceiveCoupon",function(e,t){var n=a.store.getState().userStatus;if(!n.IsLogin||n.IsAnonymousLogin)return mr.a.isInMiniProgram()?void a.miniProgramJumpUrl(location.href,!0,!1):mr.a.isInMixApp()?void a.mixAppLogin(location.href):void a.handleShowLogin();a.fetchTakeCoupon(e,t)}),ko(To(a),"handleTakenScenesCoupon",function(){var e=Io(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchTakeScenesCoupon(t,n);case 2:e.sent?a.traceTakeScenesCouponSuccess():a.traceTakeScenesCouponFailed();case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),ko(To(a),"handleChangeDepartCity",function(e){var t=a.store.getState(),n=t.BasicInfo,r=t.query,o=t.PriceInfo,i=t.location,c=t.pageStatus;if(e!==Number(n.DepartureId)){var s=o.DepartureCityPriceList.filter(function(t){return t.DepartureCityId===e})[0].DepartureCityName;wo.set({previousCityName:s});var l=i.pathname,u=Eo({},r,{departcityid:e,salecityid:e,lineproductid:c.activeProductId});r.hasOwnProperty("from")&&(delete u.from,u.from=r.from),r.hasOwnProperty("locatecityid")&&delete u.locatecityid,a.goTo({url:l,params:u})}}),ko(To(a),"handleToggleCompare",function(){var e=a.store.getState(),t=e.query,n=e.BasicInfo,r=e.PriceInfo,o=e.isCompared,i=e.compareListLength,c=a.store.actions,s=c.TOGGLE_COMPARE_STATUS,l=c.UPDATE_COMPARE_COUNT;if(o){var u=(Do.get()||{}).dataList,d=void 0===u?[]:u,m=Number(t.productid),p=d.filter(function(e){return e.pId!==m});Do.set({dataList:p}),s(!1),l(i-1)}else{var f=(Do.get()||{}).dataList,h=void 0===f?[]:f,_={pId:n.ProductId,scId:n.SaleCityId,dcId:n.DepartureId,name:n.Title||"",productLineId:n.ProductLineId||0,price:r.MinPrice||0,travelDays:n.TravelDays,destCityName:n.DestCityName};h.push(_),Do.set({dataList:h}),s(!0),l(i+1)}}),ko(To(a),"handleMultiLineChange",function(){var e=Io(regeneratorRuntime.mark(function e(t){var n,r,o,i,c,s,l,u,d,m,p,f,h,_,v,g,y=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]&&y[1],o=a.store.getState(),i=o.query,c=o.pageStatus,s=o.routeInfo,l=o.BasicInfo,u=a.store.actions,d=u.UPDATE_MULTIPLE_LINE,m=u.UPDATE_RESPONSE_DATA,c.activeProductId!==t){e.next=5;break}return e.abrupt("return");case 5:if(p=s[t],f=p.Alias,!a.checkShouldChangeDepartCity(t,f)){e.next=9;break}return e.abrupt("return");case 9:if(!p||!p.isLoaded){e.next=13;break}return m({pageStatus:Eo({},c,{activeProductId:t}),currentRouteInfo:p,ScheduleInfo:p.ScheduleInfo}),r&&a.moveTo("#product_selling_points"),e.abrupt("return");case 13:return ko(n={IsBookInfo:!0,IsDescriptionInfo:!0,IsTravelIntroductionInfo:!0,IsCostInfoList:!0,IsFlightInfo:!0,IsScheduleInfo:!0},"IsCostInfoList",!0),ko(n,"IsOrderKnow",!0),ko(n,"IsVisa",!0),h=n,_={ProductId:t,DepartureCityId:l.DepartureId,LocationCityId:i.locatecityid,QueryNode:h,metricName:"ProductDetailTimingV5|MultiLine"},e.prev=15,m({isShowMultiLineLoading:!0}),e.next=19,a.post("ProductDetailTiming",_);case 19:v=e.sent,g=v.Data,d({data:g,targetProductId:t}),m({isShowMultiLineLoading:!1}),r&&a.moveTo("#product_selling_points"),a.traceMultipleBtn(f),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(15);case 30:case"end":return e.stop()}},e,null,[[15,27]])}));return function(t){return e.apply(this,arguments)}}()),ko(To(a),"handleMultiTravelChange",function(){var e=Io(regeneratorRuntime.mark(function e(t){var n,r,o,i,c,s,l,u,d,m,p,f,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]&&h[1],r=a.store.getState(),o=r.pageStatus,i=r.routeInfo,c=r.BasicInfo,s=a.store.actions,l=s.UPDATE_MULTIPLE_TRAVEL,u=s.UPDATE_RESPONSE_DATA,o.activeAlias!==t){e.next=5;break}return e.abrupt("return");case 5:if(!(d=i[t])||!d.isLoaded){e.next=10;break}return u({pageStatus:Eo({},o,{activeAlias:t}),currentRouteInfo:d}),n&&a.moveTo("#product_selling_points"),e.abrupt("return");case 10:return m={ProductId:c.ProductId,DepartureCityId:c.DepartureId,Alias:[t],QueryNode:{IsTravelIntroductionInfo:!0},metricName:"ProductDetailTimingV5|MultiTravel"},e.prev=11,u({isShowMultiLineLoading:!0}),e.next=15,a.post("ProductDetailTiming",m);case 15:p=e.sent,f=p.Data,l({data:f,targetAlias:t}),u({isShowMultiLineLoading:!1}),n&&a.moveTo("#product_selling_points"),a.traceMultipleBtn(t),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(11);case 26:case"end":return e.stop()}},e,null,[[11,23]])}));return function(t){return e.apply(this,arguments)}}()),ko(To(a),"handleAppShare",function(){var e=a.store.getState().pageStatus;if(e.isInBestoneApp)a.handleBestoneShare();else{var t=!(e.isRetailshop||e.isMicroshop||e.isDiyfhxsdp),n=a.getShareData(t);CtripShare.app_call_custom_share(n)}}),ko(To(a),"handleBestoneShare",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.query,r=Eo({},n,{isBestoneShare:1,BSTChannelCode:mr.a.getCookie("bst_channelid")||n.bstchannelcode||"",ouid:mr.a.getCookie("bst_ouid")||""}),o=location.href.split("?")[0]+"?"+a.toQueryString(r),i={title:t.Title,desc:"\u8fd9\u6761\u7ebf\u8def\u76f8\u5f53\u8d5e\uff0c\u5feb\u6765\u770b\u770b~",imageUrl:a.getShareImage(),url:encodeURIComponent(o)};CQOTC.JSBridge.setShareInfo(i)}),ko(To(a),"scrollTop",0),ko(To(a),"handleScroll",function(){var e=window.pageYOffset;a.isScrollUp=a.scrollTop>e,a.scrollTop=e,a.traceElementExpos(),a.handleFixHeader(e),a.handleFixRoute(e);var t=a.getStickyHeight();a.handleTitleBarStatus(e,t),a.handleRouteSwitchStatus(e,t),a.handleHideFavouriteMenu(),a.throttleCheckPlayer(e,t)}),ko(To(a),"throttleCheckPlayer",vo.a.throttle(a.handleCheckPlayer,100)),ko(To(a),"handleFixHeader",function(e){var t=document.querySelector("#detail_header"),n=document.querySelector("#product_title"),r=document.querySelector(".tour_m_tabroute_wrap");t&&(e>0?(t.classList.contains("sticky")||(t.classList.add("tour_m_scroll"),t.classList.add("sticky"),n.style.display=""),a.setStatusBarStyle("default"),a.transformEleForXiongZhangBar(t,!0)):(t.classList.contains("sticky")&&(t.classList.remove("tour_m_scroll"),t.classList.remove("sticky"),n.style.display="none",r&&r.classList.add("tour_slideindown_hidden")),a.setStatusBarStyle("light"),a.transformEleForXiongZhangBar(t,!1)))}),ko(To(a),"handleFixRoute",function(e){var t=document.querySelector(".tour_m_tabroute_wrap");if(t){var n=document.querySelector(".tour_m_depart_wrap");if(n){var r=a.getEleOffsetTop(n),o=document.querySelector("#detail_header");if(o)e+o.getBoundingClientRect().height>=r?(t.classList.contains("tour_slideindown_hidden")&&t.classList.remove("tour_slideindown_hidden"),a.isScrollUp||t.classList.contains("tour_slideinup_animate")&&(t.classList.add("tour_slideindown_animate"),t.classList.add("tour_slideindown_fixed")),t.classList.remove("tour_slideinup_animate"),a.transformEleForXiongZhangBar(t,!0)):(t.classList.add("tour_slideinup_animate"),a.transformEleForXiongZhangBar(t,!1))}}}),ko(To(a),"handleTitleBarStatus",function(e,t){var n=a.store.getState().pageStatus,r=document.querySelector("#tab_basicInfo"),o=document.querySelector("#tab_comment"),i=document.querySelector("#tab_route"),c=document.querySelector("#tab_recommend"),s=document.querySelector("#product_basicInfo"),l=document.querySelector("#product_comment"),u=document.querySelector("#product_route_container"),d=document.querySelector("#product_recommend"),m=[r,o,i,c],p=function(e){m.map(function(e){e&&e.classList.contains("cur")&&e.classList.remove("cur")}),e&&!e.classList.contains("cur")&&e.classList.add("cur")},f=yo([s,l,u,d].map(function(n){return a.isVisiable(n,e,t)}),4),h=f[0],_=f[1],v=f[2],g=f[3];h?(p(r),a.handleToggleFixedButtonStatus("none")):_?(p(o),a.handleToggleFixedButtonStatus("none")):v?(p(i),a.handleToggleFixedButtonStatus("block"),n.isNativeHybrid&&CtripBusiness.app_do_business_job(9,"80036",{tab:2},Date.now(),function(){})):g&&(p(c),a.handleToggleFixedButtonStatus("block"),n.isNativeHybrid&&CtripBusiness.app_do_business_job(9,"80036",{tab:3},Date.now(),function(){}))}),ko(To(a),"handleRouteSwitchStatus",function(e,t){var n=document.querySelector("#product_route"),r=document.querySelector("#product_feature"),o=document.querySelector("#route_switcher");n&&(a.isVisiable(n,e,t)&&!a.isVisiable(r,e,t)?(o.style.display="block",setTimeout(function(){o&&o.classList.remove("tour_addAnimate")},5e3)):o.style.display="none")}),ko(To(a),"handleToggleFixedButtonStatus",function(e){if(!a.store.getState().pageStatus.isNativeHybrid){var t=document.querySelector("#fix_icon_container");t&&(t.style.display=e)}}),ko(To(a),"handleScrollToTabContent",function(e){a.moveTo(e)}),ko(To(a),"handleScrollToProductFeature",function(){a.moveTo("#product_feature")}),ko(To(a),"handleShowVendorPhonePop",function(){var e=a.store.actions.TOGGLE_VENDOR_PHONEPOP;document.body.style.overflow="hidden",e(!0)}),ko(To(a),"handleHideVendorPhonePop",function(){var e=a.store.actions.TOGGLE_VENDOR_PHONEPOP;document.body.style.overflow="",e(!1)}),ko(To(a),"handleHideScheduleTips",function(){var e=a.store.actions.HIDE_SCHEDULE_TIPS;wo.get()?wo.setAttr("shouldTips",!1):wo.set({shouldTips:!1}),e()}),ko(To(a),"handleRichTextClick",function(e){if(a.store.getState().isInCtripApp)switch(e.preventDefault(),e.target.tagName.toLowerCase()){case"img":a.handleClickRichTextImg(e);break;case"a":a.handleOpenWebview(e);break;default:return}}),ko(To(a),"handleOpenWebview",function(e,t){if(t){a.openUrl(t,2,{title:"",pageName:"tour_detail_link"})}else{if("a"===e.target.tagName.toLowerCase()){var n=e.target.href;if(n&&-1===n.indexOf("javascript")){var r=-1!==n.indexOf(".pdf"),o=-1!==n.indexOf(".doc"),i=-1!==n.indexOf("mailto");if(r||o||i)a.openUrl(n,3);else{var c={title:e.target.textContent,pageName:"tour_detail_link"};a.openUrl(n,2,c)}}}}}),ko(To(a),"handleClickRichTextImg",function(e){var t=e.target.closest("a");if(t){var n=t.href;a.openUrl(n,2,{title:"",pageName:"tour_detail_link"})}else a.handleShowNativeImg(e)}),ko(To(a),"handleShowNativeImg",function(e){if("img"===e.target.tagName.toLowerCase()){var t=[{imageUrl:e.target.src}];CtripUtil.app_show_photo_broswer(t,null,0,{isThumbnailModel:!1,businessCode:""})}}),ko(To(a),"handleCloseProposalOrderTip",function(){Bo.set({show:!1}),(0,a.store.actions.HIDE_PROPOSAL_ORDER_TIP)()}),ko(To(a),"handleSubmitProposalOrder",function(){var e=Io(regeneratorRuntime.mark(function e(t,n,r){var o,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.store.actions,i=o.UPDATE_PROPOSAL_ORDER_INFO,c=o.UPDATE_PROPOSAL_ORDER_STATUS,i({nameInput:t,phoneInput:n,textInput:r}),a.showLoading(),e.next=6,a.fetchCreateProposalOrder(t,n);case 6:return(s=e.sent)?(a.showToast("\u9884\u7ea6\u6210\u529f"),c(!0),a.hideLoading()):(a.showToast("\u63d0\u4ea4\u5931\u8d25"),a.hideLoading()),e.abrupt("return",s);case 9:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()),ko(To(a),"handleWebviewHorizontalScrollStart",function(){a.store.getState().pageStatus.isNativeHybrid&&CtripBusiness.app_do_business_job(9,"80038",{scrollStatus:1},Date.now(),function(){})}),ko(To(a),"handleWebviewHorizontalScrollEnd",function(){a.store.getState().pageStatus.isNativeHybrid&&CtripBusiness.app_do_business_job(9,"80038",{scrollStatus:2},Date.now(),function(){})}),ko(To(a),"handleShowShareTipMask",function(){(0,a.store.actions.TOGGLE_SHARE_TIP_MASK)(!0)}),ko(To(a),"handleHideShareTipMask",function(){(0,a.store.actions.TOGGLE_SHARE_TIP_MASK)(!1)}),ko(To(a),"handleGoodsRecommend",function(){try{var e=a.store.getState(),t=e.BasicInfo,n=e.MediaInfo.ImgList.map(function(e){return e.UrlList[0].Value.replace("_750_420_Q90","_800_600_Q100")}).slice(0,6),r={productId:t.ProductId,departCityId:t.DepartureId,ctm_ref:"vdc_ctm_2791",AllianceID:263528,SID:1793627},o="".concat(po.a[a.context.env],"/webapp/vacations/tour/detail?").concat(a.toQueryString(r)),i={url:encodeURIComponent(o)},c="/cwx/component/cwebview/cwebview?data="+JSON.stringify(i);__ctrip_weixin__.openGoodsRecommend({item_code:"VAC".concat(t.ProductId),title:t.MainName,desc:t.SubName,category_list:["\u8ddf\u56e2\u6e38"],image_list:n,src_wxapp_id:"wx0e6ed4f51db9d078",src_wxapp_path:c})}catch(s){}}),ko(To(a),"handleClickVideoPlayer",function(e){a.store.actions.TOGGLE_VIDEOPLAY_BUTTON(e)}),ko(To(a),"handleClickCheckMenu",function(e){a.store.actions.TOGGLE_SWITCHMEDIA_BUTTON(e)}),ko(To(a),"handleClickNetWorkStatusButton",function(e){a.store.actions.TOGGLE_NETWORK_CONTENT_BUTTON(e)}),ko(To(a),"handleGoBooking",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s,l,u,d,m,p,f,h,_,v,g,y,E,S,I,b,T,N,P=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P.length>0&&void 0!==P[0]?P[0]:"",n=a.store.getState(),r=n.query,o=n.pageStatus,i=n.ScheduleInfo,c=n.BasicInfo,s=n.BookInfo,l=n.SDPSegmentInfo,u=n.isInCtripApp,d=n.VendorInfo,m=n.isJumpTourCalendar,i&&s){e.next=4;break}return e.abrupt("return");case 4:if(s.IsBook&&i.HasInventory){e.next=6;break}return e.abrupt("return");case 6:if(document.querySelector(".js_booking")){e.next=8;break}return e.abrupt("return");case 8:if(!o.isVSalesMode||!o.isRetail){e.next=10;break}return e.abrupt("return");case 10:if(!o.isFromBST){e.next=12;break}return e.abrupt("return");case 12:p={pdid:c.ProductId,scid:c.SaleCityId,dcid:c.DepartureId,startDate:new de.a(de.a.transformTimeStamp(s.Start)).format(),endDate:new de.a(de.a.transformTimeStamp(s.End)).format(),date:t,isdt:c.IsDistribution?1:0,isTour:1,isProposalOrder:o.isProposalOrder?1:0,isds:!u&&r.advisorid&&r.roleid?1:0,line:o.activeProductId,locateCityId:r.locatecityid},o.isBestoneShare&&(p.dsprice=Math.ceil(Number(r.displayprice)),p.isds=1,p.ouid=r.ouid,p.BSTChannelCode=r.bstchannelcode),f=r.locatecityid,h=r.departcityid,_=r.crhdepartname,v=r.crhdeparttype,g=r.crhdestname,y=r.crhdesttype,_&&(p=Eo({},p,f&&f===h?{crhdepartname:_,crhdeparttype:v,crhdestname:g,crhdesttype:y}:{crhdepartname:c.DepartureCityName,crhdeparttype:2,crhdestname:g,crhdesttype:y})),E=l&&!l.IsFixSegment&&!o.isBestoneShare,!1,e.next=23;break;case 23:if(p.from=location.href,!o.isBstMiniProgram){e.next=31;break}S="/webapp/vacations/bestone/intention_book",p={auth:r.auth,appId:r.appid,storeTel:r.storetel,businessType:1,productId:r.productid,productName:c.Title,saleCityId:r.salecityid,departCityId:r.departcityid,departCityName:c.DepartureCityName,supplierId:d.VenderId,supplierName:d.VendorName,source:3,startDate:new de.a(de.a.transformTimeStamp(s.Start)).format(),endDate:new de.a(de.a.transformTimeStamp(s.End)).format()},S=po.a[a.context.env]+"".concat(S,"?").concat(a.toQueryString(p)),__ctrip_weixin__.miniProgram.navigateTo({url:"/pages/store/webview/common/common?url="+encodeURIComponent(S)}),e.next=60;break;case 31:if(!E){e.next=36;break}I="/webapp/vacations/diytour/freerouteedit",o.isBeston?(I="/webapp/vacations/bestonediy/freerouteedit",a.jump({url:I,params:p})):o.isCT?(I="/webapp/vacations/diyct/freerouteedit",a.jump({url:I,params:p})):mr.a.isInMiniProgram()?(I=po.a[a.context.env]+"".concat(I,"?").concat(a.toQueryString(p)),a.miniProgramJumpUrl(I)):mr.a.isInMixApp()?(I=po.a[a.context.env]+"".concat(I,"?").concat(a.toQueryString(p)),a.mixAppLogin(I)):a.jump({url:I,params:p}),e.next=60;break;case 36:if(!mr.a.isInMiniProgram()){e.next=41;break}b=po.a[a.context.env]+"/webapp/vacations/tour/calendar?".concat(a.toQueryString(p)),a.miniProgramJumpUrl(b),e.next=60;break;case 41:if(!mr.a.isInMixApp()){e.next=46;break}T=po.a[a.context.env]+"/webapp/vacations/tour/calendar?".concat(a.toQueryString(p)),a.mixAppLogin(T),e.next=60;break;case 46:if(!mr.a.isInZTApp()){e.next=59;break}return e.next=49,a.getZTAppUserInfo();case 49:if(!e.sent.IsLogin){e.next=55;break}"/calendar",a.goTo({url:"/calendar",params:p}),e.next=57;break;case 55:return a.ztAppLogin(),e.abrupt("return");case 57:e.next=60;break;case 59:o.isVSalesMode?("/calendar",a.goTo({url:"/calendar",params:p})):u?("/webapp/vacations/tour/calendar",p.isHideNavBar="YES",a.jump({url:"/webapp/vacations/tour/calendar",params:p})):(N=m?"/tourcalendar":"/calendar",a.goTo({url:N,params:p}));case 60:case"end":return e.stop()}},e)}))),ko(To(a),"handleGoReBook",function(){var e=a.store.getState(),t=e.isInCtripApp,n=e.BasicInfo,r=e.location;a.showToast("\u4ea7\u54c1\u4fe1\u606f\u53ef\u80fd\u6709\u53d8\u66f4\uff0c\u8bf7\u786e\u8ba4\u540e\u518d\u8d2d\u4e70");var o={productId:n.ProductId,departCityId:n.DepartureId,saleCityId:n.SaleCityId};if(t){var i="?"+a.toQueryString(o),c="ctrip://wireless/tour_vacation_detail".concat(i);setTimeout(function(){a.openUrl(c,1)},3e3)}else{var s=r.pathname;setTimeout(function(){a.goTo({url:s,params:o})},3e3)}}),ko(To(a),"handleGoPicList",function(){var e=a.store.getState(),t=e.query,n=e.MediaInfo,r=(void 0===n?{}:n).ImgList;if(r&&!(r.length<2)){var o={productId:t.productid};a.goTo({url:"/detail_picture_list",params:o})}}),ko(To(a),"handleGoComment",function(e,t){var n=a.store.getState(),r=n.query,o=n.BasicInfo,i={productId:r.productid,saleCityId:r.salecityid,departCityId:r.departcityid};e&&t&&(i.filtercategory=e,i.filtertagname=t);i=Eo({},i,{shouldShowQA:/^(1|3|4)$/.test(o.ProductPatternId)?1:0,aitags:1,from:location.href}),a.goTo({url:"/detail_comment_new",params:i})}),ko(To(a),"handleGoPeopleAsk",function(){var e=a.store.getState().query,t="/webapp/you/gsasks/packagetour/".concat(e.productid,".html"),n={navBarStyle:"white",from:location.href};a.jump({url:t,params:n,options:{isHideNavBar:!0}})}),ko(To(a),"handleGoStoreInfo",function(){var e=a.store.getState().NearbyStoreInfo.nearbyStoreUrl,t={from:location.href};a.jump({url:e,params:t})}),ko(To(a),"handleGoBookingNote",function(e){var t=a.store.getState(),n=t.pageStatus,r=t.query,o=r.productid,i=r.salecityid,c=r.departcityid,s=r.locatecityid;if(!n.isFromBST){var l={productId:o,saleCityId:i,departCityId:c};s&&(l=Eo({},l,{locateCityId:s})),1===e&&(l.default_clause=1),a.goTo({url:"/detail_booking_note",params:l})}}),ko(To(a),"handleGoCostMore",function(){var e=a.store.getState(),t=e.pageStatus,n=e.query,r=n.productid,o=n.salecityid,i=n.departcityid;if(!t.isFromBST){var c={productId:r,saleCityId:o,departCityId:i};a.goTo({url:"/detail_cost_more",params:c})}}),ko(To(a),"handleGoVisa",function(){var e=a.store.getState(),t=e.pageStatus,n=e.BasicInfo;if(!t.isFromBST){var r={productId:n.ProductId,saleCityId:n.SaleCityId,departCityId:n.DepartureId};a.goTo({url:"/detail_visa",params:r})}}),ko(To(a),"handleGoTravelNote",function(e){var t=a.store.getState().pageStatus,n=e.ename,r=e.id,o=e.did;if(!t.isFromBST){var i=location.href,c="/webapp/you/travels/".concat(n+o,"/").concat(r,".html?from=").concat(i);a.jump({url:c})}}),ko(To(a),"handleGoDingzhi",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.pageStatus;if(t&&!n.isFromBST){var r={productid:t.ProductId,departure:t.DepartureCityName,departureid:t.DepartureId,destination:t.DestCityName,destinationid:t.DestCityId,productOrigin:n.isDiyfhxsdp?2:1,isHideNavBar:"YES",from:location.href.replace(/&from=.*?(?=&|$)/i,"")};a.jump({url:"/webapp/dingzhi/demandAssign",params:r})}}),ko(To(a),"handleGoSixEnsure",function(){var e=a.store.getState().SixSecurityInfo.linkUrl;a.jump({url:e,params:{isHideNavBar:!0}})}),ko(To(a),"handleGoTravelButler",function(){a.jump({url:"https://pages.c-ctrip.com/groupTravelUED/app/201707/travel_butler.html",params:{isHideNavBar:!0}})}),ko(To(a),"handleGoHotel",function(e){var t=e.id,n=e.day;if(!a.store.getState().pageStatus.isFromBST){a.saveHotelAndScenicInfo();var r={id:t,day:n,from:location.href};a.jump({url:"/webapp/vacations/tour/detail_hotel",params:r,options:{isHideNavBar:!0}})}}),ko(To(a),"handleGoScenic",function(e){var t=e.id,n=e.day,r=e.address,o=e.restid,i=e.hasDinner,c=i?"1":"0";if(!a.store.getState().pageStatus.isFromBST)if(i)a.handleGoRestaurant(r,o);else{a.saveHotelAndScenicInfo();var s={id:t,day:n,isDinner:c,isHideNavBar:"YES",from:location.href};a.jump({url:"/webapp/vacations/tour/detail_scenic",params:s,options:{isHideNavBar:!0}})}}),ko(To(a),"handleGoRestaurant",function(e,t){var n="/webapp/you/foods/".concat(e,"/").concat(t,".html"),r={fromType:"hotel",isHideHeader:!0,from:location.href};a.jump({url:n,params:r})}),ko(To(a),"handleGoRecommendProduct",function(e){if(!a.store.getState().pageStatus.isFromBST){var t=a.store.getState().location.pathname;e=Eo({},e,{from:location.href}),a.goTo({url:t,params:e})}}),ko(To(a),"handleGoHotKey",function(e){var t=a.store.getState(),n=t.pageStatus,r=t.query;if(!n.isFromBST){var o={salecity:r.salecityid,kwd:e};a.jump({url:"/webapp/vacations/tour/list",params:o})}}),ko(To(a),"handleGoLeaderInfo",function(e){if(!a.store.getState().pageStatus.isFromBST&&e){var t={leaderid:e,from:location.href};a.jump({url:"/webapp/tourleaderhome/leader_detail",params:t})}}),ko(To(a),"handleGoMoreDetail",function(e){var t=a.store.getState(),n=t.pageStatus,r=t.location;if(!n.isFromBST)if(a.traceClickMoreDetail(e),n.isNativeHybrid){var o=e,i=o.productId,c=o.saleCityId,s=o.departCityId,l="ctrip://wireless/tour_vacation_detail?productId=".concat(i,"&saleCityId=").concat(c,"&departCityId=").concat(s,"&isHideNavBar=YES");a.openUrl(l,1)}else{var u=a.store.getState().location.pathname;e=Eo({},e,{from:r.raw.slice(1)}),a.goTo({url:u,params:e})}}),ko(To(a),"handleGoVendorRecommend",function(e){var t=a.store.getState(),n=t.pageStatus,r=t.location,o=t.query,i=o.salecityid,c=o.departcityid;if(n.isNativeHybrid){var s="ctrip://wireless/tour_vacation_detail?productId=".concat(e,"&saleCityId=").concat(i,"&departCityId=").concat(c,"&isHideNavBar=YES");a.openUrl(s,1)}else{var l=a.store.getState().location.pathname,u={productId:e,saleCityId:i,departCityId:c,from:r.raw.slice(1)};a.goTo({url:l,params:u})}}),ko(To(a),"handleGoSupplier",function(){a.goTo({url:"/supplier?detail=1"})}),ko(To(a),"handleGoSupplierPic",function(e){var t={providerId:e};a.goTo({url:"/supplier_pic",params:t})}),ko(To(a),"handleGoTagUrl",function(e){e&&a.jump({url:e})}),ko(To(a),"handleGoStarInfo",function(){a.jump({url:"https://m.ctrip.com/webapp/tours/marketing/index?pageid=911"})}),ko(To(a),"handleGoLeaderStandardInfo",function(){a.jump({url:"https://vacations.ctrip.com/notes/5520.html"})}),ko(To(a),"handleGoTopList",function(e){a.goTo({url:"/toplist",params:e})}),ko(To(a),"handleGoSelectPhoneCode",function(e,t,n){var r=a.store.getState().countryInfo,o={nameInput:e,phoneInput:t,textInput:n};Ro.set(o);var i=r;a.jump({url:"/webapp/vacations/tour/selectPhone",params:i})}),ko(To(a),"handleGoBonusPage",function(){var e={from:location.href};a.jump({url:"https://pages.c-ctrip.com/commerce/rewards/pointExplain/pointExplain.html",params:e})}),ko(To(a),"handleGoBestoneMakePoster",function(){var e=a.store.getState(),t=e.query,n=e.BasicInfo,r={productId:n.ProductId,saleCityId:n.SaleCityId,departCityId:n.DepartureId,ouid:mr.a.getCookie("bst_ouid"),channelId:mr.a.getCookie("bst_channelid")||t.bstchannelcode};a.jump({url:"/webapp/tours/marketing/app_poster",params:r})}),ko(To(a),"handleGoBestoneHoldOrder",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.PriceInfo,r={pdid:t.ProductId,scid:t.SaleCityId,dcid:t.DepartureId,price:n.AdviseMinPrice,from:location.href};a.jump({url:"/webapp/vacations/bestone/order",params:r})}),ko(To(a),"handleGoShopDetail",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.VendorInfo,r={brandId:n.BrandId,desCityId:t.DestCityId,detailId:t.ProductId,proId:n.VenderId,shopId:n.BrandScoreInfo.ShopId,saleMode:t.SaleMode,isNewStyle:"true",isHideNavBar:"YES",from:location.href};a.jump({url:"/webapp/vacations/shop/home",params:r})}),ko(To(a),"handleGoFavouriteList",function(){var e=a.store.getState().pageStatus,t={tagid:e.isStudy?"YOUXUE":e.isDiyfhxsdp?"FREE_TRAVEL_GROUP":"GROUP_TRAVEL",from:location.href};a.jump({url:"/webapp/favorite/index",params:t})}),ko(To(a),"handleGoMiniProgramHome",function(){a.miniProgramJumpUrl("https://m.ctrip.com/webapp/vacations/tour/index?ctm_ref=vdc_ctm_3095&allianceid=947272&sid=1858474",!1)}),ko(To(a),"handleGoMiniProgramWaken",function(){var e=a.store.getState().BasicInfo,t=e.ProductId,n=e.DepartureId,r="/pages/tour/waken/index?productid=".concat(t,"&departcityid=").concat(n);a.miniProgramJumpNativePage(r)}),ko(To(a),"handleGoMiniProgramActivityPage",function(e,t){a.miniProgramJumpUrl(e,t)}),ko(To(a),"handleGoMapDetail",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.pageStatus,r=n.activeProductId,o=n.activeAlias,i=t.DepartureId,c=(new Date).getTime(),s="/rn_tour_map/main.js?CRNModuleName=CTTourDetailMap&CRNType=1&navBarStyle=white&pdid=".concat(r,"&dcid=").concat(i,"&alias=").concat(o,"&timestamp=").concat(c);a.openUrl(s,5)}),ko(To(a),"showBookInfo",function(){setTimeout(function(){var e=document.querySelector(".m_book_info");e&&(e.style.display="block")&&e.classList.add("showed")},2e3),setTimeout(function(){var e=document.querySelector(".tour_hot_text");e&&(e.style.display="none")},5e3)}),ko(To(a),"getIMCode",function(){var e=a.store.getState().pageStatus;return e.isThemeProduct?"30000100":e.isStudy?"01330100":"01090100"}),ko(To(a),"setPageConfig",function(){a.setPageId(),a.setActionIdSuffix(),a.getABTestResult();var e=a.store.actions,t=e.UPDATE_ENV_PARAMS,n=e.SET_APP_VERSION;t(),n(),a.checkGoodsRecommendAvailable(),a.setBestoneBodyClassName(),a.setShareSource(),a.setCompareStatus(),a.setIMButton(),a.setXiongzhangBar(),a.setWechatShare(),a.setMiniProgramShare(),a.listenBestoneAppVolumeChange(),a.setAdvisorId(),a.traceInitLogs(),a.setPageScreenWidth()}),ko(To(a),"getABTestResult",Io(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.isInCtripApp,r=a.store.actions.UPDATE_ABTEST_RESULT,n){e.next=4;break}return e.abrupt("return");case 4:a.ABTestCodeList.forEach(function(){var e=Io(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getFrameABTestInfo(t);case 2:n=e.sent,r({code:t,result:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}))),ko(To(a),"setPageScreenWidth",function(){(0,a.store.actions.UPDATE_RESPONSE_DATA)({screenWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})}),ko(To(a),"checkGoodsRecommendAvailable",function(){var e=a.store.getState().pageStatus,t=a.store.actions.UPDATE_RESPONSE_DATA;e.isInMiniApp&&__ctrip_weixin__.checkJsApi(["openBusinessView"],function(e){var a=e.checkResult.openBusinessView;t({isGoodsRecommendAvailable:a})})}),ko(To(a),"setPageTDK",function(){var e=a.store.getState().BasicInfo;e&&(0,a.store.actions.UPDATE_RESPONSE_DATA)({html:{title:e.Title,description:e.Title,keywords:e.Title}})}),ko(To(a),"setActionIdSuffix",function(){var e=a.store.getState(),t=e.pageStatus,n=e.pageId;(0,a.store.actions.UPDATE_RESPONSE_DATA)({actionIdSuffix:"".concat(t.prodType,"-").concat(n)})}),ko(To(a),"setPageId",function(){var e={11:["220102","401019"],10:["220103","401020"],9:["220104","401021"],26:["220106","401023"],13:["223027","404027"],33:["600001565","600001573"],34:["600001565","600001573"],41:["600001565","600001573"],42:["600001565","600001573"],sale:["104313","401007"],route:["220133","401040"],theme:["600005137","600005140"],privileged:["220241","220241"],original:["220240","220240"],diyfhxsdp:["600000785","600000786"],pureDiyfhxsdp:["234017","411017"],bestone:["10320656600","10320656600"],bestoneShare:["10320656601","10320656601"],default:["600001565","600001573"]},t=a.store.getState(),n=t.isInCtripApp,r=t.pageStatus,o=t.query,i=t.BasicInfo;if(i){var c=i.ProductCategoryId;r.isDiyfhxsdp?c="diyfhxsdp":o.sharetype?c=o.sharetype:r.isThemeProduct?c="theme":r.isBeston&&!r.isBestoneShare?c="bestone":r.isBestoneShare&&(c="bestoneShare");var s=e[c]||e.default,l=n?s[1]:s[0];a.asyncSetPageId(l)}}),ko(To(a),"setShareSource",function(){var e=a.store.getState().query,t={share:e.share?encodeURIComponent(decodeURIComponent(e.share)):"",SourceID:e.sourceid||""};Ao.get()&&Ao.clear(),t&&Ao.set(t)}),ko(To(a),"setWechatShare",function(){if(mr.a.isInWechat()){var e=a.store.getState(),t=e.pageStatus,n=e.BasicInfo,r=location.href;if(t.isRetailshop){var o=mr.a.getAidSid(),i=o.aid,c=o.sid,s=o.ouid;s&&(/_S/.test(s)?s=s.replace(/_S_(O|I)(_Q)?/,"_S_O$2"):s+="_S_O",/allianceid=/i.test(r)?/ouid=/i.test(r)?r=r.replace(/ouid=.*?(&|$)/i,"ouid="+s+"$1"):r+="&ouid="+s:r+="&allianceid="+i+"&sid="+c+"&ouid="+s)}t.isFromBST&&(r+="&sfrom=bst");var l="\u8fd9\u6761\u65c5\u6e38\u7ebf\u8def\u6027\u4ef7\u6bd4\u633a\u9ad8\uff0c\u6709\u8c01\u548c\u6211\u4e00\u8d77\u53bb\u5417\uff1f";t.isPrivileged&&t.isMicroshop&&(l="\u8fd9\u6761\u65c5\u6e38\u7ebf\u8def\u592a\u8d5e\u4e86\uff0c\u643a\u7a0b\u5fae\u5e97\u4e3b\u4f7f\u7528\u7279\u6743\uff0c\u4e3a\u60a8\u8282\u7701\u4e861%\u7684\u65c5\u884c\u8d39\u7528\uff01\u6027\u4ef7\u6bd4\u8d85\u9ad8\uff0c\u4e0d\u770b\u540e\u6094\uff01");var u={title:n.Title,desc:l,href:r,icon:a.getShareImage()};a.initWeixinShare(u)}}),ko(To(a),"setMiniProgramShare",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.PriceInfo,r=e.pageStatus;if(mr.a.isInMiniProgram()&&!r.isBstMiniProgram){var o=t.ProductId,i=t.Title,c=t.DepartureId,s=t.SaleCityId,l=n.MinPrice,u="https://m.ctrip.com/tour/service/getShareImg?productId=".concat(o,"&price=").concat(l),d={productId:o,saleCityId:s,departCityId:c,ctm_ref:"vdc_ctm_1653",AllianceID:947144,SID:1526479},m="".concat(po.a[a.context.env],"/webapp/vacations/tour/detail?").concat(a.toQueryString(d));a.setMiniProgramShareData(i,m,u)}}),ko(To(a),"setAdvisorId",function(){var e=a.store.getState().query;if(e.advisorid){var t=de.a.format(new Date,"YYYY-MM-DD HH:mm:ss"),n=["p".concat(e.productid)],r=[e.advisorid,t];Mo.get()?Mo.setAttr(n,r):Mo.set({key:r})}}),ko(To(a),"getShareImage",function(){var e=a.store.getState().MediaInfo.ImgList,t="https://pic.c-ctrip.com/vacation_v2/h5/group_travel/pic_none.png";return e&&e[0]&&e[0].UrlList[0]&&e[0].UrlList[0].Value&&(t=e[0].UrlList[0].Value.replace("_500_280","_160_160")),t}),ko(To(a),"setCompareStatus",function(){var e=a.store.getState().query,t=a.store.actions,n=t.TOGGLE_COMPARE_STATUS,r=t.UPDATE_COMPARE_COUNT,o=Number(e.productid),i=(Do.get()||{}).dataList,c=void 0===i?[]:i;n(c.some(function(e){return e.pId===o})),r(c.length)}),ko(To(a),"getShareData",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.store.getState(),n=t.query,r=t.userStatus,o=t.pageStatus,i=t.BasicInfo,c=t.advisorId,s=t.PriceInfo,l=t.TravelList,u=e?{productId:i.ProductId,saleCityId:i.SaleCityId,departCityId:i.DepartureId}:Eo({},n),d=r.Uid?r.Uid:"nonuser";(c=n.advisorid||c)&&(u.advisorid=c),u.share=encodeURIComponent(mo.a.Base64.encode(d));var m="\u8fd9\u6761\u65c5\u6e38\u7ebf\u8def\u6027\u4ef7\u6bd4\u633a\u9ad8\uff0c\u6709\u8c01\u548c\u6211\u4e00\u8d77\u53bb\u5417\uff1f";if(e)o.isMultiLine?u=Eo({},u,{pkgType:"multiline",lineProductId:o.activeProductId}):o.isMultiTravel&&l&&l.length>1&&(u=Eo({},u,{pkgType:"multitravel",alias:o.activeAlias}));else{if(o.isRetailshop){var p=mr.a.getAidSid(),f=p.ouid,h=p.aid,_=p.sid;f&&(/_S/.test(f)?f=f.replace(/_S_(O|I)(_Q)?/,"_S_I$2"):f+="_S_I",u=Eo({},u,{allianceid:h,sid:_,ouid:f}))}o.isPrivileged&&o.isMicroshop&&(m="\u8fd9\u6761\u65c5\u6e38\u7ebf\u8def\u592a\u8d5e\u4e86\uff0c\u643a\u7a0b\u5fae\u5e97\u4e3b\u4f7f\u7528\u7279\u6743\uff0c\u4e3a\u60a8\u8282\u7701\u4e861%\u7684\u65c5\u884c\u8d39\u7528\uff01\u6027\u4ef7\u6bd4\u8d85\u9ad8\uff0c\u4e0d\u770b\u540e\u6094\uff01")}o.isRole13&&(u.advisorRoleId=13);var v="".concat(po.a[a.context.env],"/webapp/vacations/tour/detail?").concat(a.toQueryString(u)),g=a.getShareImage(),y=i.Title;return[{shareType:"WeixinFriend",imageUrl:"".concat(po.a[a.context.env],"/tour/service/getShareImg?productId=").concat(n.productid,"&price=").concat(s.MinPrice),title:y,text:m,linkUrl:v,miniProgramPath:"cwx/component/cwebview/cwebview?data="+JSON.stringify({url:encodeURIComponent(v)}),miniProgramID:"gh_36ada103ba97"},{shareType:"Copy",imageUrl:g,title:"",text:m,linkUrl:v},{shareType:"Default",imageUrl:g,title:y,text:m,linkUrl:v}]}),ko(To(a),"saveHotelAndScenicInfo",function(){var e=a.store.getState().currentRouteInfo;if(e){var t=e.TravelDetailList;if(t&&t.length){var n=[],r=[],o=[];t.forEach(function(e){var t=e.FewDay,a={day:t,data:[]},i={day:t,data:[]};e.hotelList.forEach(function(e){e.HotelInfoList.forEach(function(e,a){n.push({day:t,id:e.HotelID,name:e.HotelName,orFlag:0!==a})})}),e.scenicList.forEach(function(e,t){e.ScenicSpotList.forEach(function(t,n){var r=n>0&&!!e.ScenicSpotList[n-1].OrFlag;t.GSScenicSpotID&&a.data.push({id:t.GSScenicSpotID,name:t.Name,classic:t.IsClassic,orFlag:r})})}),e.dinnerList.forEach(function(e,t){var a=(e.DinnerInfo||{}).DinnerPoiInfoList;a&&a.forEach(function(e,t){e.GSScenicSpotID&&i.data.push({id:e.GSScenicSpotID,name:e.Name,classic:!1,orFlag:!1})})}),a.data.length&&r.push(a),i.data.length&&o.push(i)}),Oo.set({detail_hotel_list:n,detail_scenic_list:r,detail_dinner_list:o,share_data:a.getShareData()})}}}),ko(To(a),"saveDiyPoiList",function(){var e=a.store.getState().currentRouteInfo.TravelDetailList,t=[],n={};e.forEach(function(e){e.orderList.forEach(function(a){if([1].indexOf(a.ActiveType)&&a.HotelInfoList.forEach(function(r){r.HotelID>0&&(n[e.FewDay+"-"+r.HotelID]||(t.push(e.FewDay+"-"+r.HotelID),n[e.FewDay+"-"+r.HotelID]=a.ActiveType))}),[0,3,4,5,6,7].indexOf(a.ActiveType)){var r=0==a.ActiveType?a.DinnerInfo&&a.DinnerInfo.DinnerPoiInfoList:a.ScenicSpotList;(r=r||[]).forEach(function(r){r.GSScenicSpotID>0&&(n[e.FewDay+"-"+r.GSScenicSpotID]||(t.push(e.FewDay+"-"+r.GSScenicSpotID),n[e.FewDay+"-"+r.GSScenicSpotID]=a.ActiveType))})}})}),xo.set({data:{allPoiIds:t,activePoidMap:n}})}),ko(To(a),"getStickyHeight",function(e){var t=0;return e||(e=document.querySelectorAll(".sticky")),vo.a.forEach(e,function(e){return t+=e.getBoundingClientRect().height}),document.querySelector(".tour_m_tabroute_wrap")&&(t+=document.querySelector(".tour_m_tabroute_wrap").getBoundingClientRect().height),t}),ko(To(a),"isVisiable",function(e,t,n){if(!e)return!1;var r=a.getEleOffsetTop(e);return null!=t&&(t=a.scrollTop),null!=n&&(n=a.getStickyHeight()),!(t+window.innerHeight<=r)&&!(t+n>=r+e.getBoundingClientRect().height)}),ko(To(a),"removeDaycountTag",function(){var e=document.querySelector("#day_count");e&&(e.innerHTML="")}),ko(To(a),"moveTo",function(e){if(e){var t=document.querySelector(e);if(t){var n=a.getEleOffsetTop(t),r=a.getStickyHeight();n-=r,window.scrollTo(0,n+2),setTimeout(function(){var e=a.getStickyHeight();if(e!==r){var t=r-e;window.scrollBy(0,t)}},0)}}}),ko(To(a),"moveToDay",function(e){e||(e=1),a.moveTo("#day_".concat(e))}),ko(To(a),"getEleOffsetTop",function(e){return e.getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop}),ko(To(a),"checkProductInfo",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.isInCtripApp,r=e.query,o=e.location,i=e.BookInfo,c=a.store.actions.UPDATE_ERROR_MESSAGE,s=n&&"1"===r.has_native_header,l=!0;if(t){var u=Number(t.ProductCategoryId);if(isNaN(u)?l=!1:12!==u&&25!==u||(l=!1),!l){if(s)return;c("\u8be5\u4ea7\u54c1\u65e0\u6548")}var d=!i.IsActive;if(r.onlyforpreview&&"donotshare"===r.onlyforpreview.toLowerCase()&&(d=!1),d){a.traceBookErrorInfo({operation:"\u9875\u9762\u52a0\u8f7d",messageid:"vac_0079",message:"\u62b1\u6b49\uff0c\u8be5\u4ea7\u54c1\u65e0\u6548"});var m="/invalid".concat(o.search);a.redirect(m)}if(t.DepartureId){var p=t.DepartureId,f=Number(r.departcityid);if(p!==f){var h=Eo({},r,{departcityid:p});if(p!==f&&f&&(h.ChangedDepartCity=f),r.from&&(h.from=encodeURIComponent(r.from)),!s&&!a.isSEOSchema){var _="".concat(o.pathname,"?").concat(a.toQueryString(h));a.redirect(_)}}}}}),ko(To(a),"checkHasChangedDepartCity",function(){var e=a.store.getState().query;if(e.changeddepartcity){a.showToast("\u5df2\u4e3a\u60a8\u5207\u6362\u51fa\u53d1\u5730"),delete e.changeddepartcity;var t="?".concat(a.toQueryString(e));history.replaceState(null,"",t)}}),ko(To(a),"checkProductValid",function(){var e=a.store.getState(),t=e.pageStatus,n=e.BookInfo.IsBookChannelError,r=document.querySelector(".body");if(t.isBeston&&n){r.classList.add("grade_filter");var o={btns:[{name:"\u77e5\u9053\u4e86",onClick:function(){return a.handleBack()}}],content:"\u62b1\u6b49\uff0c\u672c\u4ea7\u54c1\u4e0d\u652f\u6301\u8be5\u6e20\u9053\u9500\u552e"};a.showAlert(o)}}),ko(To(a),"setXiongzhangBar",function(){var e=a.store.getState().query;"760785"!==e.allianceid||"1306324"!==e.sid&&"1330669"!==e.sid||window.XiongZhang&&window.XiongZhang.onload(function(){cambrian.bar({data:{type:"head",anchor:document.getElementById("root")}})})}),ko(To(a),"removeXiongZhangBar",function(){var e=document.querySelector("#cambrian0");e&&e.parentNode.removeChild(e)}),ko(To(a),"transformEleForXiongZhangBar",function(e,t){var a=document.querySelector("#cambrian0");if(a&&a.getBoundingClientRect().height){var n=a.getBoundingClientRect().height,r=t?{transition:"0.1s ease-out",transform:"translate3d(0px, ".concat(n,"px, 0px)"),"-webkit-transition":"0.1s ease-out","-webkit-transform":"translate3d(0px,  ".concat(n,"px, 0px)")}:{transition:"",transform:"","-webkit-transition":"","-webkit-transform":""};Object.assign(e.style,r)}}),ko(To(a),"toQueryString",function(e){if(!e.hasOwnProperty("from"))return ho.a.stringify(e);var t=e.from;delete e.from;var n=ho.a.stringify(e);return a.isInCtripApp()||(n+="&from=".concat(t)),n}),ko(To(a),"checkShouldChangeDepartCity",function(e,t){var n=a.store.getState(),r=n.TourGroupInfo,i=n.multipleDepartureCityInfo,c=n.query,s=n.location,l=i.currentCityName,u=i.DepartureCityList,d=u.filter(function(e){return e.DepartureCityName===l})[0].DepartureCityId,m=r.TourGroupProductInfo.filter(function(t){return t.ProductId===e})[0].DepartureCities;if(-1===m.indexOf(d)){var p={cityId:m[0],cityName:u.filter(function(e){return e.DepartureCityId===m[0]})[0].DepartureCityName},f={btns:[{name:"\u4e0d\u66f4\u6362",onClick:function(){a.hideAlert()}},{name:"\u66f4\u6362",onClick:function(){a.hideAlert(),h(e,p.cityId)}}],content:o.a.createElement("div",null,t,"\u7ebf\u4e0d\u652f\u6301\u4ece",l,"\u51fa\u53d1",o.a.createElement("br",null),"\u5efa\u8bae\u66f4\u6362\u4e3a",o.a.createElement("em",{className:"yellow_color_font"},p.cityName,"\u51fa\u53d1"))},h=function(e,t){var n=s.pathname,r=Eo({},c,{departcityid:t,lineproductid:e});"crh"===c.identifier&&(r.cityischanged=1),c.hasOwnProperty("from")&&(delete r.from,r.from=c.from),a.goTo({url:n,params:r})};return a.showAlert(f),a.traceTrainChangeCity(),!0}return!1}),ko(To(a),"createPreload",function(){return a.hasDetailMergeCss()?{}:{videocss:"/tour/css/video.css",detail_merge:"/tour/css/detail_merge.css",detail_tour2018:"/tour/css/detail_tour2018.css"}}),ko(To(a),"hasDetailMergeCss",function(){if(a.context.isServer)return!0;var e=document.querySelectorAll("link");return!!Array.from(e).find(function(e){return e.href.includes("detail_merge")})}),ko(To(a),"listenNativeEvent",function(){a.store.getState().pageStatus.isNativeHybrid&&(CtripEvent.addEventListener("TourDetailSwitchTitleBarEvent",function(e){switch(e.tab){case 0:case 1:window.scrollTo(0,0);break;case 2:a.moveTo("#product_route_container");break;case 3:a.moveTo("#product_recommend")}a.handleHideCatalog()}),CtripEvent.addEventListener("TourDetailWebviewFillWindowEvent",function(e){var t=document.querySelector("#fix_icon_container"),a=e.isFill?"block":"none";t&&(t.style.display=a)}))}),ko(To(a),"listenNativeSwicthLine",function(){var e=a.store.getState().pageStatus,t=e.isMultiLine,n=e.isMultiTravel;e.isNativeHybrid&&CtripEvent.addEventListener("TourDetailSwitchDepartLineEvent",function(e){var r=e.targetProductId,o=e.targetAlias;t&&a.handleMultiLineChange(Number(r),!0),n&&a.handleMultiTravelChange(o,!0)})}),ko(To(a),"listenBestoneAppVolumeChange",function(){var e=a.store.getState().pageStatus,t=a.store.actions.UPDATE_TRADE_MINPRICE_MODE;e.isInBestoneApp&&"undefined"!==typeof CQOTC&&CQOTC.JSBridge&&(CQOTC.JSBridge.volumeupbutton(function(){t(!1),Go.setVolumeStatus("up"),document.body.classList.remove("bestone_group_body")}),CQOTC.JSBridge.volumedownbutton(function(){t(!0),Go.setVolumeStatus("down"),document.body.classList.add("bestone_group_body")}))}),ko(To(a),"parseUrlParams",function(e,t){var n=t.pattern,r=t.params;if("/detail/*"===n){var o=/([a-zA-Z]+)/gi,i=/(\d+\-)?(\d+)(\-)?/gi;r[0].split(".")[0].match(/([a-zA-Z]+)(\d+\-)?(\d+)(\-)?/gi).forEach(function(t){switch(t.match(o)[0]){case"p":e.productid=t.match(i)[0];break;case"s":e.salecityid=t.match(i)[0];break;case"d":e.departcityid=t.match(i)[0]}}),a.isSEOSchema=!0}return e}),ko(To(a),"setBannerBoxSize",function(){var e=document.querySelector(".cm-slide-view");e&&(e.style.height=Math.ceil(document.body.clientWidth/500*280)+"px")}),ko(To(a),"checkIsFromSelectPhone",function(){Ro.get()&&((0,a.store.actions.UPDATE_RESPONSE_DATA)({orderPreInfo:Ro.get()}),a.handleShowProposalOrderMask(),Ro.clear())}),ko(To(a),"setBestoneBodyClassName",function(){var e=a.store.getState().pageStatus;e.isBeston&&document.body.classList.add("bestone_group_body"),e.isBestoneShare&&(document.body.classList.add("bestone_group_suggest"),document.body.classList.remove("bestone_group_body"))}),ko(To(a),"getCheckedQuery",function(e){var t={};return Object.keys(e).forEach(function(a){Array.isArray(e[a])?t[a]=e[a][0]:t[a]=e[a]}),t}),ko(To(a),"checkShouldRedirectOtherDetail",Io(regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.pageStatus,r=t.location,o=t.BasicInfo,!n.isPureDiyfhxsdp){e.next=7;break}return e.next=4,a.fetchDiyDetailPathConfig();case 4:i=e.sent,c=i?po.a[a.context.env]+"/webapp/vacations/idiytour/detail".concat(r.search):"/diydetail".concat(r.search),a.redirect(c);case 7:o&&15===o.ProductCategoryId&&(s=po.a[a.context.env]+"/webapp/vacations/visa/visa_detail".concat(r.search),a.redirect(s));case 8:case"end":return e.stop()}},e)}))),ko(To(a),"setScenesPromotionDelay",function(){a.ScenesCouponTimer=setTimeout(a.handleShowScenesCouponMask,3e4)}),ko(To(a),"cancelScenesPromotionDelay",function(){clearTimeout(a.ScenesCouponTimer)}),ko(To(a),"traceInitLogs",function(){var e=a.store.getState(),t=e.query,n=e.BasicInfo,r=e.userStatus,o=n.ProductCategoryId,i=n.DestCityId,c=t.productid,s=t.departcityid;a.sendTrack("view",o,{UID:r.Uid,IP:"",From:s,To:i,ProductID:c}),a.traceAppRemarketing(),a.traceStudy(o,c),a.traceFromAd(!0),a.traceBasicInfo()}),ko(To(a),"traceBasicInfo",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.isInCtripApp,r=e.pageStatus,o=n?"pkg_dtl_loading_app":"pkg_dtl_loading_h5",i={pkgid:t.ProductId,stcityid:t.DepartureId,slcityid:t.SaleCityId,pagebu:r.prodType};a.tracelog(o,JSON.stringify(i))}),ko(To(a),"sendTrack",function(e,t,n){if(e&&t&&n){var r=[],o="";if(10==t?"view"==e?o="TOUR.BROWSE.DOMESTIC.LONG":"quit"==e?o="TOUR.BOOKING.DOMESTIC.LONG":"complete"==e&&(o="TOUR.BOOKINGRESULT.DOMESTIC.LONG"):9==t?"view"==e?o="TOUR.BROWSE.DOMESTIC.NDAY":"quit"==e?o="TOUR.BOOKING.DOMESTIC.NDAY":"complete"==e&&(o="TOUR.BOOKINGRESULT.DOMESTIC.NDAY"):11==t?"view"==e?o="TOUR.BROWSE.ABROAD.LONG":"quit"==e?o="TOUR.BOOKING.ABROAD.LONG":"complete"==e&&(o="TOUR.BOOKINGRESULT.ABROAD.LONG"):26==t?"view"==e?o="TOUR.BROWSE.ABROAD.NDAY":"quit"==e?o="TOUR.BOOKING.ABROAD.NDAY":"complete"==e&&(o="TOUR.BOOKINGRESULT.ABROAD.NDAY"):13==t&&("view"==e?o="CRUISE.BROWSE":"quit"==e?o="CRUISE.BOOKING":"complete"==e&&(o="CRUISE.BOOKINGRESULT")),o){for(var i in n)r.push([i,"=",n[i]].join(""));a.tracelog(o,r.join("&"))}}}),ko(To(a),"traceAppRemarketing",function(){var e=a.store.getState(),t=e.isInCtripApp,n=e.query,r=e.pageStatus,o=e.BasicInfo,i=n.productid,c=n.salecityid,s=n.departcityid,l=o.ProductCategoryId;if(t){var u="p".concat(i,"s").concat(c,"d").concat(s);if(/9|10|33|41/.test(l)){var d="";d=r.isStudy?"youxue-detail-inland-".concat(u):"grouptravel-detail-domestic-".concat(u),CtripBusiness.app_log_google_remarkting(d,{type:"hybrid"})}if(/11|26|34|42/.test(l)){var m="";m=r.isStudy?"youxue-detail-int-".concat(u):"grouptravel-detail-overseas-".concat(u),CtripBusiness.app_log_google_remarkting(m,{type:"hybrid"})}}}),ko(To(a),"traceStudy",function(e,t){var n=a.store.getState().isInCtripApp;if(33==e||34==e||41==e||42==e){var r="\u56fd\u5185\u6e38\u5b66";34==e?r="\u51fa\u5883\u6e38\u5b66":41==e?r="\u56fd\u5185\u5fae\u6e38\u5b66":42==e&&(r="\u51fa\u5883\u5fae\u6e38\u5b66");var o=n?"pkg_youxue_protype_APP":"pkg_youxue_protype_h5",i="type="+r+"&productid="+t;a.tracelog(o,i)}}),ko(To(a),"traceFromAd",function(e){var t=a.store.getState().query,n=e?"pkg_dtl_wakeupfirst_app":"pkg_dtl_wakeupfinal_app",r={type:"pkg",pkgid:t.productid,slcityid:t.salecityid,ts:(new Date).getTime(),guid:t.guid||""};a.tracelog(n,JSON.stringify(r))}),ko(To(a),"traceTrainChangeCity",function(){var e=a.store.getState().query;if("crh"===e.identifier){var t={pkgid:e.productid,slcityid:e.salecityid,pagebu:"grp"};a.tracelog("pkg_dtl_changecity_expose",JSON.stringify(t))}}),ko(To(a),"traceBigData",function(){var e=a.store.getState(),t=e.pageStatus,n=e.query,r=e.isInCtripApp,o=e.BasicInfo,i=e.BookInfo,c=e.ScheduleInfo,s=e.PriceInfo;if(i&&c&&s){var l=r?"pkg_detail_view_app_basic":"pkg_detail_view_h5_basic",u={to_poi:{poiname:o.DestCityName,poiid:o.DestCityId},from:{cityname:o.DepartureCityName,cityid:o.DepartureId},vacationtype:t.isDiyfhxsdp?"diy":"pkg",productid:n.productid,is_sold:i.IsBook&&c.HasInventory?0:1,price:s.MinPrice};a.tracelog(l,JSON.stringify(u))}}),ko(To(a),"traceMultipleBtn",function(e){var t=a.store.getState(),n=t.query,r=t.isInCtripApp?"pkg_dtl_linetab_app":"pkg_dtl_linetab_h5",o={pkgid:n.productid,slcityid:n.salecityid,stcityid:n.departcityid,butab:"grp",button:e};a.tracelog(r,JSON.stringify(o))}),ko(To(a),"traceEmotionalCues",function(){var e=a.store.getState(),t=e.EmotionalCues,n=e.query,r=t.filter(function(e){return"productselling"===e.PromptType})[0],o=t.filter(function(e){return"bookingdynamic"===e.PromptType})[0];if(r){var i={productid:n.productid,scene_name:r.SceneName,scene_weight:r.Weight,scene_msg:r.Content};a.tracelog("c_vac_abtest_pr_emtn_prd_scene_msg",JSON.stringify(i))}if(o){var c={productid:n.productid,scene_name:o.SceneName,scene_weight:o.Weight,scene_msg:o.Content};a.tracelog("c_vac_abtest_pr_emtn_prd_scene_msg",JSON.stringify(c))}}),ko(To(a),"traceScenicHotel",function(){var e=a.store.getState(),t=e.query,n=e.isInCtripApp?"diy_dtl_pichtl_click_app":"diy_dtl_pichtl_click_h5",r={pkgid:t.productid,slcityid:t.salecityid,stcityid:t.departcityid};a.tracelog(n,JSON.stringify(r))}),ko(To(a),"traceSummaryIcon",function(e){var t=a.store.getState(),n=t.query,r=t.isInCtripApp?"diy_dtl_schdl_click_app":"diy_dtl_schdl_click_h5",o={pkgid:n.productid,slcityid:n.salecityid,stcityid:n.departcityid,button:e};a.tracelog(r,JSON.stringify(o))}),ko(To(a),"traceRankingInfo",function(){var e=a.store.getState(),t=e.query;if(e.RankingInfo){var n={pkgid:t.productid,departcityid:t.departcityid,pagebu:"grp"};a.tracelog("pkg_dtl_ranklist_expose",JSON.stringify(n))}}),ko(To(a),"traceBookErrorInfo",function(e){var t=a.store.getState(),n=t.query,r=t.pageStatus,o=t.pageId,i={businessline:r.isDiyfhxsdp?"sdp1.0":"grp",merchandiseid:n.productid,pageid:o,operation:e.operation,messageid:e.messageid,message:e.message,startcity:n.departcityid};a.tracelog("vacation_usershoppinginterruption_vac",JSON.stringify(i))}),ko(To(a),"traceProposalOrderExpose",function(){var e=a.store.getState(),t=e.isShowProposalOrderTip,n=e.IMEntryInfo,r=e.BasicInfo;e.pageStatus;if(t&&n&&n.Inquiry&&(n.Mobile||n.AfterSaleTel)&&!(r.TravelDays<4)&&/^(1|3|4)$/.test(r.ProductPatternId)&&/^(9|10|11|26)$/.test(r.ProductCategoryId)){a.tracelog("pkg_detail_specialcounsel_expose",JSON.stringify({pagebu:"grp"}))}}),ko(To(a),"traceCanNotBook",function(){var e=a.store.getState(),t=e.pageStatus,n=e.ScheduleInfo;t.isBook&&n.HasInventory||a.traceBookErrorInfo({operation:"\u9875\u9762\u52a0\u8f7d",messageid:"vac_0080",message:"\u5df2\u552e\u5b8c"})}),ko(To(a),"traceScenesCouponExpose",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.ScenesCoupon,r={pkgid:t.ProductId,couponid:n.PromotionId};a.tracelog("grp_detail_redbag_expo",JSON.stringify(r))}),ko(To(a),"traceTakeScenesCouponSuccess",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.ScenesCoupon,r={pkgid:t.ProductId,couponid:n.PromotionId};a.tracelog("grp_detail_redbag_received_expo",JSON.stringify(r))}),ko(To(a),"traceTakeScenesCouponFailed",function(){var e=a.store.getState(),t=e.BasicInfo,n=e.ScenesCoupon,r={pkgid:t.ProductId,couponid:n.PromotionId};a.tracelog("grp_detail_redbag_failed_expo",JSON.stringify(r))}),ko(To(a),"traceClickMoreDetail",function(e){var t=a.store.getState(),n=t.BasicInfo,r=t.pageStatus,o={pkgid:n.ProductId,recpkgid:e.productId,dtcityid:n.DestCityId,departcityid:n.DepartureId,pagebu:r.isDiyfhxsdp?"diy":"grp"};a.tracelog("pkg_detail_recmmend_product",JSON.stringify(o))}),a.preload=a.createPreload(),a}var a,r,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Co(e,t)}(t,i["a"]),a=t,(r=[{key:"getInitialState",value:function(){var e=Io(regeneratorRuntime.mark(function e(a){var n,r,o,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,No(Po(t.prototype),"getInitialState",this).call(this,a);case 2:return n=e.sent,r=n.query,o=n.location,r=this.getCheckedQuery(r),r=this.parseUrlParams(r,o),e.next=8,this.getUserInfo();case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:return i=e.t0,c=lr(r),s=n.isInCtripApp&&"1"===r.has_native_header,e.abrupt("return",Eo({},n,a,{query:r,userStatus:i,pageStatus:Eo({},c,{isNativeHybrid:s})}));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"shouldComponentCreate",value:function(){var e=this.store.getState().query;if(e.snapshotid){var t="/diydetail?".concat(this.toQueryString(e));return this.redirect(t),!1}}},{key:"componentWillCreate",value:function(){var e=Io(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.store.getState(),a=t.query,n=this.store.actions.UPDATE_ERROR_MESSAGE,a.productid&&!isNaN(Number(a.productid))){e.next=7;break}return"\u4ea7\u54c1ID\u9519\u8bef\uff0c \u8bf7\u8fd4\u56de\u4e0a\u9875\u91cd\u65b0\u9009\u62e9",n("\u4ea7\u54c1ID\u9519\u8bef\uff0c \u8bf7\u8fd4\u56de\u4e0a\u9875\u91cd\u65b0\u9009\u62e9"),e.abrupt("return");case 7:return e.next=9,this.fetchProductInfo();case 9:return e.next=11,this.checkShouldRedirectOtherDetail();case 11:return e.next=13,this.fetchLineProductDepartCityInfo();case 13:return e.next=15,Promise.all([this.fetchProductBookInfo(),this.fetchDescriptionInfo()]);case 15:this.checkProductInfo(),this.setPageTDK();case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidFirstMount",value:function(){var e=Io(regeneratorRuntime.mark(function e(){var t,a,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setTransparentForWindow(),t=this.store.getState(),!(a=t.ErrorMessage)){e.next=6;break}return this.showToast(a),setTimeout(function(){r.handleBack()},2e3),e.abrupt("return");case 6:return this.checkHasChangedDepartCity(),this.setPageConfig(),this.checkProductValid(),this.listenNativeEvent(),n=this.fetchProductTimingInfo(),this.fetchCalendarPathConfig(),this.fetchCommentInfo(),this.fetchProductExtendInfo(),this.fetchRankingInfo(),this.fetchPeopleAskInfo(),this.fetchEmotionalCues(),this.fetchCouponInfo(),this.fetchScenesCouponInfo(),this.fetchStoreInfo(),this.fetchVendorRecommend(),this.fetchCollectStateInfo(),this.fetchQConfigInfo(),this.fetchLoginUserAdvisorId(),this.fetchAdvisorInfo(),this.fetchIMEntryInfo(),this.fetchCreditInfo(),this.fetchUserCommonInfo(),e.next=30,n;case 30:this.fetchCompositeCouponInfo(),this.fetchMultiLineInfo(),this.fetchBrandScoreInfo(),this.listenNativeSwicthLine(),this.traceFromAd(!1),this.traceBigData(),this.traceCanNotBook();case 37:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setBannerBoxSize(),this.checkIsFromSelectPhone(),window.addEventListener("scroll",this.handleScroll,{passive:!1}),window.addEventListener("resize",this.setPageScreenWidth)}},{key:"componentWillUnmount",value:function(){this.removeXiongZhangBar(),this.cancelScenesPromotionDelay(),window.removeEventListener("scroll",this.handleScroll,{passive:!1}),window.removeEventListener("resize",this.setPageScreenWidth)}},{key:"pageWillLeave",value:function(e){(e.pathname===this.location.pathname||["/list","/toplist","/index","/home","/vacations","/"].indexOf(e.pathname)>-1)&&this.removeFromCache()}},{key:"pageDidBack",value:function(){var e=document.querySelector(".m_book_info");e&&e.classList.contains("showed")&&(e.style.display="none"),this.setXiongzhangBar()}},{key:"onLoginSuccess",value:function(){var e=Io(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserInfo();case 2:t=e.sent,(0,this.store.actions.UPDATE_RESPONSE_DATA)({userStatus:t}),this.fetchCouponInfo(),this.fetchCollectStateInfo(),this.fetchLoginUserAdvisorId(),this.fetchUserCommonInfo(),this.fetchCreditInfo();case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"goTo",value:function(e){var a=e.url,n=e.params,r=e.options,o=this.store.getState().pageStatus;if(mr.a.isInMiniProgram())return n&&n.from&&delete n.from,a=po.a[this.context.env]+"/webapp/vacations/tour".concat(a,"?").concat(ho.a.stringify(n)),void this.miniProgramJumpUrl(a,!1);if(o.isNativeHybrid){a=po.a[this.context.env]+"/webapp/vacations/tour".concat(a,"?").concat(ho.a.stringify(n));this.openUrl(a,2,{isHideNavBar:!0})}else this.showLoading(),No(Po(t.prototype),"goTo",this).call(this,{url:a,params:n,options:r}),this.hideLoading()}},{key:"jump",value:function(e){var a=e.url,n=e.params,r=e.options;if(mr.a.isInMiniProgram())return a.startsWith("http")||(a=po.a[this.context.env]+"".concat(a,"?").concat(this.toQueryString(n))),void this.miniProgramJumpUrl(a,!1);this.isInCtripApp()&&n&&n.from&&delete n.from,No(Po(t.prototype),"jump",this).call(this,{url:a,params:n,options:r})}},{key:"handleCheckPlayer",value:function(e,t){var a=this.store.getState(),n=a.isShowVideoPlayerContent,r=a.hasVideo,o=a.isShowSwitchMediaMode,i=a.isShowPlayVideoButtonMode,c=a.isShowNetworkStatusContent,s=this.store.actions,l=s.TOGGLE_SWITCHMEDIA_BUTTON,u=s.UPDATE_ISSHOW_SWITCHMEDIA_BUTTON;if(n){var d=document.getElementById("product-video");this.isVisiable(d,e,t)||l(!1)}!r||c||i||(e>0&&o?u(!1):0===e&!o&&u(!0))}},{key:"moveToCurrentDay",value:function(){var e=document.querySelector("#day_count");if(e){var t=Number(e.getAttribute("data-current-day"));this.moveToDay(t)}}},{key:"setIMButton",value:function(){var e=this.store.getState(),t=e.BasicInfo,a=e.pageStatus,n=e.actionIdSuffix,r=this.store.actions.UPDATE_IM_PARAMS;if(!a.isNativeHybrid&&!t.IsDistribution&&"R"!==t.SaleMode){var o="".concat(n,"-mask-IM"),i={IMCode:this.getIMCode(),productId:t.ProductId,saleCityId:t.SaleCityId,departureCityId:t.DepartureId,destinationIdList:[t.DestCityId],platformId:1,extendJson:{Platform:"H5"},actionId:o};a.isInMiniApp&&(i.notShowFixedButton=!0),r(i)}}}])&&bo(a.prototype,r),c&&bo(a,c),t}()}}]);