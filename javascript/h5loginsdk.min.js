var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var n;if(e)for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){var n;if(e)for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,o){!n&&hasProp(e,o)||(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[o]=t:(e[o]||(e[o]={}),mixin(e[o],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var o=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return o.requireType=e,o.requireModules=i,n&&(o.originalError=n),o}function newContext(e){function t(e,t,n){var i,o,r,s,a,c,d,l,u,g,f=t&&t.split("/"),m=f,p=b.map,h=p&&p["*"];if(e&&"."===e.charAt(0)&&(t?(m=f.slice(0,f.length-1),c=(e=e.split("/")).length-1,b.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),function(e){var t,n,i=e.length;for(t=0;t<i;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}(e=m.concat(e)),e=e.join("/")):0===e.indexOf("./")&&(e=e.substring(2))),n&&p&&(f||h)){o=e.split("/");e:for(r=o.length;r>0;r-=1){if(a=o.slice(0,r).join("/"),f)for(s=f.length;s>0;s-=1)if((i=getOwn(p,f.slice(0,s).join("/")))&&(i=getOwn(i,a))){d=i,l=r;break e}!u&&h&&getOwn(h,a)&&(u=getOwn(h,a),g=r)}!d&&u&&(d=u,l=g),d&&(o.splice(0,l,d),e=o.join("/"))}return getOwn(b.pkgs,e)||e}function n(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===y.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=getOwn(b.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),y.require.undef(e),y.require([e]),!0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function r(e,n,i,r){var s,a,c,d,l=null,u=n?n.name:null,g=e,f=!0,m="";return e||(f=!1,e="_@r"+(L+=1)),l=(d=o(e))[0],e=d[1],l&&(l=t(l,u,r),a=getOwn(D,l)),e&&(l?m=a&&a.normalize?a.normalize(e,function(e){return t(e,u,r)}):t(e,u,r):(l=(d=o(m=t(e,u,r)))[0],m=d[1],i=!0,s=y.nameToUrl(m))),{prefix:l,name:m,parentMap:n,unnormalized:!!(c=!l||a||i?"":"_unnormalized"+(E+=1)),url:s,originalName:g,isDefine:f,id:(l?l+"!"+m:m)+c}}function s(e){var t=e.id,n=getOwn(k,t);return n||(n=k[t]=new y.Module(e)),n}function a(e,t,n){var i=e.id,o=getOwn(k,i);!hasProp(D,i)||o&&!o.defineEmitComplete?(o=s(e)).error&&"error"===t?n(o.error):o.on(t,n):"defined"===t&&n(D[i])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(k,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function d(){globalDefQueue.length&&(apsp.apply(x,[x.length,0].concat(globalDefQueue)),globalDefQueue=[])}function l(e){delete k[e],delete S[e]}function u(){var e,t,o=1e3*b.waitSeconds,r=o&&y.startTime+o<(new Date).getTime(),s=[],a=[],d=!1,l=!0;if(!h){if(h=!0,eachProp(S,function(e){var o=e.map,c=o.id;if(e.enabled&&(o.isDefine||a.push(e),!e.error))if(!e.inited&&r)i(c)?(t=!0,d=!0):(s.push(c),n(c));else if(!e.inited&&e.fetched&&o.isDefine&&(d=!0,!o.prefix))return l=!1}),r&&s.length)return(e=makeError("timeout","Load timeout for modules: "+s,null,s)).contextName=y.contextName,c(e);l&&each(a,function(e){!function t(e,n,i){var o=e.map.id;e.error?e.emit("error",e.error):(n[o]=!0,each(e.depMaps,function(o,r){var s=o.id,a=getOwn(k,s);!a||e.depMatched[r]||i[s]||(getOwn(n,s)?(e.defineDep(r,D[s]),e.check()):t(a,n,i))}),i[o]=!0)}(e,{},{})}),r&&!t||!d||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,u()},50)),h=!1}}function g(e){hasProp(D,e[0])||s(r(e[0],null,!0)).init(e[1],e[2])}function f(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return f(t,y.onScriptLoad,"load","onreadystatechange"),f(t,y.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function p(){var e;for(d();x.length;){if(null===(e=x.shift())[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));g(e)}}var h,C,y,v,w,b={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},k={},S={},U={},x=[],D={},M={},T={},L=1,E=1;return v={require:function(e){return e.require?e.require:e.require=y.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?D[e.map.id]=e.exports:e.exports=D[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(b.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(C=function(e){this.events=getOwn(U,e.id)||{},this.map=e,this.shim=getOwn(b.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,y.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();y.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;M[e]||(M[e]=!0,y.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,o=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=y.execCb(n,r,i,o)}catch(t){e=t}else o=y.execCb(n,r,i,o);if(this.map.isDefine&&void 0===o&&((t=this.module)?o=t.exports:this.usingExports&&(o=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else o=r;this.exports=o,this.map.isDefine&&!this.ignore&&(D[n]=o,req.onResourceLoad&&req.onResourceLoad(y,this.map,this.depMaps)),l(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,i=r(e.prefix);this.depMaps.push(i),a(i,"defined",bind(this,function(i){var o,d,u,g=getOwn(T,this.map.id),f=this.map.name,m=this.map.parentMap?this.map.parentMap.name:null,p=y.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(f=i.normalize(f,function(e){return t(e,m,!0)})||""),a(d=r(e.prefix+"!"+f,this.map.parentMap),"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((u=getOwn(k,d.id))&&(this.depMaps.push(d),this.events.error&&u.on("error",bind(this,function(e){this.emit("error",e)})),u.enable()))):g?(this.map.url=y.nameToUrl(g),void this.load()):((o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],eachProp(k,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&l(e.map.id)}),c(e)}),o.fromText=bind(this,function(t,i){var a=e.name,d=r(a),l=useInteractive;i&&(t=i),l&&(useInteractive=!1),s(d),hasProp(b.config,n)&&(b.config[a]=b.config[n]);try{req.exec(t)}catch(e){return c(makeError("fromtexteval","fromText eval for "+n+" failed: "+e,e,[n]))}l&&(useInteractive=!0),this.depMaps.push(d),y.completeLoad(a),p([a],o)}),void i.load(e.name,p,o,b))})),y.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,o;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(v,e.id))return void(this.depExports[t]=o(this));this.depCount+=1,a(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&a(e,"error",bind(this,this.errback))}n=e.id,i=k[n],hasProp(v,n)||!i||i.enabled||y.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(k,e.id);t&&!t.enabled&&y.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(y={config:b,contextName:e,registry:k,defined:D,urlFetched:M,defQueue:x,Module:C,makeModuleMap:r,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=b.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(b[t]||(b[t]={}),mixin(b[t],e,!0,!0)):b[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(T[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=y.makeShimExports(e)),t[n]=e}),b.shim=t),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(b.paths[t]=e.location),b.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(k,function(e,t){e.inited||e.map.unnormalized||(e.map=r(t))}),(e.deps||e.callback)&&y.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(i,o){function a(t,n,d){var l,g;return o.enableBuildCallback&&n&&isFunction(n)&&(n.__requireJsBuild=!0),"string"==typeof t?isFunction(n)?c(makeError("requireargs","Invalid require call"),d):i&&hasProp(v,t)?v[t](k[i.id]):req.get?req.get(y,t,i,a):(l=r(t,i,!1,!0).id,hasProp(D,l)?D[l]:c(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(i?"":". Use require([])")))):(p(),y.nextTick(function(){p(),(g=s(r(null,i))).skipMap=o.skipMap,g.init(t,n,d,{enabled:!0}),u()}),a)}return o=o||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var n,o=e.lastIndexOf("."),r=e.split("/")[0];return-1!==o&&(!("."===r||".."===r)||o>1)&&(n=e.substring(o,e.length),e=e.substring(0,o)),y.nameToUrl(t(e,i&&i.id,!0),n,!0)},defined:function(e){return hasProp(D,r(e,i,!1,!0).id)},specified:function(e){return e=r(e,i,!1,!0).id,hasProp(D,e)||hasProp(k,e)}}),i||(a.undef=function(e){d();var t=r(e,i,!0),o=getOwn(k,e);n(e),delete D[e],delete M[t.url],delete U[e],eachReverse(x,function(t,n){t[0]===e&&x.splice(n,1)}),o&&(o.events.defined&&(U[e]=o.events),l(e))}),a},enable:function(e){getOwn(k,e.id)&&s(e).enable()},completeLoad:function(e){var t,n,o,r=getOwn(b.shim,e)||{},s=r.exports;for(d();x.length;){if(null===(n=x.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);g(n)}if(o=getOwn(k,e),!t&&!hasProp(D,e)&&o&&!o.inited){if(!(!b.enforceDefine||s&&getGlobal(s)))return i(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));g([e,r.deps||[],r.exportsFn])}u()},nameToUrl:function(e,t,n){var i,o,r,s,a,c,d=getOwn(b.pkgs,e);if(d&&(e=d),c=getOwn(T,e))return y.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(i=b.paths,r=(o=e.split("/")).length;r>0;r-=1)if(a=getOwn(i,o.slice(0,r).join("/"))){isArray(a)&&(a=a[0]),o.splice(0,r,a);break}s=o.join("/"),s=("/"===(s+=t||(/^data\:|\?/.test(s)||n?"":".js")).charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":b.baseUrl)+s}return b.urlArgs?s+(-1===s.indexOf("?")?"?":"&")+b.urlArgs:s},load:function(e,t){req.load(y,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);y.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);if(!i(t.id))return c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}}).require=y.makeRequire(),y}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.11",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var o,r,s=defContextName;return isArray(e)||"string"==typeof e||(r=e,isArray(t)?(e=t,t=n,n=i):e=[]),r&&r.context&&(s=r.context),(o=getOwn(contexts,s))||(o=contexts[s]=req.s.newContext(s)),r&&o.configure(r),o.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,o=e&&e.config||{};if(isBrowser)return(i=req.createNode(o,t,n)).setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var i,o;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(e||(e=i.getAttribute("data-requiremodule")),o=contexts[i.getAttribute("data-requirecontext")]),(o?o.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("accountInfoBiz",["accountInfoModel","basebizUtilString"],function(e,t){return{getAccountInfo:function(n,i,o,r,s){var a=t.trim(n);a&&0!=a.length?e.getAccountInfo(a,i,o,r,s):s&&s(CUserSDK.messageConfig.loginNameIsNullMsg)},getLastLoginInfo:function(t){e.getLastLoginInfo(t)}}}),define("accountInfoModel",["baseModel"],function(e){return{getAccountInfo:function(t,n,i,o,r){var s={};s.AccountHead={Token:i,SliderVersion:o,Platform:"P"},s.Data={loginName:t,loginNameType:n};e.sendgatewaydata(CUserSDK.ApiUrlConfig.accountInfoUrl,s,!0,function(e){r&&r(e)},function(e){r&&r(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},getLastLoginInfo:function(t){e.senddata(CUserSDK.ApiUrlConfig.getLastLoginInfoUrl,{},function(e){t&&t(e)},function(e){t&&t({returncode:"-1"})})}}}),require.config({paths:{}}),require(["emailValidateBiz","mobileValidateBiz","userRegisterBiz","resetPwdBiz","accountInfoBiz","userLoginBiz","authBiz","dynamicPwdLoginUI","commonLoginUI","thirdpartBiz","pwdValidateBiz","nonmemberUI","accountUtil"],function(emailValidateBiz,mobileValidateBiz,userRegisterBiz,resetPwdBiz,accountInfoBiz,userLoginBiz,authBiz,dynamciPwdLoginUI,commonLoginUI,thirdpartBiz,pwdValidateBiz,nonmemberUI,accountUtil){CLogin.emailValidateBiz=emailValidateBiz,CLogin.mobileValidateBiz=mobileValidateBiz,CLogin.userRegisterBiz=userRegisterBiz,CLogin.resetPwdBiz=resetPwdBiz,CLogin.accountInfoBiz=accountInfoBiz,CLogin.userLoginBiz=userLoginBiz,CLogin.dyPwdLoginUI=dynamciPwdLoginUI,CLogin.commonLoginUI=commonLoginUI,CLogin.authBiz=authBiz,CLogin.thirdpartBiz=thirdpartBiz,CLogin.pwdValidateBiz=pwdValidateBiz,CLogin.nonmemberUI=nonmemberUI,CLogin.loadcallback&&eval(CLogin.loadcallback),window.h5LoginSdkLoadCallback&&window.h5LoginSdkLoadCallback();try{setTimeout(accountUtil.initH5UbtScript(),1e3)}catch(a){}}),define("baseAjax",[],function(){function e(e){return null==e?String(e):p[h.call(e)]||"object"}function t(t){return"function"==e(t)}function n(t){return"object"==e(t)}function i(e){return n(e)&&!function(e){return null!=e&&e==e.window}(e)&&Object.getPrototypeOf(e)==Object.prototype}function o(e,t,n,i){if(e.global)return function(e,t,n){var i=g.Event(t);return i._args=n,e.dispatchEvent(i),!i.isDefaultPrevented()}(t||x,n,i)}function r(e){e.global&&0==g.active++&&o(e,null,"ajaxStart")}function s(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===o(t,n,"ajaxBeforeSend",[e,t]))return!1;o(t,n,"ajaxSend",[e,t])}function a(e,t,n,i){var r=n.context;n.success.call(r,e,"success",t),i&&i.resolveWith(r,[e,"success",t]),o(n,r,"ajaxSuccess",[t,n,e]),d("success",t,n)}function c(e,t,n,i,r){var s=i.context;i.error.call(s,n,t,e),r&&r.rejectWith(s,[n,t,e]),o(i,s,"ajaxError",[n,i,e||t]),d(t,n,i)}function d(e,t,n){var i=n.context;n.complete.call(i,t,e),o(n,i,"ajaxComplete",[t,n]),function(e){e.global&&!--g.active&&o(e,null,"ajaxStop")}(n)}function l(){}function u(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}for(var g={},f=Array.isArray||function(e){return e instanceof Array},m=[].slice,p={},h=p.toString,C="Boolean Number String Function Array Date RegExp Object Error".split(" "),y=0;y<C.length;y++)S=C[y],p["[object "+S+"]"]=S.toLowerCase();g.each=function(e,t){var n,i;if(function(e){return"number"==typeof e.length}(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e};var v=function(){return!0},w=function(){return!1},b={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};g.Event=function(e,t){"string"==typeof obj||(e=(t=e).type);var n=x.createEvent("Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),function(e,t){if(t||!e.isDefaultPrevented){for(var n in t||(t=e),b){var i=b[n],o=t[n];e[n]=function(){return this[i]=v,o&&o.apply(t,arguments)},e[i]=w}(void 0!==t.defaultPrevented?t.defaultPrevented:"returnValue"in t?!1===t.returnValue:t.getPreventDefault&&t.getPreventDefault())&&(e.isDefaultPrevented=v)}return e}(n)},g.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},function o(e,t,n,r){var s,a=f(t),c=i(t);g.each(t,function(t,i){s=g.type(i),r&&(t=n?r:r+"["+(c||"object"==s||"array"==s?t:"")+"]"),!r&&a?e.add(i.name,i.value):"array"==s||!n&&"object"==s?o(e,i,n,t):e.add(t,i)})}(n,e,t),n.join("&").replace(/%20/g,"+")};var k,S,U=0,x=window.document,D=/^(?:text|application)\/javascript/i,M=/^(?:text|application)\/xml/i,T="application/json",L="text/html",E=/^\s*$/;return g.ajaxJSONP=function(e,n){function i(i,s){clearTimeout(r),x.getElementsByTagName("head")[0].removeChild(u),"error"!=i.type&&o?a(o[0],m,e,n):c(null,s||"error",m,e,n),window[l]=f,o&&t(f)&&f(o[0]),f=o=void 0}if(!("type"in e))return g.ajax(e);var o,r,d=e.jsonpCallback,l=(t(d)?d():d)||"jsonp"+ ++U,u=x.createElement("script"),f=window[l],m={abort:function(e){}};return n&&n.promise(m),u.onload=i,u.onerror=i,!1===s(m,e)?m:(window[l]=function(){o=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),x.head.appendChild(u),e.timeout>0&&(r=setTimeout(function(){},e.timeout)),m)},g.active=0,g.type=e,g.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:L,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},g.extend=function(e){var t,n=m.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){!function o(e,t,n){for(var r in t)n&&(i(t[r])||f(t[r]))?(i(t[r])&&!i(e[r])&&(e[r]={}),f(t[r])&&!f(e[r])&&(e[r]=[]),o(e[r],t[r],n)):void 0!==t[r]&&(e[r]=t[r])}(e,n,t)}),e},g.ajax=function(e){var t=g.extend({},e||{}),n=g.Deferred&&g.Deferred();for(k in g.ajaxSettings)void 0===t[k]&&(t[k]=g.ajaxSettings[k]);r(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host),t.url||(t.url=window.location.toString()),function(e){e.processData&&e.data&&"string"!=g.type(e.data)&&(e.data=g.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=u(e.url,e.data),e.data=void 0)}(t);var i=t.dataType,o=/\?.+=\?/.test(t.url);if(o&&(i="jsonp"),!1!==t.cache&&(e&&!0===e.cache||"script"!=i&&"jsonp"!=i)||(t.url=u(t.url,"_="+Date.now())),"jsonp"==i)return o||(t.url=u(t.url,t.jsonp?t.jsonp+"=?":!1===t.jsonp?"":"callback=?")),g.ajaxJSONP(t,n);var d,f=t.accepts[i],m={},p=function(e,t){m[e.toLowerCase()]=[e,t]},h=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,C=t.xhr(),y=C.setRequestHeader;if(n&&n.promise(C),t.crossDomain||p("X-Requested-With","XMLHttpRequest"),p("Accept",f||"*/*"),(f=t.mimeType||f)&&(f.indexOf(",")>-1&&(f=f.split(",",2)[0]),C.overrideMimeType&&C.overrideMimeType(f)),(t.contentType||!1!==t.contentType&&t.data&&"GET"!=t.type.toUpperCase())&&p("Content-Type",t.contentType||"application/x-www-form-urlencoded"),t.headers)for(S in t.headers)p(S,t.headers[S]);if(C.setRequestHeader=p,C.onreadystatechange=function(){if(4==C.readyState){C.onreadystatechange=l,clearTimeout(d);var e,o=!1;if(C.status>=200&&C.status<300||304==C.status||0==C.status&&"file:"==h){i=i||function(e){return e&&(e=e.split(";",2)[0]),e&&(e==L?"html":e==T?"json":D.test(e)?"script":M.test(e)&&"xml")||"text"}(t.mimeType||C.getResponseHeader("content-type")),e=C.responseText;try{"script"==i?(0,eval)(e):"xml"==i?e=C.responseXML:"json"==i&&(e=E.test(e)?null:JSON.parse(e))}catch(e){o=e}o?c(o,"parsererror",C,t,n):a(e,C,t,n)}else c(C.statusText||null,C.status?"error":"abort",C,t,n)}},!1===s(C,t))return C.abort(),c(null,"abort",C,t,n),C;var v=!("async"in t)||t.async;if(C.open(t.type,t.url,v,t.username,t.password),t.xhrFields)for(S in t.xhrFields)C[S]=t.xhrFields[S];for(S in m)y.apply(C,m[S]);return t.timeout>0&&(d=setTimeout(function(){C.onreadystatechange=l,C.abort(),c(null,"timeout",C,t,n)},t.timeout)),C.send(t.data?t.data:null),C},g}),define("baseModel",["baseAjax"],function($){function getenv(){var e=window.location.host;return e.indexOf("localhost")>-1||e.indexOf("127.0.0.1")>-1||e.indexOf("dev")>-1?"local":e.indexOf("fat")>-1||e.indexOf("fws")>-1?"fat":e.indexOf("uat")>-1?"uat":"pro"}function getbaseurl(){var e={local:"https://accounts.fat466.qa.nt.ctripcorp.com/",fat:"https://accounts.fat466.qa.nt.ctripcorp.com/",uat:"https://accounts.ctrip.uat.qa.nt.ctripcorp.com/",uatqa:"https://accounts.ctrip.uat.qa.nt.ctripcorp.com/",pro:"https://accounts.ctrip.com/"}[getenv()];return host.indexOf("fat.ctripqa")>-1&&(e="https://www.fat.ctripqa.com/"),host.indexOf("uat.ctripqa")>-1&&(e="https://gateway-uat.ctripqa.com/"),e}function getgatewaybaseurl(){var e={local:"https://passport.fat466.qa.nt.ctripcorp.com/",fat:"https://passport.fat466.qa.nt.ctripcorp.com/",uat:"https://passport.ctrip.uat.qa.nt.ctripcorp.com/",uatqa:"https://passport.ctrip.uat.qa.nt.ctripcorp.com/",pro:"https://passport.ctrip.com/"}[getenv()];return host.indexOf("fat.ctripqa")>-1&&(e="https://www.fat.ctripqa.com/"),host.indexOf("uat.ctripqa")>-1&&(e="https://gateway-uat.ctripqa.com/"),e}var host=location.host,baseModel={senddata:function(e,t,n,i,o){t||(t={});var r;r=e&&e.indexOf("http")>-1?e:getbaseurl()+e,""!==o&&void 0!==o&&null!==o||(o=!0),t.Secretkey=CLogin.Secretkey,$.ajax({url:r,data:t,type:"post",timeout:CUserSDK.accessConfig.timeout,xhrFields:{withCredentials:!0},dataType:"json",async:o,contentType:"application/x-www-form-urlencoded",success:function(e){n(e)},error:function(e){i(e)}})},senddatawithoutjsonp:function(e,t,n,i){t||(t={});var o;o=e&&e.indexOf("http")>-1?e:getbaseurl()+e,t.Secretkey=CLogin.Secretkey,$.ajax({url:o,data:t,type:"post",timeout:CUserSDK.accessConfig.timeout,xhrFields:{withCredentials:!0},dataType:"json",async:!0,contentType:"application/x-www-form-urlencoded",success:function(e){n(e)},error:function(e){i(e)}})},sendsyncdata:function(e,t,n,i){$.ajax({url:getbaseurl()+e,data:t,type:"post",dataType:"json",contentType:"application/json; charset=utf-8",async:!1,timeout:CUserSDK.accessConfig.timeout,success:function(e){n(e)},error:function(e){i(e)}})},sendgatewaydata:function(url,params,async,success,fail){var successHandler=success||function(e){},failHandler=fail||function(e){},successcallback=function(data){if(data||failHandler.apply(this,[eval(data)]),0==data.ReturnCode){var result=JSON.parse(data.Result);result||failHandler.apply(this,data);var retCode="",message="";""!==result.ReturnCode&&void 0!==result.ReturnCode&&null!==result.ReturnCode?(retCode=parseInt(result.ReturnCode),message=result.Message):""!==result.returnCode&&void 0!==result.returnCode&&null!==result.returnCode?(retCode=parseInt(result.returnCode),message=result.message):result.resultStatus&&(retCode=parseInt(result.resultStatus.returnCode),message=result.resultStatus.message),result.returncode=retCode,result.message=message,successHandler.apply(this,[eval(result)])}else failHandler.apply(this,[eval(data)])},errorcallback=function(data){failHandler.apply(this,[eval(data)])};$.ajax({url:getgatewaybaseurl()+url,data:JSON.stringify(params),type:"post",async:async,xhrFields:{withCredentials:!0},dataType:"json",contentType:"application/json; charset=utf-8",timeout:CUserSDK.accessConfig.timeout,success:successcallback,error:errorcallback,beforeSend:function(e){e.setRequestHeader("contentType","application/json; charset=utf-8")}})}};return baseModel}),define("codeValidateModel",["baseModel"],function(e){return{sendCodeByAuth:function(t,n){var i={};i.Data={accessCode:t.accessCode,strategyCode:t.strategyCode,context:t.ext?t.ext:{}};e.sendgatewaydata(CUserSDK.ApiUrlConfig.sendCodeByAuthUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},validateCodeByAuth:function(t,n){var i={};i.Data={accessCode:t.accessCode,strategyCode:t.strategyCode,code:t.code,context:t.ext?t.ext:{}};e.sendgatewaydata(CUserSDK.ApiUrlConfig.validateCodeByAuthUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),define("mobileValidateBiz",["mobileValidateModel","codeValidateModel","basebizUtilString"],function(e,t,n){return{sendMessageCode:function(t,i,o,r,s,a,c,d){var l=n.trim(t),u=n.trim(i);if(l&&u)if(l=n.trimStart0(l),(u=n.trimStart0(u)).isMobile(l)){var g={countryCode:t,phoneNumber:i,sceneCode:o,rmsToken:a,safeToken:r,sliderVersion:s,ext:d};e.sendMessageCode(g,c)}else c&&c(CUserSDK.messageConfig.mobileIsNotValidMsg);else c&&c(CUserSDK.messageConfig.mobileIsNullMsg)},sendCodeByMobile:function(t,i){var o=n.trim(t.countryCode),r=n.trim(t.phoneNumber);return o&&r?(o=n.trimStart0(o),(r=n.trimStart0(r)).isMobile(o)?(t.countryCode=o,t.phoneNumber=r,void e.sendMessageCode(t,i)):void(i&&i(CUserSDK.messageConfig.mobileIsNotValidMsg))):void(i&&i(CUserSDK.messageConfig.mobileIsNullMsg))},validateMobileCode:function(t,i,o,r,s){var a=n.trim(t),c=n.trim(i);return a&&c?(a=n.trimStart0(a),(c=n.trimStart0(c)).isMobile(a)?void e.validateMobileCode(a,c,o,r,s):void(s&&s(CUserSDK.messageConfig.mobileIsNotValidMsg))):void(s&&s(CUserSDK.messageConfig.mobileIsNullMsg))},sendMobileCodeByLoginName:function(t,i){if(t){var o=n.trim(t.loginName);if(!o||0==o.length)return void(i&&i(CUserSDK.messageConfig.loginNameIsNullMsg));t.loginName=o,e.sendMobileCodeByLoginName(t,i)}},sendMobileCodeByAuth:function(e,n){e&&t.sendCodeByAuth(e,n)},validateMobileCodeByAuth:function(e,i){if(e){var o=n.trim(e.code);if(!o||0==o.length)return void(i&&i(CUserSDK.messageConfig.verifyCodeIsNullMsg));e.code=o,t.validateCodeByAuth(e,i)}},validateMobileCodeByLoginName:function(t,i){if(t){var o=n.trim(t.code);if(!o||0==o.length)return void(i&&i(CUserSDK.messageConfig.verifyCodeIsNullMsg));var r=n.trim(t.loginName);o&&0!=o.length||i&&i(CUserSDK.messageConfig.loginNameIsNullMsg),t.loginName=r,e.validateMobileCodeByLoginName(t,i)}}}}),define("mobileValidateModel",["baseModel"],function(e){return{sendMessageCode:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:"P",Extension:{rmsToken:t.rmsToken}},i.Data={messageCode:t.sceneCode,countryCode:t.countryCode,mobilePhone:t.phoneNumber,extension:t.ext?t.ext:[]};var o;o="S200064"===t.sceneCode||"S200065"===t.sceneCode?CUserSDK.ApiUrlConfig.sendRealNameH5Url:this.getSendUrlFromBusinessSite(t.businessSite),e.sendgatewaydata(o,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},sendMobileCodeByLoginName:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:"P",Extension:{rmsToken:t.rmsToken}},i.Data={sendSceneCode:t.sendSceneCode,loginName:t.loginName,loginNameType:t.loginNameType,group:t.group?t.group:"",locale:t.locale?t.locale:"",context:t.ext?t.ext:{}};e.sendgatewaydata(CUserSDK.ApiUrlConfig.sendMobileCodeByLoginNameUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},validateMobileCode:function(t,n,i,o,r){var s={};s.Data={MobilePhoneNumber:t+"-"+n,VerifyCode:o,AppID:i};e.sendgatewaydata(CUserSDK.ApiUrlConfig.validateMobilePhoneUrl,s,!0,function(e){r&&r(e)},function(e){r&&r(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},validateMobileCodeByLoginName:function(t,n){var i={};i.Data={loginName:t.loginName,loginNameType:t.loginNameType,sendSceneCode:t.sceneCode,code:t.code};e.sendgatewaydata(CUserSDK.ApiUrlConfig.validateMobileCodeByLoginNameUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},getSendUrlFromBusinessSite:function(e){if(!e)return CUserSDK.ApiUrlConfig.sendMessageByPhoneUrl;switch(e){case CUserSDK.sdkconfig.businessSite.rebindMobileOnline:return CUserSDK.ApiUrlConfig.sendCodeWithRebindMobileOnlineUrl;case CUserSDK.sdkconfig.businessSite.sendMessageH5:return CUserSDK.ApiUrlConfig.sendMessageH5;case CUserSDK.sdkconfig.businessSite.h5resetpwd:return CUserSDK.ApiUrlConfig.sendResetpwSmsUrl;case CUserSDK.sdkconfig.businessSite.h5primesms:return CUserSDK.ApiUrlConfig.sendDynamicSmsUrl;default:return CUserSDK.ApiUrlConfig.sendMessageByPhoneUrl}}}}),define("pwdValidateBiz",["pwdValidateModel","basebizUtilString","basebizUtilValidate"],function(e,t,n){return{pwdTokenValidate:function(n,i){if(n){var o=t.trim(n.loginName),r=t.trim(n.pwd);if(!o||0==o.length)return void(i&&i(CUserSDK.messageConfig.loginNameIsNullMsg));if(n.loginName=o,!r||0==r.length)return void(i&&i(CUserSDK.messageConfig.pwdIsNullMsg));n.code=r,e.pwdTokenValidate(n,i)}},authPwdValidate:function(n,i){var o=t.trim(n.pwd);o&&0!=o.length?e.authPwdValidate(n,i):i&&i(CUserSDK.messageConfig.pwdIsNullMsg)}}}),define("pwdValidateModel",["baseModel"],function(e){return{pwdTokenValidate:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:"P",Extension:{rmsToken:t.rmsToken}},i.Data={accessCode:t.accessCode,strategyCode:t.strategyCode,userName:t.loginName,certificateCode:t.code,extendedProperties:t.ext?t.ext:[]};var o="F"==t.hasRisk?CUserSDK.ApiUrlConfig.userValidateNoRiskUrl:this.getUserPwdValidateUrl(t.businessSite);e.sendgatewaydata(o,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},getUserPwdValidateUrl:function(e){if(!e)return CUserSDK.ApiUrlConfig.userValidateUrl;switch(e){case CUserSDK.sdkconfig.businessSite.h5login:return CUserSDK.ApiUrlConfig.userValidateH5Url;default:return CUserSDK.ApiUrlConfig.userValidateUrl}},authPwdValidate:function(t,n){var i={};i.Data={accessCode:t.accessCode,strategyCode:t.strategyCode,certificateCode:t.pwd,extendedProperties:t.ext?t.ext:[]};e.sendgatewaydata(CUserSDK.ApiUrlConfig.userAuthValidateUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),define("memberTaskBiz",["memberTaskModel","resetPwdBiz","AuthModel"],function(e,t,n){return{getLoginTask:function(t,n,i,o,r){var s={};s.sceneType=t,s.platform=n,s.token=i,s.tokenType=void 0===r?"":r;e.getMemberTask(s,function(e){var t={returncode:0};e&&0==e.returncode&&e.pid>0&&e.taskType==CUserSDK.loginConfig.taskType.modifyPassword&&(e.subTaskType==CUserSDK.loginConfig.subType.enforce?(t.returncode=2001,t.enforce="T"):(t.returncode=2002,t.enforce="F"),t.message=e.taskDesc,t.token=i,t.taskType=CUserSDK.loginConfig.taskType.modifyPassword),o&&o(t)})}}}),define("memberTaskModel",["baseModel"],function(e){return{getMemberTask:function(t,n){var i={};i.AccountHead={AuthSource:"gatewayHead",Extension:{Token:t.token,TokenType:t.tokenType?t.tokenType:"uid_validate"}},i.Data={sceneType:t.sceneType,platform:t.platform};e.sendgatewaydata(CUserSDK.ApiUrlConfig.getMemberTaskUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),define("authBiz",["AuthModel","basebizUtilDomain"],function(e,t){return{isLogin:function(t,n){e.isLogin(t,!0,n)},isGuest:function(n){var i=-1,o=CLogin.ServiceDomain?CLogin.ServiceDomain:t.getAccountDomain();e.getAccountInfoByTicket(o,{},function(e){e&&0==e.returnCode&&e.payload?(i="T"===e.payload.isNonUser?1:0,n&&n(i)):n&&n(i)})},syncIsLogin:function(t){return e.isLogin(t,!1)},logOut:function(t,n){e.logOut(t,!0,n)},syncLogOut:function(t){return e.logOut(t,!1)},getAuth:function(t,n){e.getAuth(t,!0,n)},syncGetAuth:function(t){return e.logOut(t,!1)}}}),define("AuthModel",["baseModel","basebizUtilDomain"],function(e,t){return{writeLoginSession:function(n,i){var o={};o.domain=t.getDomainRoot(),o.cticket=n;var r=function(){};window.location.href.indexOf("ctripqa")>-1&&(o.domain="ctripqa.com");var s={};s.domain={local:"qa.nt.tripcorp.com",fat:"qa.nt.tripcorp.com",uat:"qa.nt.tripcorp.com",pro:"trip.com"}[this.getEnv()],s.cticket=n,e.senddata({local:"https://www.fat1.qa.nt.tripcorp.com/",fat:"https://www.fat1.qa.nt.tripcorp.com/",uat:"https://www.uat.tripcorp.com/",uatqa:"https://www.uat.tripcorp.com/",pro:"https://www.trip.com/"}[this.getEnv()]+CUserSDK.ApiUrlConfig.writeAuthUrl,s,r,r),e.senddata(CUserSDK.ApiUrlConfig.writeAuthUrl,o,function(e){i&&i(e)},function(e){i&&i({returnCode:"-1"})})},isLogin:function(t,n,i){var o={returnCode:"-1"};return e.senddata(CUserSDK.ApiUrlConfig.isLoginUrl,{},function(e){o=e,n&&i&&i(e)},function(e){n&&i&&i(o)},n),o},logOut:function(n,i,o){var r={returnCode:"-1"},s={domain:t.getDomainRoot()},a=function(){},c={};return c.domain={local:"qa.nt.tripcorp.com",fat:"qa.nt.tripcorp.com",uat:"qa.nt.tripcorp.com",pro:"trip.com"}[this.getEnv()],e.senddata({local:"https://www.fat1.qa.nt.tripcorp.com/",fat:"https://www.fat1.qa.nt.tripcorp.com/",uat:"https://www.uat.tripcorp.com/",uatqa:"https://www.uat.tripcorp.com/",pro:"https://www.trip.com/"}[this.getEnv()]+CUserSDK.ApiUrlConfig.logOutUrl,c,a,a),e.senddata(CUserSDK.ApiUrlConfig.logOutUrl,s,function(e){r=e,i&&o&&o(e)},function(e){i&&o&&o(r)},i),r},getAuth:function(t,n,i){var o={returnCode:"-1"};return e.senddata(CUserSDK.ApiUrlConfig.getAuthUrl,{},function(e){o=e,n&&i&&i(e)},function(e){n&&i&&i(o)},n),o},getAccountInfoByTicket:function(t,n,i){e.senddata(t+"ssoproxy/ssoGetAccountInfoByTicket",{},function(e){i&&i(e)},function(e){i&&i({returncode:"-1"})})},getEnv:function(){var e=window.location.host;return e.indexOf("localhost")>-1||e.indexOf("127.0.0.1")>-1||e.indexOf("dev")>-1?"local":e.indexOf("fat")>-1||e.indexOf("fws")>-1?"fat":e.indexOf("uat")>-1?"uat":"pro"}}}),define("uuidBiz",["uuidModel","basebizUtilString","basebizUtilValidate","basebizUtilCookie"],function(e,t,n,i){return{writeUUIDCookie:function(t,n,o,r){var s=i.getCookie("UUID");s&&"undefined"!=s||(s="");var a=[{key:"LoginName",value:t},{key:"LoginType",value:n}];e.setUUID(s,a,function(e){e&&0==e.returncode&&i.setUUIDCookie(e.uUID,o),r&&r(e)})},getUUID:function(){return i.getCookie("UUID")}}}),define("uuidModel",["baseModel"],function(e){return{setUUID:function(t,n,i){var o={};o.Data={uUID:t||"",context:n||[]};e.sendgatewaydata(CUserSDK.ApiUrlConfig.setGuestDataUrl,o,!0,function(e){i&&i(e)},function(e){i&&i(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),CUserSDK="undefined"!=typeof CUserSDK?CUserSDK:{version:"1.0"},CUserSDK.accessConfig={language:"zh",sourceid:"",timeout:3e4},CUserSDK.messageConfig={emailIsNullMsg:{returncode:10101,message:"邮箱不能为空"},emailIsNotValidMsg:{returncode:10102,message:"邮箱格式不合法"},mobileIsNullMsg:{returncode:10103,message:"手机不能为空"},mobileIsNotValidMsg:{returncode:10104,message:"手机格式不合法"},pwdIsNullMsg:{returncode:10105,message:"密码不能为空"},pwdIsNotValidMsg:{returncode:10106,message:"密码格式不合法"},pwdIsSimpleMsg:{returncode:10107,message:"密码过于简单，有被盗风险"},loginNameIsNullMsg:{returncode:10108,message:"登录名不能为空"},dynamicPwdIsNullMsg:{returncode:10109,message:"动态码不能为空"},verifyCodeIsNullMsg:{returncode:10111,message:"验证码不能为空"},mobileNotRegisteredMsg:{returncode:10110,message:"手机号未注册"},mobileRegisteredMsg:{returncode:10112,message:"手机号已注册"},emailNotRegisteredMsg:{returncode:10113,message:"邮箱未注册"},emailRegisteredMsg:{returncode:10114,message:"邮箱已注册"},oldPwdIsNullMsg:{returncode:10115,message:"旧密码为空"},pwdNotMatchMsg:{returncode:10116,message:"新密码与确认密码不一致"},pwdMatchMsg:{returncode:10117,message:"新密码不能与旧密码相同"},gatewayRequestErrorMsg:{returncode:-1,message:"请求gateway失败"},successMsg:{returncode:0,message:"成功"},writeLoginSessionFailMsg:{returncode:-2,message:"写登录态失败"}},CUserSDK.sdkconfig={dynamicPwdTicketType:"10045",bindMobileTicketType:"10043",bindEmailTicketType:"10038",errorCode:"1",businessSite:{rebindMobileOnline:"crm_resetmobile_online",sendMessageH5:"crm_sms_h5",rebindEmailOnline:"crm_resetmail_online",ibuordersearch:"crm_ibumailcheckorder_online",ibuh5ordersearch:"ibu_mailgetorder_h5",realnameH5:"crm_verificationsms_h5",h5login:"crm_primelogin_h5",h5resetpwd:"crm_getpw_h5",h5primesms:"crm_primesms_h5",ibubindemailonline:"crm_ibubindmail_online"},sendAndValidateCodeByAuthAccessCode:"1AFB25DAC7A8B11E",validateEmailCodeByAuthStrategyCode:"D9F433148D021DB1",validateMobileCodeByAuthStrategyCode:"5821DB3434B1FA43"},CUserSDK.loginConfig={sceneType:{commonLogin:"S000",commonLoginMask:"S004",thirdPartLogin:"S008"},taskType:{bindMobile:"T001",modifyPassword:"T003"},subType:{enforce:"ST001",noenforce:"ST002"},loginType:{commonLogin:"commonLogin",dynamicPwdLogin:"dynamicPwdLogin",mobileTokenLogin:"mobileTokenLogin",thirdPartLogin:"thirdPartLogin"},userValidateStrategyCode:"63A70EA9BB38F5D",uuidUserValidateStrategyCode:"698D04A841768C87",dynamicPwdTicketType:"10045",bindMobileTicketType:"10043",unbindMobileTicketType:"10044",bindEmailTicketType:"",unbindEmailTicketType:"",errorCode:1,modifyPwdAccessCode:"83A7D31D8875DB5A",modifyPwdStrategyCode:"76A88693875C6E0A",pwdTokenModifyPwdStrategyCode:"9BDD108D18133FCD"},define("userLoginBiz",["userLoginModel","basebizUtilString","basebizUtilValidate","mobileValidateModel","pwdValidateBiz","memberTaskBiz","AuthModel","uuidBiz","resetPwdBiz","accountUtil"],function(e,t,n,i,o,r,s,a,c,d){return{commonLogin:function(t,n){if(t){d.repairRmsToken(t);var i={},c=function(e){i.returncode?n&&n(i):n&&n(CUserSDK.messageConfig.successMsg)},l=function(e){e&&0==e.returnCode?t.isPersonalized?c&&c():a.writeUUIDCookie(t.loginName,CUserSDK.loginConfig.loginType.commonLogin,"T",c):n&&n(CUserSDK.messageConfig.writeLoginSessionFailMsg)},u=function(e){e&&0==e.returncode?s.writeLoginSession(e.ticket,l):n&&n(e)},g=function(t){0==t.returncode||"T"!=t.enforce?("F"==t.enforce&&(i=t),e.login(m,u)):n&&n(t)},f=[{key:"LoginName",value:t.loginName}],m={};m.accessCode=t.accessCode,m.strategyCode=t.strategyCode,m.ext=t.ext;var p=t;p.ext=f.concat(t.ext),p.strategyCode=t.isPersonalized?CUserSDK.loginConfig.uuidUserValidateStrategyCode:CUserSDK.loginConfig.userValidateStrategyCode,p.hasRisk=t.isPersonalized?"F":"T",o.pwdTokenValidate(p,function(e){if(e&&0==e.returncode){m.certificateCode=e.token;var i="mask"===CLogin.scene?CUserSDK.loginConfig.sceneType.commonLoginMask:CUserSDK.loginConfig.sceneType.commonLogin,o=t.platform?t.platform:"ONLINE";r.getLoginTask(i,o,e.token,g)}else n&&n(e)})}},dynamicPwdLogin:function(o,r){if(o){d.repairRmsToken(o),d.repairClientID(o);var c=t.trimStart0(o.countrycode),l=t.trimStart0(o.mobile),u=t.trim(o.code);if(!l||0==l.length)return void(r&&r(CUserSDK.messageConfig.mobileIsNullMsg));if(!n.isMobile(c,l))return void(r&&r(CUserSDK.messageConfig.mobileIsNotValidMsg));if(o.loginName=c+"-"+l,!u||0==u.length)return void(r&&r(CUserSDK.messageConfig.dynamicPwdIsNullMsg));var g=function(e){e&&0==e.returnCode?a.writeUUIDCookie(o.loginName,CUserSDK.loginConfig.loginType.dynamicPwdLogin,"F",function(e){r&&r(CUserSDK.messageConfig.successMsg)}):r&&r(CUserSDK.messageConfig.writeLoginSessionFailMsg)},f=function(e){e&&0==e.returncode?s.writeLoginSession(e.ticket,g):r&&r(e)};i.validateMobileCode(c,l,CUserSDK.sdkconfig.dynamicPwdTicketType,u,function(t){if(t&&0==t.returncode)t.UID&&0!=t.UID.length?(o.certificateCode=t.Token,e.login(o,f)):r&&r(CUserSDK.messageConfig.mobileNotRegisteredMsg);else{var n={returncode:parseInt(CUserSDK.sdkconfig.errorCode+t.returncode),message:t.message};r&&r(n)}})}},tokenLogin:function(t,n){if(t){d.repairRmsToken(t),d.repairClientID(t),t.certificateCode=t.token;var i="",o=function(e){e&&0==e.returnCode?a.writeUUIDCookie(t.token,CUserSDK.loginConfig.loginType.mobileTokenLogin,"F",function(e){var t={returncode:0,message:CUserSDK.messageConfig.successMsg.message,uid:i};n&&n(t)}):n&&n(CUserSDK.messageConfig.writeLoginSessionFailMsg)};e.login(t,function(e){e&&0==e.returncode?(i=e.uid,s.writeLoginSession(e.ticket,o)):n&&n(e)})}},compeleteLoginTask:function(e,t){var n=this,i=function(i){if(i&&0==i.returncode&&"T"==e.enforce){var o={accessCode:e.accessCode,strategyCode:e.strategyCode,token:e.token,ext:e.ext};n.tokenLogin(o,t)}else{var r={returncode:0!=i.returncode?parseInt(CUserSDK.sdkconfig.errorCode+i.returncode):0,message:i.message};t&&t(r)}};if("T"==e.enforce)c.resetPwdByToken(CUserSDK.loginConfig.modifyPwdAccessCode,CUserSDK.loginConfig.pwdTokenModifyPwdStrategyCode,e.token,e.pwd,e.ext,i);else{var o={accessCode:CUserSDK.loginConfig.modifyPwdAccessCode,strategyCode:CUserSDK.loginConfig.pwdTokenModifyPwdStrategyCode,oldPwd:e.token,newPwd:e.pwd,confirmPwd:e.pwd,ext:e.ext};c.modifyPwd(o,i)}},nonMemberLogin:function(t,n){var i=function(e){e&&0==e.returnCode?n&&n(CUserSDK.messageConfig.successMsg):n&&n(CUserSDK.messageConfig.writeLoginSessionFailMsg)};d.repairRmsToken(t),d.repairClientID(t),e.nonMemberLogin(t,function(e){e&&0==e.returncode&&s.writeLoginSession(e.Ticket,i)})},nonMemberLoginWithRisk:function(t,n){var i=function(e){e&&0==e.returnCode?n&&n(CUserSDK.messageConfig.successMsg):n&&n(CUserSDK.messageConfig.writeLoginSessionFailMsg)};d.repairRmsToken(t),d.repairClientID(t),e.nonMemberLoginWithRisk(t,function(e){e&&0==e.returncode?s.writeLoginSession(e.ticket,i):n(e)})},commonLoginWithRisk:function(n,i){if(n){d.repairRmsToken(n),d.repairClientID(n);var o=t.trim(n.loginName),r=t.trim(n.pwd);if(!o||0==o.length)return void(i&&i(CUserSDK.messageConfig.loginNameIsNullMsg));if(n.loginName=o,!r||0==r.length)return void(i&&i(CUserSDK.messageConfig.pwdIsNullMsg));n.certificateCode=n.pwd;var a="",c=function(e){if(e&&0==e.returnCode){var t={returncode:0,message:CUserSDK.messageConfig.successMsg.message,uid:a};i&&i(t)}else i&&i(CUserSDK.messageConfig.writeLoginSessionFailMsg)};e.userPwdLogin(n,function(e){e&&0==e.returncode?(a=e.uid,s.writeLoginSession(e.ticket,c)):i&&i(e)})}},thirdPartLogin:function(t,n){var i="";if(t){d.repairRmsToken(t),d.repairClientID(t);var o=function(e){n&&n(CUserSDK.messageConfig.successMsg)},c=function(e){e&&0==e.returnCode?a.writeUUIDCookie("",CUserSDK.loginConfig.loginType.thirdPartLogin,"F",o):n&&n(CUserSDK.messageConfig.writeLoginSessionFailMsg)},l=function(e){0==e.returncode||"T"!=e.enforce?s.writeLoginSession(i,c):n&&n(e)},u=function(e){e&&0==e.returncode?(i=e.Ticket,r.getLoginTask(CUserSDK.loginConfig.sceneType.thirdPartLogin,t.platform,e.Ticket,l,"auth")):n&&n(e)};"T"===t.isBind?e.thirdPartBindAndLogin(t,u):e.thirdPartLogin(t,u)}},secureCertLogin:function(o,r){if(o){var c=this;d.repairRmsToken(o),d.repairClientID(o);var l=t.trimStart0(o.countrycode),u=t.trimStart0(o.mobile),g=t.trim(o.code);if(!u||0==u.length)return void(r&&r(CUserSDK.messageConfig.mobileIsNullMsg));if(!n.isMobile(l,u))return void(r&&r(CUserSDK.messageConfig.mobileIsNotValidMsg));if(o.loginName=l+"-"+u,!g||0==g.length)return void(r&&r(CUserSDK.messageConfig.dynamicPwdIsNullMsg));var f=function(e){e&&0==e.returnCode?a.writeUUIDCookie(o.loginName,CUserSDK.loginConfig.loginType.dynamicPwdLogin,"F",function(e){r&&r(CUserSDK.messageConfig.successMsg)}):r&&r(CUserSDK.messageConfig.writeLoginSessionFailMsg)},m=function(e){e&&0==e.returncode?s.writeLoginSession(e.ticket,f):r&&r(e)};i.validateMobileCode(l,u,CUserSDK.sdkconfig.dynamicPwdTicketType,g,function(t){if(t&&0==t.returncode)if(t.UID&&0!=t.UID.length){o.certificateCode=t.Token;var n={};n.token=t.Token,n.mobile=u,n.countryCode=l,n.sceneCode=o.sceneCode,n.appVersion=o.appVersion,c.secureCert(n,function(t){o.isMask&&o.closeMask&&o.closeMask(),t.directLogin?e.login(o,m):0===t.returnCode?(t.accessCode=o.accessCode,t.strategyCode=o.strategyCode,t.context=o.context?o.context:{},e.secureCertTokenLogin(t,m)):r&&r(t)})}else r&&r(CUserSDK.messageConfig.mobileNotRegisteredMsg);else{var i={returncode:parseInt(CUserSDK.sdkconfig.errorCode+t.returncode),message:t.message};r&&r(i)}})}},secureCert:function(e,t){var n={token:e.token,appVersion:e.appVersion,sceneCode:e.sceneCode,platform:"PC",group:"ctrip",mobile:e.mobile,countryCode:e.countryCode,thirdCallbackUrl:e.thirdCallbackUrl},i=function(e){t&&t(e)},o=this.getSecureCheckSDK();try{require([o],function(t){e.closeMask&&e.closeMask(),(new t).secureCert(n,i)})}catch(n){var r={directLogin:!0,token:e.token};t&&t(r)}},getEnv:function(){var e=window.location.host;return e.indexOf("localhost")>-1||e.indexOf("127.0.0.1")>-1||e.indexOf("dev")>-1?"local":e.indexOf("fat")>-1||e.indexOf("fws")>-1?"fat":e.indexOf("uat")>-1?"uat":"pro"},getSecureCheckSDK:function(){return{local:"https://webresource.fws.qa.nt.ctripcorp.com/ares2/basebiz/cusersdk_secondvalidate/~1.0.0/default.debug/securityCertSDK.js?expires=1d",fat:"https://webresource.fws.qa.nt.ctripcorp.com/ares2/basebiz/cusersdk_secondvalidate/~1.0.0/default.debug/securityCertSDK.js?expires=1d",uat:"https://webresource.uat.qa.nt.ctripcorp.com/ares2/basebiz/cusersdk_secondvalidate/~1.0.0/default.debug/securityCertSDK.js?expires=1d",pro:"https://webresource.c-ctrip.com/ares2/basebiz/cusersdk_secondvalidate/~1.0.0/default.debug/securityCertSDK.js?expires=1d"}[this.getEnv()]}}}),define("userLoginModel",["baseModel","basebizUtilCookie"],function(e,t){return{login:function(t,n){var i={};i.Data={accessCode:t.accessCode,strategyCode:t.strategyCode,loginName:t.loginName?t.loginName:"",certificateCode:t.certificateCode,extendedProperties:t.ext?t.ext:[]};e.sendgatewaydata(CUserSDK.ApiUrlConfig.loginUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},nonMemberLogin:function(n,i){var o={};o.Data={IsMobile:!0,SourceID:n.sourceID,LoginWay:n.loginWay?n.loginWay:"CtripCN",DeviceID:n.isMobile?t.getCookie("GUID"):"",Locale:n.locale,extendedProperties:n.ext?n.ext:[]};e.sendgatewaydata(CUserSDK.ApiUrlConfig.nonMemberLoginUrl,o,!0,function(e){i&&i(e)},function(e){i&&i(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},nonMemberLoginJ:function(t,n){var i={};i.Data={accountHead:{platform:t.platform,locale:t.locale,group:t.group,sourceID:t.sourceID,accessCode:t.accessCode},extendedProperties:t.extension};e.sendgatewaydata(CUserSDK.ApiUrlConfig.nonMemberLoginJUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},nonMemberLoginWithRisk:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:t.platform,Extension:{rmsToken:t.rmsToken}},i.Data={accountHead:{sourceID:t.sourceID,locale:t.locale,group:"ctrip",platform:t.platform},extendedProperties:t.context?t.context:{}};var o=t.requestUrl;o||(o=CUserSDK.ApiUrlConfig.nonMemberLoginWithRiskUrl),e.sendgatewaydata(o,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},userPwdLogin:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:"P"},i.Data={accessCode:t.accessCode,strategyCode:t.strategyCode,loginName:t.loginName?t.loginName:"",certificateCode:t.certificateCode,extendedProperties:t.ext?t.ext:[]};e.sendgatewaydata(CUserSDK.ApiUrlConfig.userLoginWithRiskUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},thirdPartLogin:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:"P"},i.Data={RequestToken:t.token,ThirdType:t.thirdType,TokenType:t.tokenType,AutoRegister:t.autoRegister,IsMobile:t.isMobile,AutoLogin:t.autoLogin,LoginWay:t.loginWay,Context:t.ext?t.ext:[]};e.sendgatewaydata(CUserSDK.ApiUrlConfig.thirdPartLoginUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},thirdPartBindAndLogin:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:"P"},i.Data={LoginName:t.loginName,Password:t.pwd,RequestToken:t.token,ThirdType:t.thirdType,TokenType:t.tokenType,AutoRegister:t.autoRegister,IsMobile:t.isMobile,AutoLogin:t.autoLogin,LoginWay:t.loginWay,Context:t.ext?t.ext:[]};e.sendgatewaydata(CUserSDK.ApiUrlConfig.thirdPartBindAndLoginUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},secureCertTokenLogin:function(t,n){var i={};i.Data={strategyCode:t.strategyCode,securityToken:t.securityToken,context:t.context?t.context:{},accountHead:{accessCode:t.accessCode,platform:"PC",group:"ctrip",locale:"zh_cn"}};e.sendgatewaydata("gateway/api/soa2/12559/securityTokenLogin",i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),define("UserLoginView",["NormalUI","DynamicUI","OverseaUI","PersonUI","CommonUI","QrCodeUi","basebizUtilDom"],function(e,t,n,i,o,r,s){return{loadView:function(s){o.loadView(),jQuery(".login-entry-dynamic").click(function(){t.show()}),jQuery(".go_prev-step").click(function(){e.show()}),jQuery("#overseas_login").click(function(){n.show()}),jQuery("#changeaccount").click(function(){e.show()});var a=jQuery("#scanLogin");a.click(function(){"scan"===a.attr("logintype")?(r.show(),a.html('账号登录<i class="icon-computer"></i>'),a.attr("logintype","normal"),a.attr("title","返回账号登录")):(a.attr("title","扫码登录更安全"),a.html('扫码登录<i class="icon-ercode"></i>'),a.attr("logintype","scan"),e.show())}),"oversea"===s?n.show():"normal"===s?e.show():"dynamic"===s?t.show():i.show();try{var c=this;jQuery("body").keyup(function(e){if("13"==(e=e||event).keyCode)return c.clickViewButton(),!1})}catch(e){}},clickViewButton:function(){var e="";"block"===jQuery("#normalview").css("display")?e="#nsubmit":"block"===jQuery("#dynamicview").css("display")?e="#dylogin":"block"===jQuery("#personview").css("display")?e="#personSubmit":"block"===jQuery("#overseasview").css("display")&&(e="#oversubmit"),"disabled"!==jQuery(e).attr("disabled")&&(jQuery(e).attr("disabled","true"),jQuery(e).click(),setTimeout(function(){jQuery(e).removeAttr("disabled")},2e3))}}}),define("resetPwdBiz",["resetPwdModel","basebizUtilString","basebizUtilValidate"],function(e,t,n){return{resetPwdByToken:function(i,o,r,s,a,c){var d=t.trim(s);if(d&&0!=d.length)if(n.isPwd(d)){var l=window.pwdLevel(d);l&&"1003"==l?c&&c(CUserSDK.messageConfig.pwdIsSimpleMsg):e.resetPwd(i,o,r,s,a,c)}else c&&c(CUserSDK.messageConfig.pwdIsNotValidMsg);else c&&c(CUserSDK.messageConfig.pwdIsNullMsg)},modifyPwd:function(i,o){if(i){var r=t.trim(i.oldPwd);if(!r||0==r.length)return void(o&&o(CUserSDK.messageConfig.oldPwdIsNullMsg));var s=t.trim(i.newPwd);if(!s||0==s.length)return void(o&&o(CUserSDK.messageConfig.pwdIsNullMsg));if(s!=i.confirmPwd)return void(o&&o(CUserSDK.messageConfig.pwdNotMatchMsg));if(r==s)return void(o&&o(CUserSDK.messageConfig.pwdMatchMsg));if(!n.isPwd(s))return void(o&&o(CUserSDK.messageConfig.pwdIsNotValidMsg));var a=window.pwdLevel(s);if(a&&"1003"==a)return void(o&&o(CUserSDK.messageConfig.pwdIsSimpleMsg));i.oldPwd=r,i.newPwd=s,e.modifyPwd(i,o)}}}}),define("resetPwdModel",["baseModel"],function(e){return{resetPwd:function(t,n,i,o,r,s){var a={};a.Data={accessCode:t,strategyCode:n,code:i,newPassword:o,context:r};e.sendgatewaydata(CUserSDK.ApiUrlConfig.resetPwdUrl,a,!0,function(e){s&&s(e)},function(e){s&&s(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},modifyPwd:function(t,n){var i={};i.Data={accessCode:t.accessCode,strategyCode:t.strategyCode,code:t.oldPwd,newPassword:t.newPwd,context:t.ext?t.ext:[]};e.sendgatewaydata(CUserSDK.ApiUrlConfig.modifyPwdUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),define("emailValidateBiz",["emailValidateModel","codeValidateModel","basebizUtilString"],function(e,t,n){return{sendEmailCode:function(t,i,o,r,s,a,c){if((t=n.trim(t))&&0!=t.length)if(t.isEmail()){var d={email:t,sceneCode:i,rmsToken:r,safeToken:o,sliderVersion:s,ext:c};e.sendEmailCode(d,a)}else a&&a(CUserSDK.messageConfig.emailIsNotValidMsg);else a&&a(CUserSDK.messageConfig.emailIsNullMsg)},sendEmailCodeByLoginName:function(t,i){if(t){var o=n.trim(t.loginName);if(0==o.length)return void(i&&i(CUserSDK.messageConfig.loginNameIsNullMsg));t.loginName=o,e.sendEmailCodeByLoginName(t,i)}},sendCodeByEmail:function(t,i){if(t){var o=n.trim(t.email);if(0==o.length)return void(i&&i(CUserSDK.messageConfig.emailIsNullMsg));if(t.email=o,!o.isEmail())return void(i&&i(CUserSDK.messageConfig.emailIsNotValidMsg));e.sendEmailCode(t,i)}},sendCodeByEmailNew:function(t,i){if(t){var o=n.trim(t.email);if(0==o.length)return void(i&&i(CUserSDK.messageConfig.emailIsNullMsg));if(t.email=o,!o.isEmail())return void(i&&i(CUserSDK.messageConfig.emailIsNotValidMsg));e.sendEmailCodeNew(t,i)}},validateEmailCode:function(t,i,o,r){return 0==(t=n.trim(t)).length?void(r&&r(CUserSDK.messageConfig.emailIsNullMsg)):t.isEmail()?void e.validateEmailCode(t,i,o,r):void(r&&r(CUserSDK.messageConfig.emailIsNotValidMsg))},sendEmailCodeByAuth:function(e,n){e&&t.sendCodeByAuth(e,n)},validateEmailCodeByAuth:function(e,i){if(e){var o=n.trim(e.code);if(!o||0==o.length)return void(i&&i(CUserSDK.messageConfig.verifyCodeIsNullMsg));t.validateCodeByAuth(e,i)}},validateEmailCodeByLoginName:function(t,i){if(t){var o=n.trim(t.code);if(!o||0==o.length)return void(i&&i(CUserSDK.messageConfig.verifyCodeIsNullMsg));var r=n.trim(t.loginName);o&&0!=o.length||i&&i(CUserSDK.messageConfig.loginNameIsNullMsg),t.loginName=r,e.validateEmailCodeByLoginName(t,i)}},checkEmailCode:function(t,i){var o=n.trim(t.email);return 0==o.length?void(i&&i(CUserSDK.messageConfig.emailIsNullMsg)):o.isEmail()?(t.email=o,void e.checkEmailCode(t,i)):void(i&&i(CUserSDK.messageConfig.emailIsNotValidMsg))}}}),define("emailValidateModel",["baseModel"],function(e){return{sendEmailCode:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:"P"},i.Data={messageCode:t.sceneCode,email:t.email,locale:t.locale?t.locale:"",extension:t.ext?t.ext:[],head:{extension:[{name:"group",value:t.group?t.group:""}]}};var o=this.getSendUrlFromBusinessSite(t.business_site);e.sendgatewaydata(o,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},sendEmailCodeNew:function(t,n){var i={},o="P";if(t.ext)for(var r in t.ext)t.ext[r].key&&"Platform"==t.ext[r].key&&(o=t.ext[r].value);i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:o},i.Data={messageCode:t.sceneCode,email:t.email,locale:t.locale?t.locale:"",extension:t.ext?t.ext:[],head:{extension:[{name:"group",value:t.group?t.group:""}]}};var s=this.getSendUrlFromBusinessSite(t.business_site);e.sendgatewaydata(s,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},validateEmailCode:function(t,n,i,o){var r={};r.Data={Email:t,VerifyCode:i,AppID:n};e.sendgatewaydata(CUserSDK.ApiUrlConfig.validateEmailCodeUrl,r,!0,function(e){o&&o(e)},function(e){o&&o(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},sendEmailCodeByLoginName:function(t,n){var i={};i.AccountHead={Token:t.safeToken,SliderVersion:t.sliderVersion,Platform:"P",Extension:{rmsToken:t.rmsToken}},i.Data={sendSceneCode:t.sendSceneCode,loginName:t.loginName,loginNameType:t.loginNameType,group:t.group?t.group:"",locale:t.locale?t.locale:"",context:t.ext?t.ext:{}};e.sendgatewaydata(CUserSDK.ApiUrlConfig.sendEmailCodeByLoginNameUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},validateEmailCodeByLoginName:function(t,n){var i={};i.Data={loginName:t.loginName,loginNameType:t.loginNameType,sendSceneCode:t.sceneCode,code:t.code};e.sendgatewaydata(CUserSDK.ApiUrlConfig.validateEmailCodeByLoginNameUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},getSendUrlFromBusinessSite:function(e){if(!e)return CUserSDK.ApiUrlConfig.sendMessageByEmailUrl;switch(e){case CUserSDK.sdkconfig.businessSite.rebindEmailOnline:return CUserSDK.ApiUrlConfig.sendCodeWithRebindEmailOnlineUrl;case CUserSDK.sdkconfig.businessSite.ibuh5ordersearch:case CUserSDK.sdkconfig.businessSite.ibuordersearch:return CUserSDK.ApiUrlConfig.sendMessage4OrderSearchUrl;case CUserSDK.sdkconfig.businessSite.ibubindemailonline:return CUserSDK.ApiUrlConfig.sendIBUEmailBindMessageUrl;default:return CUserSDK.ApiUrlConfig.sendMessageByEmailUrl}},checkEmailCode:function(t,n){var i={};i.Data={sceneCode:t.sceneCode,code:t.code,email:t.email,extension:t.extension};e.sendgatewaydata(CUserSDK.ApiUrlConfig.checkEmailCodeUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),define("userRegisterBiz",["userRegisterModel","basebizUtilString","basebizUtilValidate"],function(e,t,n){return{emailregist:function(i,o,r,s,a){var c=t.trim(o);if(c&&0!=c.length)if(n.isPwd(c)){var d=window.pwdLevel(c);d&&"1003"==d?a&&a(CUserSDK.messageConfig.pwdIsSimpleMsg):e.emailregist(i,o,r,s,a)}else a&&a(CUserSDK.messageConfig.pwdIsNotValidMsg);else a&&a(CUserSDK.messageConfig.pwdIsNullMsg)},mobileregist:function(i,o,r,s,a,c,d){var l=t.trim(s);if(l&&0!=l.length)if(n.isPwd(l)){var u=window.pwdLevel(l);u&&"1003"==u?d&&d(CUserSDK.messageConfig.pwdIsSimpleMsg):e.userregist(i,o,r,s,a,c,d)}else d&&d(CUserSDK.messageConfig.pwdIsNotValidMsg);else d&&d(CUserSDK.messageConfig.pwdIsNullMsg)},mobileTokenRegist:function(t,n){e.userregist(t.accessCode,t.strategyCode,t.token,t.pwd,t.sourceid,t.ext,n)}}}),define("userRegisterModel",["baseModel"],function(e){return{emailregist:function(t,n,i,o,r){var s={};s.Data={emailToken:t,password:n||"",sourceId:i,extendedProperties:o};e.sendgatewaydata(CUserSDK.ApiUrlConfig.emailRegisterUrl,s,!0,function(e){r&&r(e)},function(e){r&&r(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},userregist:function(t,n,i,o,r,s,a){var c={};c.Data={accessCode:t,strategyCode:n,token:i,password:o||"",sourceId:r,extendedProperties:s};e.sendgatewaydata(CUserSDK.ApiUrlConfig.userRegisterByTokenUrl,c,!0,function(e){a&&a(e)},function(e){a&&a({returncode:-1})})}}}),define("basebizUtilString",[],function(){return{trimStart0:function(e){return e&&e.length>0?e.replace("^0+(?!$)",""):""},trim:function(e){return e&&e.length>0?e.replace(/(^\s*)|(\s*$)/g,""):""},convertExt:function(e){if(e){var t=[],n=0;for(var i in e)t[n]={key:i,value:e[i]},n++;return t}},filterParam:function(e){var t={};for(var n in e){var i=e[n];if(this.isString(i))i&&i.length<200?t[n]=i:t[n]="";else if(this.isArray(i)){for(var o=[],r=0;r<i.length;r++)this.isObject(i[r])?o[r]=this.filterParam(i[r]):o[r]=i[r];t[n]=o}else this.isObject(i)?t[n]=this.filterParam(i):t[n]=i}return t},isObject:function(e){return"[object Object]"==Object.prototype.toString.call(e)},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isString:function(e){return"[object String]"==Object.prototype.toString.call(e)}}}),define("basebizUtilValidate",[],function(){return{isObject:function(e){return e===Object(e)},isCnMobile:function(e){return/^(1[3-9][0-9])\d{8}$/.test(e)},isIntlMobile:function(e){return/^\d{6,15}$/.test(e)},isUrl:function(e){return/^http(s)?:\/\/[A-Za-z0-9\-]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\:+!]*([^<>])*$/.test(e)},isFunction:function(e){return"function"==typeof e},isNumber:function(e){return"NaN"!=parseFloat(e).toString()},isPwd:function(e){return/^[^\s\u4e00-\u9fa5]{8,20}$/.test(e)},isEmail:function(e){return/^(?:\w+\.?)*\w+@(?:\w+\.?)*\w+$/.test(e)},isMobile:function(e,t){return"86"==e?this.isCnMobile(t):this.isIntlMobile(t)},isLoginName:function(e){return/^[-_0-9a-zA-Z@.]{4,}$/g.test(e)},isNotNull:function(e){return!(!e||""===e.trim())}}}),define("basebizUtilCookie",["basebizUtilDomain"],function(e){return{setUUIDCookie:function(t,n){var i=new Date;i.setTime(i.getTime()+31536e6);var o=e.getDomainRoot();this.setCookie("UUID",t,i,"/",o,!1),this.setCookie("IsPersonalizedLogin",n,i,"/",o,!1)},setCookie:function(e,t,n,i,o,r){var s=n.toGMTString();document.cookie=e+"="+t+(s?"; expires="+s:"")+(i?"; path="+i:"")+(o?"; domain="+o:"")+(r?"; secure":"")},getCookie:function(e){for(var t=document.cookie,n=e+"=",i=n.length,o=t.length,r=0;r<o;){var s=r+i;if(t.substring(r,s)==n)return this.getCookieVal(s);if(0===(r=t.indexOf(" ",r)+1))break}return null},getCookieVal:function(e){var t,n=document.cookie.indexOf(";",e);-1==n&&(n=document.cookie.length);var i=unescape(document.cookie.substring(e,n));try{t=JSON.parse(i)}catch(e){t=i}return t},remove:function(e,t,n){this.get(e)&&(document.cookie=e+"="+(t?"; path="+t:"")+(n?"; domain="+n:"")+"; expires=Thu, 01-Jan-1970 00:00:01 GMT")}}}),define("basebizUtilUrl",[],function(){return{getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},getUrlByName:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?n[2]:null},getenv:function(){var e=location.host;return e.match(/^(localhost|accounts.dev.sh.ctriptravel.com|172\.16|127\.0)/i)?"local":e.match(/^.*\.fat\d*\.qa\.nt\.ctripcorp\.com|^210\.13\.100\.191/i)?"fat":e.match(/^.*\.uat\.qa\.nt\.ctripcorp\.com/i)?"uat":e.match(/^.*\.uat\.ctripqa\.com/i)?"uatqa":"pro"}}}),define("basebizUtilDomain",["basebizUtilUrl"],function(basebizUtilUrl){var rootDomain={dev:"qa.nt.ctripcorp.com",fat:"qa.nt.ctripcorp.com",uat:"qa.nt.ctripcorp.com",pro:"ctrip.com"},accountDomain={dev:"https://accounts.fat466.qa.nt.ctripcorp.com/",fat:"https://accounts.fat466.qa.nt.ctripcorp.com/",uat:"https://accounts.uat.qa.nt.ctripcorp.com/",uatqa:"https://accounts.ctrip.uat.qa.nt.ctripcorp.com/",pro:"https://accounts.ctrip.com/"},passportDomain={local:"https://passport.fat466.qa.nt.ctripcorp.com",fat:"https://passport.fat466.qa.nt.ctripcorp.com",uat:"https://passport.ctrip.uat.qa.nt.ctripcorp.com",uatqa:"https://passport.ctrip.uat.qa.nt.ctripcorp.com",pro:"https://passport.ctrip.com"},myctripUrl={local:"http://my.fat466.qa.nt.ctripcorp.com/home/myinfo.aspx",fat:"http://my.fat466.qa.nt.ctripcorp.com/home/myinfo.aspx",uat:"http://my.uat.qa.nt.ctripcorp.com/home/myinfo.aspx",uatqa:"http://my.uat.qa.nt.ctripcorp.com/home/myinfo.aspx",pro:"http://my.ctrip.com/home/myinfo.aspx"},realNameUrl="H5login/realname",loginUrl="H5login/Index",domainUtil={getEnv:function(){var e=window.location.host;return e.indexOf("localhost")>-1||e.indexOf("127.0.0.1")>-1||e.indexOf("dev")>-1?"dev":e.indexOf("fat")>-1||e.indexOf("fws")>-1?"fat":e.indexOf("uat")>-1?"uat":"pro"},getPassPortDomain:function(){return passportDomain[this.getEnv()]},getDomainRoot:function(){return rootDomain[this.getEnv()]},getAccountDomain:function(){return accountDomain[this.getEnv()]},getRealNameUrl:function(){return this.getAccountDomain()+realNameUrl},getLoginUrl:function(){return this.getAccountDomain()+loginUrl},getMyCtripUrl:function(){return myctripUrl[this.getEnv()]},isUrl:function(e){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\’:+!]*([^<>\"\"])*$/.test(e)},parseUrl:function(e){var t=/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/.exec(e||"")||[];return{href:t[0]||"",hrefNoHash:t[1]||"",hrefNoSearch:t[2]||"",domain:t[3]||"",protocol:t[4]||"",doubleSlash:t[5]||"",authority:t[6]||"",username:t[8]||"",password:t[9]||"",host:t[10]||"",hostname:t[11]||"",port:t[12]||"",pathname:t[13]||"",directory:t[14]||"",filename:t[15]||"",search:t[16]||"",hash:t[17]||""}},getSelfDomain:function(){return this.parseUrl(window.location.href).domain},getBackDomain:function(e){return this.parseUrl(e).domain},getBackUrl:function(){var url=basebizUtilUrl.getQueryString("backurl");if(void 0!==url&&null!==url){var backDomain=this.getBackDomain(url);if(backDomain){var allowreg=jQuery("#AllowDomain").val();if(!allowreg)return url;var reg=eval(allowreg);if(reg.test(backDomain))return url}}return this.getMyCtripUrl()}};return domainUtil}),define("basebizUtilDom",[],function(){var e=document;return{getSilderResult:function(){var e={};return jQuery("#sliderResult")&&(e.token=jQuery("#sliderResult").attr("token"),e.version=jQuery("#sliderResult").attr("version"),e.state=jQuery("#sliderResult").attr("state")),e},showError:function(e,t,n){t?void 0!==n&&null!=n?(e.removeClass("base_success"),e.addClass("base_error"),e.css("display",""),e.html("<i></i>"+n)):(e.removeClass("base_success"),e.addClass("base_error"),e.css("display",""),e.html("<i></i> 请重试")):(e.css("display","none"),e.html("<i></i>"+n)),this.laydiv()},showTips:function(e,t,n){t?(e.removeClass("base_error"),e.addClass("base_success"),e.css("display",""),e.html("<i></i>"+n)):(e.css("display","none"),e.html("<i></i>"+n)),this.laydiv()},showLoading:function(){var t=jQuery("#lg_loginbox").height();e.getElementById("tostalloading").style.height=t-40+"px","mask"===CLogin.scene&&(e.getElementById("tostalloading").style.top="50%"),jQuery("#tostalloading").show()},hideLoading:function(){jQuery("#tostalloading").hide()},laydiv:function(){if("mask"!==CLogin.scene){var e=jQuery(".lg_loginbox").outerHeight(!0),t=(jQuery(".lg_loginwrap").outerHeight(!0)-e)/2;jQuery(".lg_loginbox").css({"margin-top":t})}},ShowView:function(e){for(var t=jQuery(".form_wrap"),n=0;n<t.length;n++)t[n].id===e?jQuery("#"+t[n].id).show():jQuery("#"+t[n].id).hide();this.laydiv(),this.getOperationVersion()<=9&&jQuery("input[placeholder]").placeholder()},getOperationVersion:function(){var e=navigator.userAgent,t=e.indexOf("Opera")>-1,n=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t;if(e.indexOf("Windows NT 6.1; Trident/7.0;"),n){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var i=parseFloat(RegExp.$1);return 7==i?i:8==i?i:9==i?i:10==i?i:11==i?i:"0"}return"100"},metricCount:function(e,t){try{void 0===window.__bfi&&(window.__bfi=[]),t&&(t.secretKey=CLogin.Secretkey),__bfi.push(["_trackMetric",{name:e,value:1,tag:t}])}catch(e){}}}}),define("AccountUtilSecurity",["basebizUtilDom"],function(e){var t;return{getRmsToken:function(){var e;return window.__rmsbfi=window.__rmsbfi||[],window.__rmsbfi.push(["_getRmsToken",function(t){e=t}],!1),e},repairRmsToken:function(e){try{e.ext||(e.ext={});for(var t=-1,n=0;n<e.ext.length;n++)"rmsToken"===e.ext[n].key&&(t=n);-1!==t&&e.ext.splice(t,1);var i={key:"rmsToken",value:this.getRmsToken()};e.ext.concat(i)}catch(e){}},initOnlineUbtScript:function(){if(!(window.$_bf&&window.$_bf.loaded||window.$LAB||window.CtripJsLoader)){var e,t=!1,n="?v="+(e=new Date).getFullYear()+e.getMonth()+"_"+e.getDate();(e=document.createElement("script")).type="text/javascript",e.charset="utf-8",e.async=!0;try{t="https:"==location.protocol}catch(e){}e.src=(t?"https:":"http:")+"//webresource.c-ctrip.com/code/ubt/_bfa.min.js"+n,(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)}},initH5UbtScript:function(){if(!window.$_bf||!window.$_bf.loaded){var e,t="?v="+(e=new Date).getFullYear()+e.getMonth()+"_"+e.getDate();(e=document.createElement("script")).type="text/javascript",e.charset="utf-8",e.async=!0,e.src="//webresource.c-ctrip.com/code/ubt/_mubt.min.js"+t,(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)}},showSliderExt:function(e){t&&t.clear(),t=new slidingVerification({id:e.sliderId,appId:"100008493",containerId:e.sliderContainer,businessSite:e.businessSite,width:e.width,height:e.height,language:e.sliderLocale,chooseOpt:{position:"fixed",width:"280px",height:"200px",type:"pop"},stateChange:function(t){e.stateChangeCallback&&e.stateChangeCallback(t)},resultHandler:function(t){e.resultCallback&&e.resultCallback(t)}})},showSliderExtWithSelectClose:function(e){t&&t.clear(),t=new slidingVerification({id:e.sliderId,appId:"100008493",containerId:e.sliderContainer,businessSite:e.businessSite,width:e.width,height:e.height,language:e.sliderLocale,chooseOpt:{position:"fixed",width:"280px",height:"200px",type:"pop"},stateChange:function(t){e.stateChangeCallback&&e.stateChangeCallback(t)},resultHandler:function(t){e.resultCallback&&e.resultCallback(t)},onSelectClose:function(){e.selectClose&&e.selectClose()}})},showSlider:function(n,i,o){t&&t.clear(),t=new slidingVerification({id:n,appId:"100008493",businessSite:i,width:"320px",height:"40px",language:"zh-CN",chooseOpt:{position:"fixed",width:"280px",height:"200px",type:"pop"},stateChange:function(t){t>=0&&(jQuery("#"+n).parent().show(),jQuery("#"+n).show(),e.laydiv())},resultHandler:function(e){o?(o(e),jQuery("#sliderResult").attr("token",e.token),jQuery("#sliderResult").attr("version",e.version),jQuery("#sliderResult").attr("state",e.checkState)):(jQuery("#sliderResult").attr("token",e.token),jQuery("#sliderResult").attr("version",e.version),jQuery("#sliderResult").attr("state",e.checkState))}}),jQuery("#"+n).parent().hide()},cleanSlider:function(){t&&t.clear()},refreshSlider:function(){t&&(t.refresh(),jQuery("#sliderResult").attr("token",""),jQuery("#sliderResult").attr("version",""),jQuery("#sliderResult").attr("state",""))},refreshSliderExt:function(){t&&(t.refresh(),sliderResultDom=document.getElementById("sliderResult"),sliderResultDom.setAttribute("token",""),sliderResultDom.setAttribute("version",""),sliderResultDom.setAttribute("state",""))},refreshSliderBase:function(){t&&t.refresh()}}}),define("accountUtil",["basebizUtilCookie"],function(e){return{countDown:function(e,t,n,i){var o=this;if(0==e)return void 0!=n&&(n.val()?n.val(e+(void 0!=i?i:"")):n.html(e+(void 0!=i?i:""))),void t();void 0!=n&&(n.val()?n.val(e+(void 0!=i?i:"")):n.html(e+(void 0!=i?i:"")));window.setTimeout(function(){o.countDown(--e,t,n,i)},1e3)},countDownCallBack:function(e,t){this.countDown(60,t,e,"s")},countDownExt:function(e,t,n,i){var o=this;if(0!=e){if(void 0!=n){r=i(e);n.val()?n.val(r):n.html(r)}window.setTimeout(function(){o.countDownExt(--e,t,n,i)},1e3)}else{if(void 0!=n){var r=i(e);n.val()?n.val(r):n.html(r)}t()}},countDownExtCallBack:function(e,t,n){this.countDownExt(60,t,e,n)},createDomInBody:function(e){if(!document.getElementById(e)){var t=document.createElement("div");t.setAttribute("id",e),document.getElementsByTagName("body")[0].appendChild(t)}},getRmsToken:function(){var e;return window.__rmsbfi=window.__rmsbfi||[],window.__rmsbfi.push(["_getRmsToken",function(t){e=t}],!1),e},repairRmsToken:function(e){try{e.ext||(e.ext=[]),e.context||(e.context={});for(var t=-1,n=0;n<e.ext.length;n++)"rmsToken"===e.ext[n].key&&(t=n);-1!==t&&e.ext.splice(t,1);var i={key:"rmsToken",value:this.getRmsToken()};e.context.rmsToken=this.getRmsToken(),e.ext=e.ext.concat(i)}catch(e){}},initOnlineUbtScript:function(){if(!(window.$_bf&&window.$_bf.loaded||window.$LAB||window.CtripJsLoader)){var e,t=!1,n="?v="+(e=new Date).getFullYear()+e.getMonth()+"_"+e.getDate();(e=document.createElement("script")).type="text/javascript",e.charset="utf-8",e.async=!0;try{t="https:"==location.protocol}catch(e){}e.src=(t?"https:":"http:")+"//webresource.c-ctrip.com/code/ubt/_bfa.min.js"+n,(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)}},initH5UbtScript:function(){if(!window.$_bf||!window.$_bf.loaded){var e,t="?v="+(e=new Date).getFullYear()+e.getMonth()+"_"+e.getDate();(e=document.createElement("script")).type="text/javascript",e.charset="utf-8",e.async=!0,e.src="//webresource.c-ctrip.com/code/ubt/_mubt.min.js"+t,(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)}},repairClientID:function(t){try{t.ext||(t.ext=[]),t.context||(t.context={});for(var n=-1,i=0;i<t.ext.length;i++)"ClientID"===t.ext[i].key&&(n=i);-1!==n&&t.ext.splice(n,1);var o=e.getCookie("GUID");o?o+="":o="";var r={key:"ClientID",value:o};t.context.ClientID=o,t.ext=t.ext.concat(r)}catch(e){}}}}),define("commonUI",[],function(){return{initCountryCode:function(e,t){try{require(["https://webresource.c-ctrip.com/ares2/basebiz/countryCode/~1.1.0/default/country.h5.js"],function(e){var n={needSMS:1,enabledAnchor:!0,countryCode:86,showName:"中国大陆",onSelect:function(e){t&&t(e)}};e.init(n)})}catch(e){}},showCountryCode:function(){try{require(["https://webresource.c-ctrip.com/ares2/basebiz/countryCode/~1.1.0/default/country.h5.js"],function(e){e.show()})}catch(e){}},showToast:function(e){var t=document.getElementById("clogin_mask_toast"),n=document.getElementById("clogin_widget_toast");n.innerHTML=e,t.style.display="block",n.style.display="block",setTimeout(function(){t.style.display="none",n.style.display="none"},1500)},showLoading:function(){},hideLoading:function(){},showSlider:function(){},loadView:function(e,t){var n=document.getElementById("loginSDKBox");n?n.innerHTML="":(n=document.createElement("div")).id="loginSDKBox",n.innerHTML=t,document.getElementById(e).appendChild(n)},unloadView:function(){document.getElementById("loginSDKBox").innerHTML=""}}}),define("commonLoginUI",["commonUI","accountUtil","AccountUtilSecurity","userLoginBiz","loginView"],function(e,t,n,i,o){var r,s,a,c,d,l,u,g,f=CUserSDK.sdkMsg.commonLoginMsg;return{showView:function(n,i){n||(n="commonLoginUiDiv",t.createDomInBody(n)),u=this,g=i,e.loadView(n,o),r=document.getElementById("clogin_loginname"),s=document.getElementById("clogin_pwd"),a=document.getElementById("clogin_submit"),c=document.getElementById("clogin_slider_container"),d=document.getElementById("sliderResult"),l=document.getElementById("closeBtn"),u.bindEvent()},loginSubmit:function(){var t=r.value,i=s.value;return t&&0!=t.length?i&&0!=i.length?void u.showSlider(function(o){c.style.display="none",d.setAttribute("token",o.token),d.setAttribute("version",o.version),d.setAttribute("state",o.checkState);var r={accessCode:CUserSDK.h5sdkConfig.userPwdLoginAccessCode,strategyCode:CUserSDK.h5sdkConfig.userPwdLoginStrategy,loginName:t,pwd:i,safeToken:d.getAttribute("token"),sliderVersion:d.getAttribute("version"),ext:[{key:"Platform",value:"H5"},{key:"PageID",value:""},{key:"rmsToken",value:n.getRmsToken()},{key:"ClientID",value:""},{key:"Referer",value:document.referrer},{key:"Cookie",value:document.cookie},{key:"URL",value:location.href},{key:"UserAgent",value:navigator.userAgent}]};e.showLoading(),CLogin.userLoginBiz.commonLoginWithRisk(r,u.loginCallback)}):void e.showToast(f[10105]):void e.showToast(f[10108])},loginCallback:function(t){e.hideLoading(),t&&0==t.returncode?(e.unloadView(),g&&g(t)):e.showToast(f[t.returncode]||f[900])},bindEvent:function(){a.onclick=function(){u.loginSubmit()},l.onclick=function(){c.style.display="none"}},showSlider:function(e){var t={sliderId:"clogin_sliderId",sliderContainer:"slider-container",width:"calc(100% - 120px)",height:"54px",businessSite:CUserSDK.h5sdkConfig.businessSite.commonLogin,sliderLocale:CUserSDK.h5sdkConfig.sliderLocale,resultCallback:e,stateChangeCallback:u.stateChangeFn};n.showSliderExt(t)},stateChangeFn:function(e){e>=0&&(c.style.display="block")}}}),define("dynamicPwdLoginUI",["commonUI","accountUtil","AccountUtilSecurity","mobileValidateBiz","userLoginBiz","userRegisterBiz","dynamicLoginView"],function(e,t,n,i,o,r,s){var a,c,d,l,u,g,f,m,p,h,C,y,v,w,b,k=CUserSDK.sdkMsg.sendDyPwdMsg,S=CUserSDK.sdkMsg.validateDyPwdMsg,U=CUserSDK.sdkMsg.mobileRegMsg,x=CUserSDK.sdkMsg.mobileTokenLoginMsg;return{showView:function(n,i){n||(n="dynamicLoginUiDiv",t.createDomInBody(n)),y=!0,C=this,w=i,e.loadView(n,s),C.initDom(),C.initCountryCode(),v=f.innerHTML,C.bindEvent()},initDom:function(){d=document.getElementById("dypwd_countryselect"),a=document.getElementById("dylogin_countryresult"),c=document.getElementById("dylogin_countrycode"),l=document.getElementById("dylogin_phonenumber"),u=document.getElementById("dylogin_dypwd"),g=document.getElementById("dylogin_loginBtn"),f=document.getElementById("dylogin_sendBtn"),m=document.getElementById("dypwd_slider_container"),p=document.getElementById("sliderResult"),h=document.getElementById("closeBtn")},initCountryCode:function(){a.setAttribute("code","86"),c.innerHTML="+"+a.getAttribute("code");try{require(["https://webresource.c-ctrip.com/ares2/basebiz/countryCode/~1.1.0/default/country.h5.js"],function(){e.initCountryCode(null,function(e){a.setAttribute("code",e.code),c.innerHTML="+"+e.code})})}catch(e){}},bindEvent:function(){f.onclick=function(){C.sendDypwd()},y&&(y=!1,d.onclick=function(){e.showCountryCode()},g.onclick=function(){C.dyLogin()},h.onclick=function(){m.style.display="none"})},sendDypwd:function(){var t=a.getAttribute("code"),o=l.value;return o&&0!=o.length?o.isMobile(t)?void C.showSlider(function(r){C.sliderResultCallback(r),f.className="in_login-send mix__disabled",f.onclick=null;try{b=(new Date).getTime()}catch(r){}var s={countryCode:t,phoneNumber:o,businessSite:CUserSDK.h5sdkConfig.businessSite.dypwdLogin,sceneCode:86==t?CUserSDK.h5sdkConfig.sendCode.cn:CUserSDK.h5sdkConfig.sendCode.i18n,safeToken:p.getAttribute("token"),sliderVersion:p.getAttribute("version"),ext:[{key:"SceneType",value:"SMS-LOGIN-SITE"},{key:"Platform",value:"H5"},{key:"rmsToken",value:n.getRmsToken()},{key:"clientID",value:""},{key:"referer",value:document.referrer},{key:"Url",value:location.href},{key:"UserAgent",value:navigator.userAgent}]};e.showLoading(),i.sendCodeByMobile(s,C.sendDypwdCallback)}):void e.showToast(k[10104]):void e.showToast(k[10103])},sendDypwdCallback:function(t){e.hideLoading(),t&&0==t.returncode?C.countDownExt(1,function(){C.countDownExtCallBack(f,function(){if(document.getElementById("dylogin_sendBtn")){try{if((new Date).getTime()-b<58e3)return}catch(e){}f.className="in_login-send",C.bindEvent(),f.innerHTML=v}},C.replaceStr)},null,C.replaceStr):(e.showToast(k[t.returncode]||k[900]),f.className="in_login-send",C.bindEvent())},replaceStr:function(e){return e+"秒后重发"},dyLogin:function(){var t=a.getAttribute("code"),s=l.value,c=u.value,d={accessCode:CUserSDK.h5sdkConfig.tokenRegAccessCode,strategyCode:CUserSDK.h5sdkConfig.tokenRegStrategy,sourceid:CUserSDK.h5sdkConfig.sourceid,ext:[{key:"Platform",value:"H5"},{key:"PageID",value:""},{key:"rmsToken",value:n.getRmsToken()},{key:"ClientID",value:""},{key:"Referer",value:document.referrer},{key:"Cookie",value:document.cookie},{key:"URL",value:location.href},{key:"UserAgent",value:navigator.userAgent}]},g={accessCode:CUserSDK.h5sdkConfig.tokenLoginAccessCode,strategyCode:CUserSDK.h5sdkConfig.tokenLoginStrategy,ext:[{key:"Platform",value:"H5"},{key:"rmsToken",value:n.getRmsToken()},{key:"ClientID",value:""},{key:"http_referer",value:document.referrer},{key:"http_cookie",value:document.cookie},{key:"Url",value:location.href},{key:"UserAgent",value:navigator.userAgent}]},f=function(t){t&&0==t.returncode?o.tokenLogin(g,m):e.showToast(U[t.returncode]||U[900])},m=function(t){t&&0==t.returncode?(e.unloadView(),w&&w(t)):e.showToast(x[t.returncode]||x[900])};i.validateMobileCode(t,s,CUserSDK.h5sdkConfig.ticketType.dypwdLogin,c,function(t){t&&0==t.returncode?(g.token=t.Token,t.UID&&0!=t.UID.length?o.tokenLogin(g,m):(d.token=t.Token,r.mobileTokenRegist(d,f))):e.showToast(S[t.returncode]||S[900])})},showSlider:function(e){var t={sliderId:"dypwd_sliderId",sliderContainer:"slider-container",width:"calc(100% - 120px)",height:"54px",businessSite:CUserSDK.h5sdkConfig.businessSite.dypwdLogin,sliderLocale:CUserSDK.h5sdkConfig.sliderLocale,resultCallback:e,stateChangeCallback:C.stateChangeFn};n.showSliderExt(t)},stateChangeFn:function(e){e>=0&&(m.style.display="block")},sliderResultCallback:function(e){m.style.display="none",p.setAttribute("token",e.token),p.setAttribute("version",e.version),p.setAttribute("state",e.checkState)},countDownCallBack:function(e,t){this.countDown(60,t,e,"s")},countDownExt:function(e,t,n,i){var o=this;if(0!=e){if(void 0!=n){r=i(e);n.value?n.value=r:n.innerHTML=r}window.setTimeout(function(){o.countDownExt(--e,t,n,i)},1e3)}else{if(void 0!=n){var r=i(e);n.value?n.value=r:n.innerHTML=r}t()}},countDownExtCallBack:function(e,t,n){this.countDownExt(60,t,e,n)}}}),define("nonmemberUI",["commonUI","AccountUtilSecurity","userLoginBiz","nonmemberLoginView","authBiz","accountUtil"],function(e,t,n,i,o,r){var s,a,c,d;return{showView:function(e,t){var n=e.containerId,i=e.secretKey;!CLogin.Secretkey&&i&&(CLogin.Secretkey=i),CLogin.Secretkey||(CLogin.Secretkey="E8FWZ6LT831QT94NLFO9N6BGSLQO7L8W"),n||(n="nonmemberLoginUiDiv",r.createDomInBody(n)),!0,d=this,e.retainLoginStatus?o.isLogin({},function(i){i&&0===i.returnCode?t({returncode:0}):d.loadNonMemberView(n,e,t)}):d.loadNonMemberView(n,e,t)},loadNonMemberView:function(t,n,o){e.loadView(t,i),d.initDom(),d.bindEvent(o),d.metricCount(),d.nonmemberLoginWithSlider(n,o)},bindEvent:function(e){c.onclick=function(){d.metricSlider(d.subScene),d.selectClose(e)}},nonmemberLoginWithSlider:function(i,o){d.showSlider(i.businessSite,function(r){d.metricSlider(d.subScene),d.sliderResultCallback(r);var s={platform:"h5",locale:"zh_CN",sourceID:i.sourceID?i.sourceID:"1",safeToken:a.getAttribute("token"),sliderVersion:a.getAttribute("version"),context:{rmsToken:t.getRmsToken(),Referer:document.referrer,Url:location.href,UserAgent:navigator.userAgent,clientID:i.clientID?i.clientID:""},requestUrl:i.requestUrl};e.showLoading(),n.nonMemberLoginWithRisk(s,o)})},initDom:function(){s=document.getElementById("nonmember_slider_container"),a=document.getElementById("nonmember_sliderResult"),c=document.getElementById("nonmember_closeBtn")},stateChangeFn:function(e){e>=0&&(s.style.display="block",d.subScene="nonMemberWithSlider")},selectClose:function(e){s.style.display="none",e&&e({returncode:-2})},showSlider:function(e,n){e||(e="crm_nonmemberlogin_h5");var i={sliderId:"nonmember_sliderId",sliderContainer:"nonmember_slider_container",width:"calc(100% - 120px)",height:"54px",businessSite:e,sliderLocale:"zh_CN",resultCallback:n,stateChangeCallback:d.stateChangeFn};t.showSliderExtWithSelectClose(i)},sliderResultCallback:function(e){s.style.display="none",a.setAttribute("token",e.token),a.setAttribute("version",e.version),a.setAttribute("state",e.checkState)},metricCount:function(){try{void 0===window.__bfi&&(window.__bfi=[]),__bfi.push(["_trackMetric",{name:"102555",value:1,tag:{platform:"h5"}}])}catch(e){}},metricSlider:function(e){try{var t="";window.CLogin&&window.CLogin.Secretkey&&(t=window.CLogin.Secretkey),void 0===window.__bfi&&(window.__bfi=[]),__bfi.push(["_trackMetric",{name:"103419",value:1,tag:{location:window.location.href,scene:"loginSlider",secretKey:t,subScene:e,platform:"h5"}}])}catch(e){}d.subScene="nonMemberWithoutSlider"}}}),define("dynamicLoginView",[],function(){return'<div class="in_login">\r\n    <div class="in_login-form">\r\n\r\n        <div class="in_login-item phoneNumber-item">\r\n            <label for="dylogin_phonenumber">手机号</label>\r\n            <span class="in_login-clear"><i class="in_login-clear-icon"></i></span>\r\n            <div class="phoneNumber-select" >\r\n                <span id="dylogin_countrycode">+86</span>\r\n                <span class="phoneNumber-select-btn" id="dypwd_countryselect"></span>\r\n            </div>\r\n            <div class="in_login-text">\r\n                <input type="tel" id="dylogin_phonenumber" placeholder="手机号"/>\r\n                <input type="hidden" id="dylogin_countryresult"/>\r\n            </div>\r\n        </div>\r\n        <div class="in_login-item">\r\n            <label for="dylogin_dypwd">动态密码</label>\r\n            <span class="in_login-send" id="dylogin_sendBtn">获取动态密码</span>\r\n            <span class="in_login-clear"><i class="in_login-clear-icon"></i></span>\r\n\r\n            <div class="in_login-text">\r\n                <input type="number" maxlength="6" id="dylogin_dypwd" placeholder="6位数字"/>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="in_login-item in_login-item_action">\r\n            <button class="in_login-submit" id="dylogin_loginBtn">登录</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="clogin_mask_toast" class="toast_login-mask">\r\n</div>\r\n<div id="clogin_widget_toast" class="toast_login-layer">\r\n</div>\r\n\r\n<div class="mask" id="dypwd_slider_container" style="display:none">\r\n    <dib class="slderBox">\r\n        <h2>滑动校验</h2>\r\n        <span class="sliderBox-icon-close" id="closeBtn"></span>\r\n        <div id="slider-container">\r\n          <div class="m-slider" id="dypwd_sliderId"></div>\r\n        </div>\r\n        <input type="hidden" id="sliderResult"/>\r\n    </dib>\r\n</div>'}),define("loginView",[],function(){return'<div class="in_login">\r\n    <div class="in_login-form">\r\n        <div class="in_login-item">\r\n            <label for="clogin_loginname">登录名</label>\r\n            <span class="in_login-clear"><i class="in_login-clear-icon"></i></span>\r\n            <div class="in_login-text">\r\n                <input type="text" id="clogin_loginname" placeholder="手机号/卡号/邮箱/用户名"/>\r\n            </div>\r\n        </div>\r\n        <div class="in_login-item">\r\n            <label for="clogin_pwd">密码</label>\r\n            <span class="in_login-clear"><i class="in_login-clear-icon"></i></span>\r\n            <div class="in_login-text">\r\n                <input type="password" maxlength="20" id="clogin_pwd"/>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="in_login-item in_login-item_action">\r\n            <button class="in_login-submit" id="clogin_submit">登录</button>\r\n        </div>\r\n    </div>\r\n    <div class="in_login-other">\r\n        <a href="https://accounts.ctrip.com/H5Register/register" id="clogin_register">注册</a>\r\n        <a href="https://accounts.ctrip.com/H5Login/Index" id="clogin_otherlogin">其他登录方式→</a>\r\n    </div>\r\n</div>\r\n<div id="clogin_mask_toast" class="toast_login-mask">\r\n</div>\r\n<div id="clogin_widget_toast" class="toast_login-layer">\r\n</div>\r\n\r\n<div class="mask" id="clogin_slider_container" style="display:none">\r\n    <dib class="slderBox">\r\n        <h2>滑动校验</h2>\r\n        <span class="sliderBox-icon-close" id="closeBtn"></span>\r\n        <div id="slider-container">\r\n          <div class="m-slider" id="clogin_sliderId"></div>\r\n        </div>\r\n        <input type="hidden" id="sliderResult"/>\r\n    </dib>\r\n</div>'}),define("nonmemberLoginView",[],function(){return'<div>\r\n<style type="text/css" scoped="scoped">\r\n        .mask{\r\n            background: rgba(0,0,0,0.6);\r\n            position: fixed;\r\n            z-index: 1000;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n        .slderBox{\r\n            background: #fff;\r\n            position: absolute;\r\n            z-index: 1001;\r\n            border-radius: 10px;\r\n            padding: 30px 20px 40px;\r\n            left: 40px;\r\n            right: 40px;\r\n            top: 50%;\r\n            transform: translate(0,-50%);\r\n        }\r\n        .slderBox h2{\r\n            font-size: 17px;\r\n            font-family: "Microsoft YaHei",Arial,"Lucida Grande",Verdana,hei;\r\n            text-align: center;\r\n            font-weight: normal;\r\n        }\r\n        .sliderBox-icon-close{\r\n            position: absolute;\r\n            right: 15px;\r\n            top: 15px;\r\n            width: 20px;\r\n            height: 20px;\r\n            display: block;\r\n        }\r\n        .sliderBox-icon-close::before, .sliderBox-icon-close::after {\r\n            content: "";\r\n            position: absolute;\r\n            left: 50%;\r\n            top: 50%;\r\n            width: 2px;\r\n            height: 20px;\r\n            -webkit-transform: translate(-50%, -50%) rotate(45deg);\r\n            transform: translate(-50%, -50%) rotate(45deg);\r\n            background-color: #979797;\r\n        }\r\n        .sliderBox-icon-close::after {\r\n            -webkit-transform: translate(-50%, -50%) rotate(-45deg);\r\n            transform: translate(-50%, -50%) rotate(-45deg);\r\n        }\r\n        #slider-container{\r\n            margin:0 -60px;\r\n        }\r\n        .m-slider {\r\n            position: relative;\r\n            height: 54px;\r\n            background: #E5E5E5;\r\n            width: calc(100% - 120px);\r\n            margin-top: 20px;\r\n            box-shadow: inset 0 0 3px rgba(0,0,0,0.1);\r\n            border-radius: 4px;\r\n            overflow: hidden;\r\n            margin-left: 60px;\r\n        }\r\n        .m-slider .icon-right {\r\n            width: 17px;\r\n            height: 17px;\r\n            background-position: -44px -296px;\r\n            display: none;\r\n        }\r\n        .m-slider .slider-btn {\r\n            position: absolute;\r\n            top: 0;\r\n            width: 54px;\r\n            height: 54px;\r\n            border: 2px solid #BBBBBB;\r\n            background: #fff;\r\n            border-radius:4px;\r\n            box-sizing: border-box;\r\n            text-align: center;\r\n            z-index: 1002;\r\n        }\r\n        .m-slider .slider-process {\r\n            position: absolute;\r\n            left: 0;\r\n            top: 0;\r\n            background: #55af32;\r\n            height: 54px;\r\n            width:54px;\r\n            border-radius:4px;\r\n        }\r\n        .m-slider .slider-text{\r\n            height: 54px;\r\n            line-height: 54px;\r\n            width: 100%;\r\n            text-align: center;\r\n            position: absolute;\r\n            left: 0;\r\n            top: 0;\r\n            z-index: 1001;\r\n            color:#666;\r\n            font-size: 15px;\r\n        }\r\n        .m-slider .c-icon {\r\n            display: block;\r\n            position: absolute;\r\n            left: 50%;\r\n            top:50%;\r\n            transform:translate(-50%,-50%);\r\n            background: url(//pic.c-ctrip.com/platform/h5/login/m-slider2.png) no-repeat;\r\n            background-size:25px auto;\r\n        }\r\n        .m-slider .icon-arrow {\r\n            width: 20px;\r\n            height: 18px;\r\n            background-position:0 0;\r\n        }\r\n        .m-slider .icon-right {\r\n            width: 22px;\r\n            height: 25px;\r\n            background-position: 0 -25px;\r\n            display: none;\r\n        }\r\n        @media only screen and (max-width:320px) {\r\n            .slderBox{\r\n                left: 20px;\r\n                right: 20px;\r\n            }\r\n        }\r\n    </style>\r\n<div class="mask" id="nonmember_slider_container" style="display:none">\r\n    <dib class="slderBox">\r\n        <h2>滑动校验</h2>\r\n        <span class="sliderBox-icon-close" id="nonmember_closeBtn"></span>\r\n        <div id="nonmember_slider_container" style="margin:0 -60px;">\r\n          <div class="m-slider" id="nonmember_sliderId"></div>\r\n        </div>\r\n        <input type="hidden" id="nonmember_sliderResult"/>\r\n    </dib>\r\n</div>\r\n</div>'}),define("thirdpartBiz",["thirdpartModel","AuthModel","uuidBiz","accountUtil"],function(e,t,n,i){return{authenticate:function(t,n){e.authenticate(t,n)},thirdPartLogin:function(o,r){i.repairRmsToken(o),i.repairClientID(o),e.thirdPartLogin(o,function(e){if(e&&0==e.returncode){var i=e.ticket;t.writeLoginSession(i,function(e){e&&0==e.returnCode?n.writeUUIDCookie(o.loginName,CUserSDK.loginConfig.loginType.thirdPartLogin,"F",function(e){r&&r(CUserSDK.messageConfig.successMsg)}):r&&r(CUserSDK.messageConfig.writeLoginSessionFailMsg)})}else r&&r(e)})},thirdPartBindAndLogin:function(o,r){i.repairRmsToken(o),i.repairClientID(o),e.thirdPartBindAndLogin(o,function(e){if(e&&0==e.returncode){var i=e.ticket;t.writeLoginSession(i,function(e){e&&0==e.returnCode?n.writeUUIDCookie(o.loginName,CUserSDK.loginConfig.loginType.thirdPartLogin,"F",function(e){r&&r(CUserSDK.messageConfig.successMsg)}):r&&r(CUserSDK.messageConfig.writeLoginSessionFailMsg)})}else r&&r(e)})},thirdBindByTicket:function(t,n){e.thirdBindByTicket(t,n)}}}),define("thirdpartModel",["baseModel"],function(e){return{thirdPartLogin:function(t,n){var i={};i.AccountHead={Platform:t.platform,Token:t.safeToken,SliderVersion:t.sliderVersion},i.Data={thirdToken:t.thirdToken,autoRegister:t.autoRegister,registerFrom:t.registerFrom,context:t.context?t.context:{},accountHead:t.accountHead};e.sendgatewaydata(CUserSDK.ApiUrlConfig.JthirdPartLoginUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},thirdPartBindAndLogin:function(t,n){var i={};i.AccountHead={Platform:t.platform,Token:t.safeToken,SliderVersion:t.sliderVersion},i.Data={thirdToken:t.thirdToken,validateToken:t.validateToken,validateTokenType:t.validateTokenType,autoLogin:t.autoLogin,context:t.context?t.context:{},accountHead:t.accountHead};e.sendgatewaydata(CUserSDK.ApiUrlConfig.JthirdPartBindAndLoginUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},authenticate:function(t,n){var i={};i.AccountHead={Platform:t.platform},i.Data={authCode:t.authCode,thirdType:t.thirdType,thirdConfigCode:t.thirdConfigCode,context:t.context?t.context:{},accountHead:{platform:t.platform,locale:t.locale?t.locale:"zh_cn"}};e.sendgatewaydata(CUserSDK.ApiUrlConfig.authenticateUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},thirdBindByTicket:function(t,n){var i={};i.AccountHead={Platform:t.platform},i.Data={token:t.token,context:t.context?t.context:{},accountHead:t.accountHead};e.sendgatewaydata(CUserSDK.ApiUrlConfig.thirdBindByTicketUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),define("QRCodeBiz",["QRCodeModel","basebizUtilString","basebizUtilValidate","userLoginBiz","AccountUtilSecurity"],function(e,t,n,i,o){var r="",s=!1,a=!1,c=!1;return{getQRCode:function(t,n){e.getQRCode(t,n)},checkQRCode:function(t,n){e.checkQRCode(t,n)},getNewQRCode:function(t,n){e.getNewQRCode(t,n)},updateQRCode:function(t,n){e.updateQRCode(t,n)},checkQrCodeStatus:function(t,n){r=this,e.checkNewQRCode(t,function(e){r.checkCallbackFn(e,t,n)})},later:function(e,t){setTimeout(e,t)},checkCallbackFn:function(e,t,n){if("none"!==jQuery("#scanloginview").css("display")){if(!e||0!=e.returnCode){if(500!==e.returnCode)return void r.later(function(){r.checkQrCodeStatus(t,n)},50);e.status="expired"}switch(e.status){case"new":s=!1,c=!1,a=!1,r.later(function(){r.checkQrCodeStatus(t,n)},200);break;case"scanned":s||(s=!0,n(e)),r.later(function(){r.checkQrCodeStatus(t,n)},300);break;case"confirmed":if(c)break;c=!0,r.tokenLogin(e.token,function(e){e.status="confirmed",e.returnCode=e.returncode,n((e&&e.returncode,e))});break;case"canceled":case"expired":if(a)break;a=!0,n(e);break;default:r.later(function(){r.checkQrCodeStatus(t,n)},200)}}},later:function(e,t){setTimeout(e,t)},tokenLogin:function(e,t){var n={accessCode:CUserSDK.config.loginAccessCode||"7434E3DDCFF0EDA8",strategyCode:CUserSDK.config.QRCodeLoginStrategyCode||"F8592E52468E4792",token:e,ext:[{key:"Platform",value:"P"},{key:"rmsToken",value:o.getRmsToken()},{key:"ClientID",value:""},{key:"http_referer",value:document.referrer},{key:"http_cookie",value:document.cookie},{key:"Url",value:window.location.href},{key:"UserAgent",value:navigator.userAgent}]};i.tokenLogin(n,t)}}}),define("QRCodeModel",["baseModel","basebizUtilDomain"],function(e,t){return{getQRCode:function(t,n){var i={};i.Data={context:{},accountHead:{accessCode:t.accessCode,sceneCode:t.strategyCode}};e.sendgatewaydata(CUserSDK.ApiUrlConfig.getQRCodeUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},checkQRCode:function(t,n){var i={};i.Data={qRCode:t.qrCode,context:{},accountHead:{accessCode:t.accessCode,sceneCode:t.strategyCode}};e.sendgatewaydata(CUserSDK.ApiUrlConfig.checkQRCodeUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})},getNewQRCode:function(t,n){var i;i={context:{},accountHead:{accessCode:t.accessCode,sceneCode:t.sceneCode}};var o=JSON.stringify(i),r={};r.data=o;e.senddata(CUserSDK.ApiUrlConfig.getNewQRCodeUrl,r,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)},!0)},checkNewQRCode:function(t,n){e.senddata(CUserSDK.ApiUrlConfig.checkNewQRCodeUrl,{},function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)},!0)},updateQRCode:function(t,n){var i={};i.Data={qRCode:t.qrCode,updateMode:t.updateMode,accountHead:{accessCode:t.accessCode,sceneCode:t.sceneCode}};e.sendgatewaydata(CUserSDK.ApiUrlConfig.updateQRCodeUrl,i,!0,function(e){n&&n(e)},function(e){n&&n(CUserSDK.messageConfig.gatewayRequestErrorMsg)})}}}),define("QrCodeUi",["CommonUI","AccountUtilSecurity","basebizUtilDom","QRCodeBiz","userLoginBiz","basebizUtilDomain"],function(e,t,n,i,o,r){var s,a,c,d,l,u,g,f="",m=!1;return{show:function(){(f=this).initDom(),jQuery("#loginbanner").hide(),jQuery("#logintitle").html("扫码登录"),jQuery("#lg_loginbox").addClass("lg_ercode"),jQuery("#downloadApp").attr("href",CUserSDK.loginUrlConfig.downloadCtripAppUrl),e.hideNologinbanner(),n.ShowView("scanloginview"),c.css("opacity","0"),f.bindEvent(),f.refreshAction()},initDom:function(){s=jQuery("#qrcode_img"),a=jQuery("#qrcode_main"),c=jQuery("#appScan"),d=jQuery("#qrcode"),l=jQuery("#scansuccess"),u=jQuery("#erCodeExpire"),g=jQuery("#qrcodeError")},bindEvent:function(){jQuery("#rescan").click(function(){f.refreshAction()}),jQuery("#refresh").click(function(){f.refreshAction()}),f.qrCodeHoverFn()},hide:function(){jQuery("#erCodeBox").css("display","none")},qrCodeHoverFn:function(){a.mouseenter(function(e){s.stop(!0).animate({left:"0px"},"fast","linear",function(){c.css("opacity","1")})}),a.mouseleave(function(e){c.css("opacity","0"),s.stop(!0).animate({left:"80px"},"fast","linear")})},checkQrCodeStatus:function(){i.checkQrCodeStatus({},function(e){f.checkQrCodeStatusCallback(e)})},checkQrCodeStatusCallback:function(t){if(t&&0==t.returnCode||500==t.returnCode)switch(t.status){case"new":break;case"scanned":d.css("display","none"),l.css("display","");break;case"confirmed":t&&0==t.returncode?e.goBack():(u.css("display",""),g.html="登录失败");break;case"canceled":case"expired":a.unbind("mouseenter"),a.unbind("mouseleave"),u.css("display",""),g.html="二维码已失效"}},refreshAction:function(){u.css("display","none"),f.generateQrCode()},generateQrCode:function(){i.getNewQRCode({accessCode:"GCA8N94B3YOBTPQ8",sceneCode:"9E7B0440C2FF41D1"},function(e){if(m&&(f.qrCodeHoverFn(),m=!1),!1,e&&0==e.returnCode){e.qRCode;var t=e.imgUrl;s.attr("src",t),d.css("display",""),l.css("display","none"),f.checkQrCodeStatus()}})}}});