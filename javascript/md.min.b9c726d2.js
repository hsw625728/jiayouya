!function(){!function(e){var t,n,i=[],r=Math.floor(1e3/60),a=!1;function t(){i.length?(a=!0,n()):a=!1}function o(e){try{for(;i.length&&e.timeRemaining()>0;)i.shift()()}catch(n){throw n}finally{t()}}function s(){try{for(var e=Date.now();i.length&&Date.now()-e<r;)i.shift()()}catch(n){throw n}finally{t()}}n=e.requestIdleCallback?function(){e.requestIdleCallback(o)}:e.requestAnimationFrame?function(){e.requestAnimationFrame(s)}:function(){setTimeout(s,0)},e.idleRunner=function(e){i.push(e),a||t()}}(window),window.CHLOROFP_STATUS="start";var e,t,n,i,r,a,o,s,u=location.protocol+"//cdid.c-ctrip.com/chloro-device/v2/d",d=!1,l=null,h=null,c=null,g=!1,f="_RGUID",p=location.protocol+"//"+location.host,m=function(e){window.console&&console.log(e)},v={WEBGL_EXTENSIONS:["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","MOZ_EXT_texture_filter_anisotropic","MOZ_WEBGL_compressed_texture_atc","MOZ_WEBGL_compressed_texture_s3tc","MOZ_WEBGL_depth_texture","MOZ_WEBGL_lose_context","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_s3tc","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_depth_texture","WEBGL_draw_buffers","WEBGL_lose_context","WEBKIT_EXT_texture_filter_anisotropic","WEBKIT_WEBGL_compressed_texture_atc","WEBKIT_WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_depth_texture","WEBKIT_WEBGL_lose_context"],WEBGL_fragmentShaderFloatIntPrecision:["highp/highp","highp/lowp","mediump/highp","mediump/lowp","not available"],NAVIGATOR_doNotTrack:["do not track","enable","unspecified"],NAVIGATOR_language:["af","af-za","ar","ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ye","az","az-az-cyrl","az-az-latn","be","be-by","bg","bg-bg","bs-ba","ca","ca-es","cs","cs-cz","cy","cy-gb","da","da-dk","de","de-at","de-ch","de-de","de-li","de-lu","dv","dv-mv","el","el-gr","en","en-au","en-bz","en-ca","en-cb","en-gb","en-ie","en-jm","en-nz","en-ph","en-tt","en-us","en-za","en-zw","eo","es","es-ar","es-bo","es-cl","es-co","es-cr","es-do","es-ec","es-es","es-gt","es-hn","es-mx","es-ni","es-pa","es-pe","es-pr","es-py","es-sv","es-uy","es-ve","et","et-ee","eu","eu-es","fa","fa-ir","fi","fi-fi","fo","fo-fo","fr","fr-be","fr-ca","fr-ch","fr-fr","fr-lu","fr-mc","gl","gl-es","gu","gu-in","he","he-il","hi","hi-in","hr","hr-ba","hr-hr","hu","hu-hu","hy","hy-am","id","id-id","is","is-is","it","it-ch","it-it","ja","ja-jp","ka","ka-ge","kk","kk-kz","kn","kn-in","ko","ko-kr","kok","kok-in","ky","ky-kg","lt","lt-lt","lv","lv-lv","mi","mi-nz","mk","mk-mk","mn","mn-mn","mr","mr-in","ms","ms-bn","ms-my","mt","mt-mt","nb","nb-no","nl","nl-be","nl-nl","nn-no","ns","ns-za","pa","pa-in","pl","pl-pl","pt","pt-br","pt-pt","qu","qu-bo","qu-ec","qu-pe","ro","ro-ro","ru","ru-ru","sa","sa-in","se","se-fi","se-no","se-se","sk","sk-sk","sl","sl-si","sq","sq-al","sr-ba","sr-sp","sv","sv-fi","sv-se","sw","sw-ke","syr","syr-sy","ta","ta-in","te","te-in","th","th-th","tl","tl-ph","tn","tn-za","tr","tr-tr","ts","tt","tt-ru","uk","uk-ua","ur","ur-pk","uz","uz-uz","vi","vi-vn","xh","xh-za","zh","zh-cn","zh-hk","zh-mo","zh-sg","zh-tw","zu","zu-za"],BASIC_os:["android","ios","linux","mac","other","windows","windows phone"],BASIC_DeviceType:["desktop","mobiledevice"],WEBGL_contextName_webgl:"webgl",WEBGL_contextName_experimental:"experimental-webgl",UNKOWN:"unkown",UNKOWN_IX:255,UNKOWN_IX2:15,CPUNUM_LIST:[1,2,4,8,16,32,64,128],BOOLEAN_ENUM:[!0,!1]},_=function(e){if(!e)return!1;if("object"!=typeof e)return!0;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1},S=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],y="undefined"==typeof JSON||"undefined"==typeof JSON.stringify?function(e){var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,i,r=[],a=e&&e.constructor==Array;for(n in e)t=typeof(i=e[n]),i!==undefined&&"--"!==i&&("string"==t?i='"'+i+'"':"object"==t&&null!==i&&(i=y(i)),r.push((a?"":'"'+n+'":')+String(i)));return(a?"[":"{")+String(r)+(a?"]":"}")}:JSON.stringify,w=function(e){var t=function(e){for(var t=e.length,n="",i=0;i<t;i++)n+=S[(240&e[i])>>>4],n+=S[15&e[i]];return n}((new function(){this.version=7,this.performanceKeyList=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],this.stringify="undefined"==typeof JSON||"undefined"==typeof JSON.stringify?function(e){var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,i,r=[],a=e&&e.constructor==Array;for(n in e)i=e[n],t=typeof i,i!==undefined&&"--"!==i&&("string"==t?i='"'+i+'"':"object"==t&&null!==i&&(i=this.stringify(i)),r.push((a?"":'"'+n+'":')+String(i)));return(a?"[":"{")+String(r)+(a?"]":"}")}:JSON.stringify,this.binarySearch=function(e,t,n,i){for(var r=t,a=n-1;r<=a;){var o=r+a>>>1,s=e[o]==i?0:e[o]>i?1:-1;if(s<0)r=o+1;else{if(!(s>0))return o;a=o-1}}return-(r+1)},this.toBytes=function(e){if(undefined==e)return[];var t=[];e+="";for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):t.push(239,191,189)}return t},this.x64Xor=function(e,t){return[e[0]^t[0],e[1]^t[1]]},this.ipV4StringToInteger=function(e){if(undefined==e)return 0;for(var t=e.split("."),n=0,i=0;i<4;i++){var r=Number(t[i]);n=(n<<8)+r}return n},this.serializeBooleanSegment=function(e,t){var n=e.basic,i=e.header,r=e.navigator,a=e.webGL,o=e.webRtc,s=e.battery,u=e.browserType,d=e.flash,l=e.canvasFp,h=e.other;t.put(this.serializeInByte([!!n&&n.localStorage,!!n&&n.sessionStorage,!!i&&i.Connection,!!r&&r.cookieEnabled,!!a&&a.isSupported,!!a&&a.isEnabled,!!o&&o.shouldBeSupported,!!o&&o.deviceEnum])),t.put(this.serializeInByte([!!o&&o.AudioContext,!!o&&o.hasMic,!!o&&o.hasWebcam,!!o&&o.hasSpeaker,!!o&&o.IceSupport,!!s&&s.charging,!!u&&u.isWeixin,!!u&&u.isQQ])),t.put(this.serializeInByte([!!u&&u.isOpera,!!u&&u.isFirefox,!!u&&u.isSafari,!!u&&u.isIE,!!u&&u.isEdge,!!u&&u.isChrome,!!u&&u.isBlink,!!u&&u.isWebKit]));var c=this.serializeInByte([!!h&&h.adblock,!!h&&h.hasLiedLanguages,!!h&&h.hasLiedResolution,!!h&&h.hasLiedOs]);c=this.serializeEnumValue(this.getValue(a,"fragmentShaderFloatIntPrecision",v.WEBGL_fragmentShaderFloatIntPrecision[4]),c,14,1,v.WEBGL_fragmentShaderFloatIntPrecision,4),t.put(c),t.put(this.serializeInByte([!!d&&d.hasPrinting,!!d&&d.hasScreenBroadcast,!!d&&d.hasScreenPlayback,!!d&&d.hasStreamingVideo,!!d&&d.hasStreamingAudio,!!d&&d.hasVideoEncoder,!!d&&d.isDebugger,!!d&&d.hasEmbeddedVideo])),t.put(this.serializeInByte([!!d&&d.localFileReadDisable,!!d&&d.hasIME,!!d&&d.hasAudio,!!d&&d.hasTLS,!!d&&d.avHardwareDisable,!!d&&d.hasAccessibility,!!d&&d.hasAudioEncoder,!!d&&d.hasMP3])),c=this.serializeInByte([!!d&&d.supports32BitProcesses,!!d&&d.supports64BitProcesses,!!d&&d.lsoStorageTest,!!l&&l.canvasWinding]);var g=undefined==n?v.BASIC_DeviceType[0]:n.DeviceType;c=this.serializeEnumValue(undefined==g?v.BASIC_DeviceType[0]:g,c,8,3,v.BASIC_DeviceType,0),g=undefined==n?v.BASIC_os[4]:n.os,c=this.serializeEnumValue(undefined==g?v.BASIC_os[4]:g,c,7,0,v.BASIC_os,4),t.put(c)},this.serializeInByte=function(e){for(var t=0,n=0;n<e.length;n++)e[n]&&(t|=1<<7-n);return t},this.serializeEnumValue=function(e,t,n,i,r,a){var o=a;return undefined!=r&&(o=this.binarySearch(r,0,r.length,e.toLowerCase()))<0&&(o=a),t&~n|o<<i&n},this.serializeTouchPlayerCpuArch=function(e,t){var n=0;n=this.serializeEnumValue(this.getValue(e,"touchscreenType",undefined),n,192,6,undefined,1),n=this.serializeEnumValue(this.getValue(e,"playerType",undefined),n,56,3,undefined,3),n=this.serializeEnumValue(this.getValue(e,"cpuArchitecture",undefined),n,7,0,undefined,1),t.put(n)},this.getValue=function(e,t,n,i){var r=undefined==e?n:undefined==e[t]?n:e[t];if(undefined!=i){"string"==typeof r&&r.constructor==String&&(r=r.toLowerCase());var a=this.binarySearch(i,0,i.length,r);if(a<0)return n}return r},this.serializeHistoryLen=function(e,t){var n=this.getValue(e,"historyLength",0);n>255?t.put(255):t.put(n)},this.serializeNumCpuHardwareFragment=function(e,t,n){var i=0;i=this.serializeNumCpuOrHardwareConcurrency(this.getValue(e,"numCPU",1),i,224,5),i=this.serializeNumCpuOrHardwareConcurrency(this.getValue(e,"hardwareConcurrency",1),i,28,2),n.put(i)},this.serializeNumCpuOrHardwareConcurrency=function(e,t,n,i){var r;switch(e){case 2:r=1;break;case 4:r=2;break;case 8:r=3;break;case 16:r=4;break;case 32:r=5;break;case 64:r=6;break;case 128:r=7;break;default:r=0}return t&~n|r<<i&n},this.serializeEnumValOneByte=function(e,t,n){var i=this.binarySearch(t,0,t.length,e.toLowerCase());i<0?n.put(v.UNKOWN_IX):n.put(i)},this.serializeTrackColorLevel=function(e,t,n,i){var r=0;r=this.serializeEnumValue(this.getValue(e,"doNotTrack",v.NAVIGATOR_doNotTrack[2]),r,192,6,v.NAVIGATOR_doNotTrack,2),r=this.serializeEnumValue(this.getValue(t,"screenColor",undefined),r,48,4,undefined,3),r=this.serializeBatteryLevel(this.getValue(n,"level"),r,15,0),i.put(r)},this.serializeBatteryLevel=function(e,t,n,i){return e>1?(m("the value must less than or equal 1."),t):t&~n|10*e<<i&n},this.serializeBatteryDischarg=function(e,t){var n,i=undefined==e?undefined:e.discharging;n=null==i?0:"Infinity"==i?-32768:i,t.putShort(n)},this.serializeCanvasData=function(e,t){if(undefined!=e){t.put(e.length%2!=0?e.length/2+1:e.length/2);for(var n=0;n<e.length;n++)n%2==1&&t.put(parseInt(e.substring(n-1,n+1),16));e.length%2!=0&&t.put(parseInt(e.substring(e.length-1),16))}else t.put(0)},this.serializeGeoAndISP=function(e,t){var n=this.getValue(e,"ClientTimezoneOffset",-1);-1==n?t.put(-1):t.put(n/15),t.putFloat(this.getValue(e,"latitude",0)),t.putFloat(this.getValue(e,"longitude",0))},this.serializeScreenData=function(e,t){this.serializeWidthAndHeight(t,this.getValue(e,"width",0),this.getValue(e,"height",0)),this.serializeWidthAndHeight(t,this.getValue(e,"availWidth",0),this.getValue(e,"availHeight",0)),this.serializeWidthAndHeight(t,this.getValue(e,"realWidth",0),this.getValue(e,"realHeight",0)),t.put(this.getValue(e,"colorDepth",0)),t.put(this.getValue(e,"pixelDepth",0)),t.put(this.getValue(e,"devicePixelRatio",0))},this.serializeWidthAndHeight=function(e,t,n){e.putShort(t|(15&n)<<12),e.put(n>>>4)},this.serializeWebGLFixedSegment=function(e,t){var n=this.getValue(e,"aliasedLineWidthRange",undefined),i=this.getValue(e,"aliasedPointSizeRange",undefined),r=this.getValue(e,"maxViewportDimensions",undefined);t.put(this.getValue(e,"maxColorBuffers",0)),t.put(this.getValue(e,"redBits",0)),t.put(this.getValue(e,"greenBits",0)),t.put(this.getValue(e,"blueBits",0)),t.put(this.getValue(e,"alphaBits",0)),t.putShort(this.getValue(e,"maxRenderBufferSize",0)),t.put(this.getValue(e,"maxCombinedTextureImageUnits",0)),t.putShort(this.getValue(e,"maxCubeMapTextureSize",0)),t.putShort(this.getValue(e,"maxFragmentUniformVectors",0)),t.put(this.getValue(e,"maxTextureImageUnits",0)),t.putShort(this.getValue(e,"maxTextureSize",0)),t.put(this.getValue(e,"maxVaryingVectors",0,0)),t.put(this.getValue(e,"maxVertexAttributes",0)),t.putShort(this.getValue(e,"maxVertexUniformVectors",0)),t.put(this.getValue(e,"maxAnisotropy",0)),t.put(this.getValue(e,"vertexShaderBestPrecision",0)),t.put(this.getValue(e,"maxVertexTextureImageUnits",0)),t.put(this.getValue(e,"fragmentShaderBestPrecision",0)),t.put(this.getValue(e,"depthBits",0)),t.put(this.getValue(e,"stencilBits",0)),this.serializeRange(n,t,!1),this.serializeRange(i,t,!1),this.serializeRange(r,t,!0)},this.serializeRange=function(e,t,n){if(undefined==e)return n?t.putShort(0):t.put(0),void t.putShort(0);var i=e.substring(1,e.length-1).split(","),r=parseInt(i[0].trim()),a=parseInt(i[1].trim());n?t.putShort(r):t.put(r),t.putShort(a)},this.serializeFlashFixedSegment=function(e,t){t.put(this.getValue(e,"pixelAspectRatio",0)),t.put(this.getValue(e,"screenDPI",0)),t.putShort(this.getValue(e,"screenResolutionX",0)),t.putShort(this.getValue(e,"screenResolutionY",0)),this.serializeEnumValOneByte(this.getValue(e,"language","zh-cn"),v.NAVIGATOR_language,t)},this.serializeUserAgent=function(e,t){var n=this.getValue(e,"useragent",undefined);if(undefined==n)t.putShort(0);else{var i=this.toBytes(n);t.putShort(i.length),t.putBytes(i)}},this.serializePlugins=function(e,t){t.put(0),t.put(0)},this.serializeMimeTypeOrFonts=function(e,t,n,i){i?(t.putShort(0),t.putShort(0)):(t.put(0),t.put(0))},this.serializeContextName=function(e,t){if(undefined!=e&&0!=e.length){var n,i=0,r=0,a=t.position();t.put(r);for(var o=0;o<e.length;o++)if((n=e[o])==v.WEBGL_contextName_experimental)r|=2;else if(n==v.WEBGL_contextName_webgl)r|=4;else{i++;var s=this.toBytes(n);t.put(s.length),t.putBytes(s)}i>31?m("UnsupportedOperationException:elements size could not greater than 31"):(i>0&&(r=1|r|i<<3),t.putAtIndex(a,r))}else t.put(0)},this.serializeWebGLExtensions=function(e,t){if(undefined!=e&&0!=e.length){var n,i;t.put(e.length);for(var r=0;r<e.length;r++)if(n=e[r],(i=this.binarySearch(v.WEBGL_EXTENSIONS,0,v.WEBGL_EXTENSIONS.length,n))<0&&undefined!=n){var a=this.toBytes(n);t.put(-a.length),t.putBytes(a)}else t.put(i)}else t.put(0)},this.serializeIp=function(e,t){if(undefined!=e&&0!=e.length){var n=t.position();t.put(0);for(var i=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,r=0,a=0;a<e.length;a++)i.exec(e[a])&&(t.putInt(this.ipV4StringToInteger(e[a])),r++);t.putAtIndex(n,r)}else t.put(0)},this.serializeVisTime=function(e,t){if(undefined!=e&&0!=e.length){var n=this.timeSeriesToBytes(e);t.put(n.length),t.putBytes(n)}else t.put(0)},this.longToBytes2=function(e){undefined==e&&(e=0);for(var t=parseInt(e).toString(16),n=[0,0,0,0,0,0,0,0],i=t.length,r=7;i>0;i-=2,r--)n[r]=parseInt(t.substring(i-2,i),16);return n},this.longToInt=function(e){undefined==e&&(e=0);for(var t=parseInt(e).toString(16),n=[0,0],i=t.length,r=1;i>0;i-=8,r--)n[r]=parseInt(t.substring(i-8,i),16);return n},this.longBitLen=function(e){var t=e[0].toString(2).length,n=0!=t?32:e[1].toString(2).length;return t+n},this.timeSeriesToBytes=function(e){e.sort();var t=e[e.length-1],n=this.longToInt(t),i=this.longToInt(e[0]),r=this.x64Xor(n,i),a=parseInt((64-this.longBitLen(r))/8),o=e.length,s=a+1+(8-a)*o,u=new Array(s);u[0]=255&o;for(var d=this.longToBytes2(t),l=1;l<=a;l++)u[l]=d[l-1];for(var h=8-a,c=0;c<o;c++)for(var g=this.longToBytes2(e[c]),f=1;f<=h;f++)u[a+c*h+f]=g[a+f-1];return u},this.serializePerformanceTimeing=function(e,t){if(undefined!=e&&0!=e.length){for(var n=new Array(this.performanceKeyList.length-1),i=0,r=!0,a=e[this.performanceKeyList[0]],o=1;o<this.performanceKeyList.length;o++){var s=e[this.performanceKeyList[o]];if(s==undefined||0==s)n[i++]=undefined;else{var u=s-a;n[i++]=u,r=!1}}var d=new H;if(a==undefined||r)return t.put(1),void t.put(-1);d.putBytes(this.longToBytes2(a));var l=[0,0,0,0,0];d.putBytes(l);for(var h=0;h<n.length;h++){var c=parseInt(h/4),g=parseInt(h%4*2),f=0;f=n[h]==undefined?0:n[h]<=256?1:n[h]<=65535?2:3,l[c]=l[c]|f<<g,1==f?d.put(255&n[h]):2==f?(d.put(255&n[h]),d.put(n[h]>>8&255)):3==f&&(d.put(255&n[h]),d.put(n[h]>>8&255),d.put(n[h]>>16&255))}for(var h=0;h<l.length;h++)d.putAtIndex(8+h,l[h]);t.put(d.position()),t.putBytes(d.getBytes())}else t.put(0)},this.serializeOther=function(e,t){var n=e.basic,i=e.navigator,r=e.webGL,a=e.webRtc,o=e.flash;if(this.serializeStringWithByteLength(this.getValue(n,"platform",undefined),t),this.serializeStringWithByteLength(this.getValue(n,"architecture",undefined),t),this.serializeStringWithByteLength(this.getValue(n,"Browser",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"vendor",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"appVersion",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"appName",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"appCodeName",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"cpuClass",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"platform",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"product",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"productSub",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"vendorSub",undefined),t),this.serializeStringWithByteLength(this.getValue(i,"buildID",undefined),t),null!=r&&undefined!=r&&(this.serializeStringWithByteLength(this.getValue(r,"WebGLVendor",undefined),t),this.serializeStringWithByteLength(this.getValue(r,"WebGLRenderer",undefined),t),this.serializeStringWithByteLength(this.getValue(r,"unMaskedVendor",undefined),t),this.serializeStringWithByteLength(this.getValue(r,"unMaskedRenderer",undefined),t),this.serializeStringWithByteLength(this.getValue(r,"glVersion",undefined),t),this.serializeStringWithByteLength(this.getValue(r,"shadingLanguageVersion",undefined),t)),null!=a&&undefined!=a){var s=this.getValue(a,"mediaSources",undefined),u=undefined;if(undefined!=s){u=[];for(var d=0;d<s.length;d++)u[d]=this.stringify(s[d])}this.serializeStringList(u,t),t.put(this.getValue(a,"deviceCount",0)),this.serializeStringList(this.getValue(a,"IceCandidates",undefined),t)}null!=o&&undefined!=o&&(this.serializeStringWithByteLength(this.getValue(o,"version",undefined),t),this.serializeStringWithByteLength(this.getValue(o,"guid",undefined),t),this.serializeStringWithByteLength(this.getValue(o,"manufacturer",undefined),t),this.serializeStringWithByteLength(this.getValue(o,"os",undefined),t),this.serializeStringWithByteLength(this.getValue(o,"maxLevelIDC",undefined),t),this.serializeStringWithByteLength(this.getValue(o,"rsg",undefined),t),this.serializeStringWithByteLength(this.getValue(o,"rdg",undefined),t))},this.serializeStringList=function(e,t){if(undefined!=e&&0!=e.length){t.put(e.length);for(var n=0;n<e.length;n++){var i=this.toBytes(e[n]);t.put(i.length),t.putBytes(i)}}else t.put(0)},this.serializeStringWithByteLength=function(e,t){if(undefined!=e){e.length>255&&(e=e.substring(0,255));var n=this.toBytes(e);n.length>255&&n.splice(255,n.length-255),t.put(n.length),t.putBytes(n)}else t.put(0)},this.browserFp=function(e){var t=e.screenData,n=e.canvasFp,i=e.navigator,r=e.basic,a=e.other,o=e.geoAndISP,s={},u=function(e,t,n){n!=undefined&&(e[t]=n)};u(s,"width",this.getValue(t,"width",0)),u(s,"height",this.getValue(t,"height",0)),u(s,"canvas",this.getValue(n,"canvasData",undefined)),u(s,"userAgent",this.getValue(i,"useragent",undefined)),u(s,"timeZone",this.getValue(o,"ClientTimezoneOffset",-1)),u(s,"platform",this.getValue(r,"platform",undefined)),u(s,"os",this.getValue(r,"os",v.BASIC_os[4],v.BASIC_os)),u(s,"numCpu",this.getValue(i,"numCPU",1,v.CPUNUM_LIST)),u(s,"hardwareConcurrency",this.getValue(i,"hardwareConcurrency",1,v.CPUNUM_LIST)),u(s,"language",this.getValue(i,"language","zh-cn",v.NAVIGATOR_language)),u(s,"cpuClass",this.getValue(i,"cpuClass",undefined)),u(s,"doNotTrack",this.getValue(i,"doNotTrack",v.NAVIGATOR_doNotTrack[2],v.NAVIGATOR_doNotTrack)),u(s,"localStorage",this.getValue(r,"localStorage",!1,v.BOOLEAN_ENUM)),u(s,"sessionStorage",this.getValue(r,"sessionStorage",!1,v.BOOLEAN_ENUM)),u(s,"cookieEnabled",this.getValue(i,"cookieEnabled",!1,v.BOOLEAN_ENUM)),u(s,"hasIME",!1),u(s,"hasMP3",!1),u(s,"hasTLS",!1),u(s,"hasPrinting",!1),u(s,"hasStreamingAudio",!1),u(s,"hasStreamingVideo",!1),u(s,"adblock",this.getValue(a,"adblock",!1,v.BOOLEAN_ENUM));var d=this.stringify(s),l=x(d,0);return l},this.encodeStatic=function(e){var t=e.header,n=e.navigator,i=e.screenData,r=e.sysfonts,a=e.webGL,o=e.webRtc,s=e.battery,u=e.performanceTiming,d=e.visTime,l=e.flash,h=e.canvasFp,c=e.geoAndISP,g=new H;g.put(this.version);var f=1;null!=h&&undefined!=h&&(f|=32768),null!=l&&undefined!=l&&(f|=16384),null!=a&&undefined!=a&&(f|=8192),null!=o&&undefined!=o&&(f|=4096),null!=c&&undefined!=c&&(f|=2048),null!=r&&undefined!=r&&(f|=1024),g.putShort(f),g.putBytes([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.serializeBooleanSegment(e,g),this.serializeTouchPlayerCpuArch(l,g),this.serializeHistoryLen(t,g),this.serializeNumCpuHardwareFragment(n,a,g),this.serializeEnumValOneByte(this.getValue(n,"language","zh-cn"),v.NAVIGATOR_language,g),this.serializeTrackColorLevel(n,l,s,g),this.serializeBatteryDischarg(s,g),null!=h&&undefined!=h&&this.serializeCanvasData(h.canvasData,g),null!=c&&undefined!=c&&this.serializeGeoAndISP(c,g),this.serializeScreenData(i,g),null!=a&&undefined!=a&&this.serializeWebGLFixedSegment(a,g),null!=l&&undefined!=l&&this.serializeFlashFixedSegment(l,g),this.serializeUserAgent(n,g),g.putShortAtIndex(3,g.position());var p=this.getValue(n,"plugins",undefined);this.serializePlugins(p,g),g.putShortAtIndex(5,g.position()-g.getShort(3));var m=g.position();this.serializeMimeTypeOrFonts(undefined,g,undefined,!1),g.putShortAtIndex(7,g.position()-m),m=g.position(),null!=r&&undefined!=r&&this.serializeMimeTypeOrFonts(r,g,undefined,!0),g.putIntAtIndex(9,g.position()-m),m=g.position(),null!=l&&undefined!=l&&this.serializeMimeTypeOrFonts(l.fontNames,g,undefined,!0),g.putIntAtIndex(13,g.position()-m),m=g.position(),null!=a&&undefined!=a&&(this.serializeContextName(a.contextNames,g),g.putAtIndex(17,g.position()-m),m=g.position(),this.serializeWebGLExtensions(a.extensions,g)),g.putAtIndex(18,g.position()-m),m=g.position(),null!=o&&undefined!=o&&this.serializeIp(o.IPADDR,g),g.putAtIndex(19,g.position()-m),m=g.position(),this.serializeOther(e,g),g.putShortAtIndex(20,g.position()-m),m=g.position(),this.serializeVisTime(d,g),g.putAtIndex(22,g.position()-m),this.serializePerformanceTimeing(u,g);var _=this.browserFp(e);return this.serializeCanvasData(_,g),g.putInt(g.checkSum()),g.getBytes()}}).encodeStatic(B));return C.compressToEncodedURIComponent(t)},b=function(){var e=decodeURIComponent,t=encodeURIComponent,n={};function i(e){return"string"==typeof e}function r(e){return i(e)&&""!==e}function a(e){if(!r(e))throw new TypeError("Cookie name must be a non-empty string")}function o(e){return e}return n.get=function(t,n){a(t),n="function"==typeof n?{converter:n}:n||{};var r=function(t,n){var r={};if(i(t)&&t.length>0)for(var a,s,u,d=n?e:o,l=t.split(/;\s/g),h=0,c=l.length;h<c;h++){if((u=l[h].match(/([^=]+)=/i))instanceof Array)try{a=e(u[1]),s=d(l[h].substring(u[1].length+1))}catch(g){}else a=e(l[h]),s="";a&&(r[a]=s)}return r}(document.cookie,!n.raw);return(n.converter||o)(r[t])},n.set=function(e,n,i){a(e);var o=(i=i||{}).expires,s=i.domain,u=i.path;i.raw||(n=t(String(n)));var d=e+"="+n,l=o;return"number"==typeof l&&(l=new Date).setDate(l.getDate()+o),l instanceof Date&&(d+="; expires="+l.toUTCString()),r(s)&&(d+="; domain="+s),r(u)&&(d+="; path="+u),i.secure&&(d+="; secure"),document.cookie=d,d},n.remove=function(e,t){return(t=t||{}).expires=new Date(0),this.set(e,"",t)},n}(),x=(n=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},i=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},r=function(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},a=function(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},o=function(e,t){return[e[0]^t[0],e[1]^t[1]]},s=function(e){return e=o(e,[0,e[0]>>>1]),e=i(e,[4283543511,3981806797]),e=o(e,[0,e[0]>>>1]),e=i(e,[3301882366,444984403]),e=o(e,[0,e[0]>>>1])},function(e,t){e=e||"",t=t||0;for(var u=e.length%16,d=e.length-u,l=[0,t],h=[0,t],c=[0,0],g=[0,0],f=[2277735313,289559509],p=[1291169091,658871167],m=0;m<d;m+=16)c=[255&e.charCodeAt(m+4)|(255&e.charCodeAt(m+5))<<8|(255&e.charCodeAt(m+6))<<16|(255&e.charCodeAt(m+7))<<24,255&e.charCodeAt(m)|(255&e.charCodeAt(m+1))<<8|(255&e.charCodeAt(m+2))<<16|(255&e.charCodeAt(m+3))<<24],g=[255&e.charCodeAt(m+12)|(255&e.charCodeAt(m+13))<<8|(255&e.charCodeAt(m+14))<<16|(255&e.charCodeAt(m+15))<<24,255&e.charCodeAt(m+8)|(255&e.charCodeAt(m+9))<<8|(255&e.charCodeAt(m+10))<<16|(255&e.charCodeAt(m+11))<<24],c=i(c,f),c=r(c,31),c=i(c,p),l=o(l,c),l=r(l,27),l=n(l,h),l=n(i(l,[0,5]),[0,1390208809]),g=i(g,p),g=r(g,33),g=i(g,f),h=o(h,g),h=r(h,31),h=n(h,l),h=n(i(h,[0,5]),[0,944331445]);switch(c=[0,0],g=[0,0],u){case 15:g=o(g,a([0,e.charCodeAt(m+14)],48));case 14:g=o(g,a([0,e.charCodeAt(m+13)],40));case 13:g=o(g,a([0,e.charCodeAt(m+12)],32));case 12:g=o(g,a([0,e.charCodeAt(m+11)],24));case 11:g=o(g,a([0,e.charCodeAt(m+10)],16));case 10:g=o(g,a([0,e.charCodeAt(m+9)],8));case 9:g=o(g,[0,e.charCodeAt(m+8)]),g=i(g,p),g=r(g,33),g=i(g,f),h=o(h,g);case 8:c=o(c,a([0,e.charCodeAt(m+7)],56));case 7:c=o(c,a([0,e.charCodeAt(m+6)],48));case 6:c=o(c,a([0,e.charCodeAt(m+5)],40));case 5:c=o(c,a([0,e.charCodeAt(m+4)],32));case 4:c=o(c,a([0,e.charCodeAt(m+3)],24));case 3:c=o(c,a([0,e.charCodeAt(m+2)],16));case 2:c=o(c,a([0,e.charCodeAt(m+1)],8));case 1:c=o(c,[0,e.charCodeAt(m)]),c=i(c,f),c=r(c,31),c=i(c,p),l=o(l,c)}return l=o(l,[0,e.length]),h=o(h,[0,e.length]),l=n(l,h),h=n(h,l),l=s(l),h=s(h),l=n(l,h),h=n(h,l),("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)+("00000000"+(h[0]>>>0).toString(16)).slice(-8)+("00000000"+(h[1]>>>0).toString(16)).slice(-8)}),T=function(){this._callbacks={},this._fired={}};T.prototype.bind=function(e,t,n){e.attachEvent?(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n])):e.addEventListener(t,n,!1)},T.prototype.bindOnce=function(e,t,n){var i=this,r=function(){n.apply(this,arguments),i.unbind(e,t,r)};return this.bind(e,t,r),this},T.prototype.unbind=function(e,t,n){e.detachEvent?(e.detachEvent("on"+t,e[t+n]),e[t+n]=null):e.removeEventListener(t,n,!1)},T.prototype.addListener=function(e,t){return this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(t),this},T.prototype.once=function(e,t){var n=this,i=function(){t.apply(n,arguments),n.removeListener(e,i)};return n.addListener(e,i),this},T.prototype.removeListener=function(e,t){var n,i,r=this._callbacks;if(!e)return this;if(t){if(!(n=r[e]))return this;i=n.length;for(var a=0;a<i;a++)if(t===n[a]){n.splice(a,1);break}}else r[e]=[]},T.prototype.fire=function(e,t){var n,i,r,a=this._callbacks;this._fired;if(!a[e])return this;if(n=a[e])for(i=0,r=n.length;i<r;i++)n[i].apply(this,Array.prototype.slice.call(arguments,1))},T.prototype._when=function(){var e,t,n,i,r,a,o,s;if(o=arguments.length,e=Array.prototype.slice.apply(arguments,[0,o-2]),t=arguments[o-2],n=arguments[o-1],"function"!=typeof t)return this;a=this,r=e.length;s=n?"once":"addListener";var u=function(n){a[s](n,function(i){a._fired[n]=a._fired[n]||{},a._fired[n].data=i,function(){for(var n=[],i=!0,o=0;o<r;o++){if(!a._fired.hasOwnProperty(e[o])||!a._fired[e[o]].hasOwnProperty("data")){i=!1;break}var s=a._fired[e[o]].data;n.push(s)}i&&t.apply(null,[n])}()})};for(i=0;i<r;i++)u(e[i])},T.prototype.when=function(){var e=Array.prototype.concat.apply([],arguments);return e.push(!1),this._when.apply(this,e),this},T.prototype.whenOnce=function(){var e=Array.prototype.concat.apply([],arguments);return e.push(!0),this._when.apply(this,e),this},T.prototype.after=function(e,t,n){if(0===t)return n.apply(null,[]),this;var i=this,r=[],a=function(o){r.push(o),--t<1&&(i.removeListener(e,a),n.apply(i,[r]))};return i.addListener(e,a),this};var E,A,I,O,C=(E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",A=String.fromCharCode,I={},{compressToEncodedURIComponent:function(e){return null==e?"":function(e,t,n){if(null==e)return"";var i,r,a,o={},s={},u="",d="",l="",h=2,c=3,g=2,f=[],p=0,m=0;for(a=0;a<e.length;a+=1)if(u=e.charAt(a),Object.prototype.hasOwnProperty.call(o,u)||(o[u]=c++,s[u]=!0),d=l+u,Object.prototype.hasOwnProperty.call(o,d))l=d;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(i=0;i<g;i++)p<<=1,m==t-1?(m=0,f.push(n(p)),p=0):m++;for(r=l.charCodeAt(0),i=0;i<8;i++)p=p<<1|1&r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r>>=1}else{for(r=1,i=0;i<g;i++)p=p<<1|r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r=0;for(r=l.charCodeAt(0),i=0;i<16;i++)p=p<<1|1&r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r>>=1}0==--h&&(h=Math.pow(2,g),g++),delete s[l]}else for(r=o[l],i=0;i<g;i++)p=p<<1|1&r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r>>=1;0==--h&&(h=Math.pow(2,g),g++),o[d]=c++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(i=0;i<g;i++)p<<=1,m==t-1?(m=0,f.push(n(p)),p=0):m++;for(r=l.charCodeAt(0),i=0;i<8;i++)p=p<<1|1&r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r>>=1}else{for(r=1,i=0;i<g;i++)p=p<<1|r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r=0;for(r=l.charCodeAt(0),i=0;i<16;i++)p=p<<1|1&r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r>>=1}0==--h&&(h=Math.pow(2,g),g++),delete s[l]}else for(r=o[l],i=0;i<g;i++)p=p<<1|1&r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r>>=1;0==--h&&(h=Math.pow(2,g),g++)}for(r=2,i=0;i<g;i++)p=p<<1|1&r,m==t-1?(m=0,f.push(n(p)),p=0):m++,r>>=1;for(;;){if(p<<=1,m==t-1){f.push(n(p));break}m++}return f.join("")}(e,6,function(e){return E.charAt(e)})},decompressFromEncodedURIComponent:function(e){return e&&null!=e&&""!=e?function(e,t,n){var i,r,a,o,s,u,d,l=[],h=4,c=4,g=3,f="",p=[],m={val:n(0),position:t,index:1};for(i=0;i<3;i+=1)l[i]=i;for(a=0,s=Math.pow(2,2),u=1;u!=s;)o=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),a|=(o>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,s=Math.pow(2,8),u=1;u!=s;)o=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),a|=(o>0?1:0)*u,u<<=1;d=A(a);break;case 1:for(a=0,s=Math.pow(2,16),u=1;u!=s;)o=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),a|=(o>0?1:0)*u,u<<=1;d=A(a);break;case 2:return""}for(l[3]=d,r=d,p.push(d);;){if(m.index>e)return"";for(a=0,s=Math.pow(2,g),u=1;u!=s;)o=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),a|=(o>0?1:0)*u,u<<=1;switch(d=a){case 0:for(a=0,s=Math.pow(2,8),u=1;u!=s;)o=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),a|=(o>0?1:0)*u,u<<=1;l[c++]=A(a),d=c-1,h--;break;case 1:for(a=0,s=Math.pow(2,16),u=1;u!=s;)o=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),a|=(o>0?1:0)*u,u<<=1;l[c++]=A(a),d=c-1,h--;break;case 2:return p.join("")}if(0==h&&(h=Math.pow(2,g),g++),l[d])f=l[d];else{if(d!==c)return null;f=r+r.charAt(0)}p.push(f),l[c++]=r+f.charAt(0),r=f,0==--h&&(h=Math.pow(2,g),g++)}}((e=e.replace(/ /g,"+")).length,32,function(t){return function(e,t){if(!I[e]){I[e]={};for(var n=0;n<e.length;n++)I[e][e.charAt(n)]=n}return I[e][t]}(E,e.charAt(t))}):undefined}}),L=function(){var e,t=window,n=(t.XMLHttpRequest&&"withCredentials"in new t.XMLHttpRequest?e=t.XMLHttpRequest:t.XDomainRequest&&(e=t.XDomainRequest),e),i=["head","get","post","put","delete"],r={};function a(e){this.init(e)}a.prototype.init=function(e){this.xhr=new n,this.method=e.method,this.url=e.url,this.success=e.success,this.error=e.error;try{this.xhr.timeout=2e3,this.xhr.ontimeout=function(e){},!0===e.credentials&&(this.xhr.withCredentials=!0)}catch(i){}var t=e.params?e.params:e.data;return this.headers=e.headers,this.send(t),this},a.prototype.send=function(e){var t=this;return t.success!==undefined&&(t.xhr.onload=function(){t.success.call(this,this.responseText)}),t.error!==undefined&&(t.xhr.error=function(){t.error.call(this,this.responseText)}),t.xhr.open(t.method,t.url,!0),t.xhr.withCredentials=!0,t.headers!==undefined&&t.setHeaders(),e?t.xhr.send(e):t.xhr.send(),t},a.prototype.setHeaders=function(){var e,t=this.headers;try{for(e in t)t.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,t[e])}catch(n){}return this};for(var o=0;o<i.length;o++)!function(){var e=i[o];r[e]=function(t,n){var i={};if(t===undefined)throw new Error("CORS: url must be defined");return"object"==typeof t?i=t:("function"==typeof n&&(i.success=n),i.url=t),i.method=e.toUpperCase(),new a(i).xhr}}();return r}(),B={basic:{},header:{},navigator:{},screenData:{},geoAndISP:{},webGL:{},webRtc:{},battery:{},browserType:{},performanceTiming:{},canvasFp:{},visTime:[],other:{}},R=[],V=[],P=[];!function(e){try{var t={},n=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(window.webkitRTCPeerConnection,!n){var i=document.createElement("iframe");i.style.display="none",i.sandbox="allow-same-origin",i.addEventListener("DOMNodeInserted",function(e){e.stopPropagation()},!1),i.addEventListener("DOMNodeInsertedIntoDocument",function(e){e.stopPropagation()},!1),document.documentElement.appendChild(i);var r=i.contentWindow;n=r.RTCPeerConnection||r.mozRTCPeerConnection||r.webkitRTCPeerConnection,r.webkitRTCPeerConnection}var a=new n({iceServers:[{urls:"stun:stun.services.mozilla.com"}]},{optional:[{RtpDataChannels:!0}]});function o(n){if(n){var i=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{0,4}){5})/.exec(n);if(!(null===i||i.length<1)){var r=i[1];t[r]===undefined&&e(r),t[r]=!0}}}a.onicecandidate=function(e){O=!0,e.candidate&&(o(e.candidate.candidate),e.candidate.candidate&&P.push(e.candidate.candidate))},a.createDataChannel(""),a.createOffer(function(e){a.setLocalDescription(e,function(){},function(){})},function(){}),setTimeout(function(){a&&a.localDescription&&a.localDescription.sdp&&a.localDescription.sdp.split("\n").forEach(function(e){undefined!=e&&0===e.indexOf("a=candidate:")&&o(e)})},100)}catch(s){}}(function(e){V.push(e)});function z(e){try{return window[e]}catch(t){m(t)}return null}var N=function(){for(var e=location.hostname,t=["ctrip.co.kr","ctrip.co.id","ctrip.co.th","ctrip.com.hk","thetrainpal.co.uk"],n=!0,i=0,r=t.length;i<r;i++)if(e.indexOf(t[i])>0){e=t[i],n=!1;break}if(n){var a=e.split(".").reverse();if(a.length>1)if("www"==a[a.length-1]){var o="";for(i=a.length-2;i>=0;i--)o+=a[i]+".";e=o.substring(0,o.length-1)}else e=a[1]+"."+a[0]}return e},k=function(e,t){var n={path:"/",expires:new Date(2098,1,1),domain:N()};b.set(e,t,n),window.CHLOROFP_STATUS="set_cookie_success",e!=f&&"_RSG"!=e&&"_RDG"!=e||(g=!0)};var W=function(){var e,t,n;idleRunner(function(){var e,t,n,i,r;window.CHLOROFP_STATUS="basic",B.basic={platform:navigator.platform.toLowerCase(),os:(i="Other",r=navigator.userAgent.toLowerCase(),r.indexOf("windows phone")>=0?i="Windows Phone":r.indexOf("win")>=0?i="Windows":r.indexOf("android")>=0?i="Android":r.indexOf("linux")>=0?i="Linux":r.indexOf("iphone")>=0||r.indexOf("ipad")>=0?i="iOS":r.indexOf("mac")>=0&&(i="Mac"),i),architecture:navigator.oscpu,DeviceType:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?"mobileDevice":"desktop",Browser:(t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))),localStorage:!!z("localStorage"),sessionStorage:!!z("sessionStorage")}}),idleRunner(function(){window.CHLOROFP_STATUS="header",B.header={Connection:navigator.onLine,historyLength:history.length}}),idleRunner(function(){window.CHLOROFP_STATUS="navigatorData",B.navigator={useragent:navigator.userAgent,language:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage,vendor:window.navigator.vendor,appVersion:window.navigator.appVersion,numCPU:window.navigator.hardwareConcurrency,appName:window.navigator.appName,appCodeName:window.navigator.appCodeName,cookieEnabled:navigator.cookieEnabled,cpuClass:window.navigator.cpuClass,doNotTrack:navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:undefined,platform:navigator.platform,product:window.navigator.product,productSub:window.navigator.productSub,vendorSub:window.navigator.vendorSub,buildID:navigator.buildID}}),idleRunner(function(){window.CHLOROFP_STATUS="screenData",B.screenData={width:screen.width,height:screen.height,availWidth:screen.availWidth,availHeight:screen.availHeight,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,devicePixelRatio:window.devicePixelRatio||1,realWidth:screen.width*(window.devicePixelRatio||1),realHeight:screen.height*(window.devicePixelRatio||1)}}),idleRunner(function(){window.CHLOROFP_STATUS="geoAndISP",B.geoAndISP={latitude:void 0,longitude:void 0,ClientTimezoneOffset:(new Date).getTimezoneOffset()}}),idleRunner(function(){window.CHLOROFP_STATUS="webRtc",B.webRtc={shouldBeSupported:!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia),deviceEnum:!1,mediaSources:R,AudioContext:!!window.AudioContext||!!window.webkitAudioContext,hasMic:void 0,hasWebcam:void 0,hasSpeaker:void 0,deviceCount:void 0,IceSupport:O,IceCandidates:P,IPADDR:V}}),idleRunner(function(){var e;window.CHLOROFP_STATUS="getBatteryInfo",B.battery,(e=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery)?(e.charging,e.level,e.dischargingTime):"function"==typeof navigator.getBattery&&navigator.getBattery().then(function(e){e.charging,e.level,e.dischargingTime})}),idleRunner(function(){window.CHLOROFP_STATUS="getBrowserType",B.browserType=function(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,n=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,i=!!document.documentMode,r=!i&&!!window.StyleMedia,a=!!window.chrome&&!!window.chrome.webstore,o=(a||e)&&!!window.CSS,s=navigator.userAgent;navigator.appVersion;return{isOpera:e,isFirefox:t,isSafari:n,isIE:i,isEdge:r,isChrome:a,isBlink:o,isWebKit:s.indexOf("AppleWebKit")>-1,isWeixin:s.indexOf("MicroMessenger")>-1,isQQ:" qq"==s.match(/\sQQ/i)}}()}),idleRunner(function(){window.CHLOROFP_STATUS="getTiming",B.performanceTiming=function(){if("undefined"!=typeof performance&&performance&&performance.timing){var e={};for(var t in performance.timing)"number"==typeof performance.timing[t]&&(e[t]=performance.timing[t]);return e}return{}}()}),idleRunner(function(){window.CHLOROFP_STATUS="getVisitPageTime",B.visTime=function(){var e,t="page_time";null!=z("localStorage")&&(e=localStorage.getItem(t));var n=b.get(t);if(e&&null!=e&&n){var i={path:"/",domain:N()};b.remove(t,i)}e&&null!=e||!n||(e=n),/^[0-9,]*$/.test(e)||(e=C.decompressFromEncodedURIComponent(e)),(e=e&&null!=e?e.split(","):[]).length>24&&(e=e.slice(e.length-24)),e.push(""+1*new Date);var r=e.join(",");r=C.compressToEncodedURIComponent(r),null!=z("localStorage")?localStorage.setItem(t,r):r&&r.length>200?(i={path:"/",domain:N()},b.remove(t,i)):k(t,r);return e}()}),idleRunner(function(){window.CHLOROFP_STATUS="otherInfo",B.other={adblock:function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var t=!1;try{document.body&&(document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e))}catch(n){t=!1}return t}(),hasLiedLanguages:function(){if("undefined"!=typeof navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(e){return!0}return!1}(),hasLiedResolution:screen.width<screen.availWidth||screen.height<screen.availHeight,hasLiedOs:function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.oscpu,i=navigator.platform.toLowerCase();if(e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if(void 0!==n){if((n=n.toLowerCase()).indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(n.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(n.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if(0===n.indexOf("win")&&0===n.indexOf("linux")&&n.indexOf("mac")>=0&&"other"!==e)return!0}return i.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||(i.indexOf("linux")>=0||i.indexOf("android")>=0||i.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||(i.indexOf("mac")>=0||i.indexOf("ipad")>=0||i.indexOf("ipod")>=0||i.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||0===i.indexOf("win")&&0===i.indexOf("linux")&&i.indexOf("mac")>=0&&"other"!==e||"undefined"==typeof navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e}()}}),window.CHLOROFP_STATUS="webgl",function(e){var t=[],n=function(e){return null==e?null:"["+e[0]+", "+e[1]+"]"},i=["webgl2","experimental-webgl2","webgl","experimental-webgl"],r=null,a=document.createElement("canvas"),o=function(e){try{var n=a.getContext(e,{stencil:!0});n&&(t.push(e),r||(r=n))}catch(i){}};idleRunner(function(){o(i[0])}),idleRunner(function(){o(i[1])}),idleRunner(function(){o(i[2])}),idleRunner(function(){o(i[3])}),idleRunner(function(){try{a.remove()}catch(o){}if(r){var i=function(e){var t={renderer:"Not Available",vendor:"Not Available"},n=e.getExtension("WEBGL_debug_renderer_info");return null!=n&&(t.renderer=e.getParameter(n.UNMASKED_RENDERER_WEBGL),t.vendor=e.getParameter(n.UNMASKED_VENDOR_WEBGL)),t}(r);e.isSupported=!0,e.WebGLVendor=r.getParameter(r.VENDOR),e.WebGLRenderer=r.getParameter(r.RENDERER),e.unMaskedVendor=i.vendor,e.unMaskedRenderer=i.renderer,e.maxColorBuffers=function(e){var t=1,n=e.getExtension("WEBGL_draw_buffers");return null!=n&&(t=e.getParameter(n.MAX_DRAW_BUFFERS_WEBGL)),t}(r),e.isEnabled=r.isEnabled(r.STENCIL_TEST),e.glVersion=r.getParameter(r.VERSION),e.shadingLanguageVersion=r.getParameter(r.SHADING_LANGUAGE_VERSION),e.redBits=r.getParameter(r.RED_BITS),e.greenBits=r.getParameter(r.GREEN_BITS),e.blueBits=r.getParameter(r.BLUE_BITS),e.alphaBits=r.getParameter(r.ALPHA_BITS),e.maxRenderBufferSize=r.getParameter(r.MAX_RENDERBUFFER_SIZE),e.maxCombinedTextureImageUnits=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS),e.maxCubeMapTextureSize=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),e.maxFragmentUniformVectors=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),e.maxTextureImageUnits=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.maxVaryingVectors=r.getParameter(r.MAX_VARYING_VECTORS),e.maxVertexAttributes=r.getParameter(r.MAX_VERTEX_ATTRIBS),e.maxVertexUniformVectors=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),e.aliasedLineWidthRange=n(r.getParameter(r.ALIASED_LINE_WIDTH_RANGE)),e.aliasedPointSizeRange=n(r.getParameter(r.ALIASED_POINT_SIZE_RANGE)),e.maxViewportDimensions=n(r.getParameter(r.MAX_VIEWPORT_DIMS)),e.maxAnisotropy=function(e){var t,n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");return n?(0===(t=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT))&&(t=2),t):null}(r),e.vertexShaderBestPrecision=r.getShaderPrecisionFormat?r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision:0,e.maxVertexTextureImageUnits=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),e.fragmentShaderBestPrecision=r.getShaderPrecisionFormat?r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision:0,e.depthBits=r.getParameter(r.DEPTH_BITS),e.stencilBits=r.getParameter(r.STENCIL_BITS),e.fragmentShaderFloatIntPrecision=function(e){try{return(0!==e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?"highp/":"mediump/")+(0!==e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMax?"highp":"lowp")}catch(t){return"Not Available"}}(r),e.extensions=r.getSupportedExtensions(),e.hardwareConcurrency=navigator.hardwareConcurrency,e.contextNames=t}else e.isSupported=!1})}(B.webGL),window.CHLOROFP_STATUS="getCanvasFp",e=B.canvasFp,t=document.createElement("canvas"),n=null,idleRunner(function(){t.getContext&&(n=t.getContext("2d"))}),idleRunner(function(){if(t.getContext&&n){t.width=2e3,t.height=200,t.style.display="inline",n.rect(0,0,10,10),n.rect(2,2,6,6);var i=!1===n.isPointInPath(5,5,"evenodd");n.textBaseline="alphabetic",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069";try{n.font="11pt Arial"}catch(a){}n.fillText("http://www.ctrip.com",2,15),n.fillStyle="rgba(102, 204, 0, 0.2)",n.font="18pt Arial",n.fillText("携程",4,45),n.globalCompositeOperation="multiply",n.fillStyle="rgb(255,0,255)",n.beginPath(),n.arc(50,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(0,255,255)",n.beginPath(),n.arc(100,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,255,0)",n.beginPath(),n.arc(75,100,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,0,255)",n.arc(75,75,75,0,2*Math.PI,!0),n.arc(75,75,25,0,2*Math.PI,!0),n.fill("evenodd");var r=t.toDataURL();e.canvasWinding=i,e.canvasData=x(r,0)}try{t.remove()}catch(a){}}),idleRunner(function(){window.CHLOROFP_STATUS="cleanObject",function e(t){for(var n in t)t[n]==undefined||null==t[n]||t[n]==NaN?delete t[n]:"object"==typeof t[n]?_(t[n])?e(t[n]):delete t[n]:"[object Array]"===Object.prototype.toString.call(t[n])&&t[n].length<1&&delete t[n]}(B)})},M=function(){return!("XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest)},D=function(e,t,n){var i=document.createElement("input");return i.type="hidden",i.name=t,i.value=n,i.id=t+"_d__",e.appendChild(i),i},G=function(n,i,r){if(d)return setTimeout(function(){G(n,i,r)},30);if(d=!0,M()){if(function(){var e=document.getElementById("deviceIframe_t_");if(e&&(document.body&&document.body.removeChild(e),e=null),!document.getElementById("deviceIframe_t_")){var t=document.createElement("iframe");t.id="deviceIframe_t_",t.width=0,t.height=0,t.marginHeight=0,t.marginWidth=0,document.body&&document.body.appendChild(t),document.getElementById("deviceIframe_t_").contentWindow.name="deviceIframe_t_",t.setAttribute("style","display:none");var n=0;(new T).bind(t,"load",function(){if(1===n){if(window.CHLOROFP_STATUS="iframe_data_back",l=t.contentWindow.name,F(l)){if(l.indexOf("|")>0){var e=l.split("|");l=e[0],window.CHLOROFP_IP=e[1],k("_RF1",e[1]),e.length>2&&(h=e[2],k("_RSG",h)),e.length>3&&(c=e[3],k("_RDG",c))}return k(f,l),null!=z("localStorage")&&localStorage.setItem(f,l),t.contentWindow.document.write(""),t.contentWindow.close(),void(document.body&&document.body.removeChild(t))}}else 0===n&&(n=1,d=!1,t.contentWindow&&(t.contentWindow.location="about:blank"))})}}(),e.action=n,t.name=i,t.value=r,l){var a=document.getElementById("guid_d__");a?a.value=l:D(e,"guid",l)}if(c){var o=document.getElementById("dg_d__");o?o.value=c:D(e,"dg",c)}e.submit()}else{var s="";null!=z("localStorage")&&(s=localStorage.getItem("GUID"));var u=i+"="+r+"&version=7&serverName="+p+"&cid="+s;l&&(u+="&guid="+l),c&&(u+="&dg="+c),L.post({url:n,credentials:!0,params:u,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},success:function(e){if(window.CHLOROFP_STATUS="data_back",d=!1,e&&(window.CHLOROFP_STATUS="data_exist",F(e.split("\n")[0]))){if((l=e.split("\n")[0]).indexOf("|")>0){var t=l.split("|");l=t[0],window.CHLOROFP_IP=t[1],k("_RF1",t[1]),t.length>2&&(h=t[2],k("_RSG",h)),t.length>3&&(c=t[3],k("_RDG",c))}return k(f,l),void(null!=z("localStorage")&&localStorage.setItem(f,l))}window.CHLOROFP_STATUS="data_not_exist"},error:function(){m("cors error"),window.CHLOROFP_STATUS="cors_error",d=!1}})}},F=function(e){return e&&(5==e.split("-").length||6==e.split("-").length)},U=setInterval(function(){if(g&&l&&h&&c)try{b.get(f)||(k(f,l),null!=z("localStorage")&&localStorage.setItem(f,l)),b.get("_RSG")||k("_RSG",h),b.get("_RDG")||k("_RDG",c)}catch(e){U&&clearInterval(U)}},600);function H(){this.pos=0,this.bytes=new Array,this.checkSum=function(){for(var e=0,t=0;t<this.bytes.length;t++)e+=this.bytes[t]>=0?this.bytes[t]:this.bytes[t]+256;return e},this.get=function(e){return this.bytes[e]},this.getShort=function(e){return this.bytes[e]<<8|this.bytes[e+1]},this.position=function(){return this.pos},this.getBytes=function(){return this.bytes},this.put=function(e){this.bytes[this.pos]=e,this.pos++},this.putAtIndex=function(e,t){this.bytes[e]=t},this.putBytes=function(e){for(var t=0;t<e.length;t++)this.put(e[t])},this.putInt=function(e){this.toBytes(e,4)},this.putIntAtIndex=function(e,t){this.toBytesAtIndex(t,4,e)},this.putShort=function(e){this.toBytes(e,2)},this.putShortAtIndex=function(e,t){this.toBytesAtIndex(t,2,e)},this.putLong=function(e){this.toBytes(e,8)},this.putLongAtIndex=function(e,t){this.toBytesAtIndex(t,8,e)},this.putFloat=function(e){this.putInt(this.toFloat32(e))},this.toBytesAtIndex=function(e,t,n){var i=t;do{this.bytes[n-1+i]=255&e,i--,e>>=8}while(i)},this.toFloat32=function(e){var t=0;switch(e){case Number.POSITIVE_INFINITY:t=2139095040;break;case Number.NEGATIVE_INFINITY:t=4286578688;break;case 0:t=0;break;default:if(Number.isNaN(e)){t=2143289344;break}e<=-0&&(t=2147483648,e=-e);var n=Math.floor(Math.log(e)/Math.log(2)),i=e/Math.pow(2,n)*8388608|0;(n+=127)>=255?(n=255,i=0):n<0&&(n=0),t|=n<<23,t|=8388607&i}return t},this.toBytes=function(e,t){var n=t;do{this.bytes[this.pos-1+n]=255&e,n--,e>>=8}while(n);this.pos+=t}}b.get(f)?(l=b.get(f),g=!0):b.get("guid__")&&(l=b.get("guid__"),k(f,l)),l||null==z("localStorage")||(l=localStorage.getItem(f)),b.get("_RSG")&&(h=b.get("_RSG")),b.get("_RDG")&&(c=b.get("_RDG")),M()&&((e=document.createElement("form")).id="deviceForm",e.name="deviceForm",document.body&&document.body.appendChild(e),e.target="deviceIframe_t_",e.action="url",e.method="post",e.setAttribute("style","display:none"),t=D(e,"key","value"),D(e,"iframe","true"),D(e,"version",7),D(e,"serverName",p)),setTimeout(function(){window.CHLOROFP_STATUS="init",W(),idleRunner(function(){window.CHLOROFP_STATUS="init_end";try{device_callback__&&device_callback__(B)}catch(e){}window.CHLOROFP_STATUS="before_submit",G(u,"data",w())})},200)}();